/***************************************************************************** taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Copyright (C) 2016 ShenZhen Yeedon Media co.,LTD. All rights reserved. * taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h File Name : taub.c taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Description : Driver source file of TAUB. taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Author: Xiaojie.Zheng taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Date: 2016-12-12 ******************************************************************************/  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Files for including */ #include "taub_info.inc"  static BOOL taub_InitStatus;  /*************************************************** taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Function: TAUB_Init taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Description: TAUB drive initialization taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Parameters: none taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Returns: none taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h $Create & Verlog:$ taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Author: Xiaojie.Zheng Date:2016-12-12 Version:V1.0 ****************************************************/ void TAUB_Init(void)  { taub_InitStatus = TRUE; }  /*************************************************** taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Function: TAUB_GetInitStatus taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Description: get the TAUB module initialized status taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Parameters: none taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Returns: taub_InitStatus taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h $Create & Verlog:$ taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Author: Xiaojie.Zheng Date:2016-12-12 Version:V1.0 ****************************************************/ U8 TAUB_GetInitStatus(void) { return taub_InitStatus; }  /*************************************************** taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Function: TAUB_Start taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Description: TAUB_Start taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Parameters: model:Timer module selection taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Returns: fail/ok/invalid taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h $Create & Verlog:$ taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Author: Xiaojie.Zheng Date:2016-12-12 Version:V1.0 ****************************************************/ U8 TAUB_Start(TAUBSelect_ENUM model) { U8 res;  if (FALSE == taub_InitStatus) { res = RET_FAIL; } else { if (TYPE_TAUB_0 == model) { TAUB0TS = 0x0001u; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr start TAUB0 channel 0 */ res = RET_OK; } else if (TYPE_TAUB_1 == model) { TAUB1TS = 0x0001u; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr start TAUB1 channel 0 */ res = RET_OK; } else if (TYPE_TAUB_2 == model) { TAUB2TOE07 = 1; TAUB2TS06 = 1;/* start TAUB2 channel 7 */ TAUB2TS07 = 1; res = RET_OK; } else { res = RET_INVALID; }  } return res; } /*************************************************** taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Function: TAUB_Stop taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Description: TAUB_Stop taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Parameters: model:Timer module selection taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Returns: fail/ok/invalid taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h $Create & Verlog:$ taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Author: Xiaojie.Zheng Date:2016-12-12 Version:V1.0 ****************************************************/ U8 TAUB_Stop(TAUBSelect_ENUM model) { U8 res = RET_FAIL;  if (FALSE == taub_InitStatus) { res = RET_FAIL; } else { if (TYPE_TAUB_0 == model) { TAUB0TT=0x0001u; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr stop TAUB0 channel 0 */ res = RET_OK; } else if (TYPE_TAUB_1 == model) { TAUB1TT=0x0001u; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr stop TAUB1 channel 0 */ res = RET_OK; } else if (TYPE_TAUB_2 == model) { TAUB2TOE07 = 0; TAUB2TT = 0x00C0u; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr stop TAUB2 channel 0 */ res = RET_OK; } else { res = RET_INVALID; }  } return res; }  /*************************************************** taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Function: TAUB_SetParam taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Description: Set the param of the taub taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Parameters: model:Timer module selection InitVal:Timer initial value Period:Timer cycle taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Returns: fail/ok/invalid taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h $Create & Verlog:$ taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Author: Xiaojie.Zheng Date:2016-12-12 Version:V1.0 ****************************************************/ U8 TAUB_SetParam(TAUBSelect_ENUM model, U32 Cycle, U32 Duty) { U8 res = RET_FAIL;  if (FALSE == taub_InitStatus) { res = RET_FAIL; } else { //CLR_BIT(PORT_ISOPFCE17, 5); //SET_BIT(PORT_ISOPFC17, 5); //CLR_BIT(PORT_ISOPM17,5); //SET_BIT(PORT_ISOPMC17, 5);   if (TYPE_TAUB_2 == model) { //INTC2EIMK42 = 1U; //INTC2EITB42 = 0U;  //INTC2EIMK43 = 1U; //INTC2EITB43 = 0U;  SYS.PROTCMDD1.UINT32 =0XA5; SYS.CKSC_ICLKFIXS_CTL.UINT32 =0x00000001; SYS.CKSC_ICLKFIXS_CTL.UINT32 =~(0x00000001); SYS.CKSC_ICLKFIXS_CTL.UINT32 =0x00000001; while ((SYS.CKSC_ICLKFIXS_ACT.UINT32 & 0x00000001) != 0x1);   SYSPROTCMDD1 =0XA5; SYSCKSC_ITAUB2S_CTL =0x00000002; SYSCKSC_ITAUB2S_CTL =~(0x00000002); SYSCKSC_ITAUB2S_CTL =0x00000002; //protected_write(SYSPROTCMDD1,SYSPROTSD1,SYSCKSC_ITAUB2S_CTL,0x02u); /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr TAUB0 clock = CLKFIX/1 = 80 MHz)*/ while(0x02u != SYSCKSC_ITAUB2S_ACT) {  }  TAUB2TT |= 0x0040u;  TAUB2TPS = 3; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr specify clock frequency of CK0...CK3 (CK0 -> 80 MHz/8(2 ^ Period))*/ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Enable the channel output TAUBnTOE - TAUBn Channel Output Enable Register b15:b 0 TAUBnTOEm - Enables/disables the independent channel output function. - Enables the independent timer output function. */ TAUB2CDR6 = Cycle; /*TAUBn channel data register m*/ TAUB2CDR7 = Duty;   /* Bit Position Bit Name Function 15, 14 TAUBnCKS[1:0] Operation Clock Selection 00: Prescaler output = CK0 01: Prescaler output = CK1 10: Prescaler output = CK2 11: Prescaler output = CK3 The value of the TAUBnCKS[1:0] bits of the master and slave channel(s) must be identical.  13 Reserved When read, the value after reset is returned. When writing to this bit, write the value after reset. 12 TAUBnCCS0 Write 0B. 11 TAUBnMAS Write 1B. 10 to 8 TAUBnSTS[2:0] Write 000B. 7, 6 TAUBnCOS[1:0] Write 00B. 5 Reserved When read, the value after reset is returned. When writing to this bit, write the value after reset. 4 to 1 TAUBnMD[4:1] Write 0000B. 0 TAUBnMD0 Write 1B. */ TAUB2CMOR6 = 0X0801; /*TAUBn channel mode OS register m*/  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr  Bit Position Bit Name Function 7 to 2 Reserved When read, the value after reset is returned. When writing to these bits, write the value after reset. 1, 0 TAUBnTIS[1:0] 00: Not used, so set to 00. */ TAUB2CMUR6 = 0X00; /*TAUBn channel mode user register m*/  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr The simultaneous rewrite registers (TAUBnTOM, TAUBnTOC, TAUBnTOL, TAUBnTDE , TAUBnTDM , TAUBnTDL TAUBnTRE, TAUBnTRO, TAUBnTRC, TAUBnTME) cannot be used with the PWM output Function. Therefore, these registers must be set to 0. */ TAUB2TOM06 = 0; /*TAUBn channel output mode register*/ TAUB2TOC06 = 0; /*TAUBn channel output configuration register*/ TAUB2TOL06 = 1; /*TAUBn channel output active level register*/ TAUB2TDE06 = 0; /*TAUBn channel dead time output enable register*/ TAUB2TDL06 = 0; /*TAUBn channel dead time output level register*/  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr The simultaneous rewrite registers (TAUBnRDE, TAUBnRDS, TAUBnRDM, and TAUBnRDC) Both the master and slave channels should have the same simultaneous rewrite settings. Unused with the sample programs. Therefore, these registers set to 0. */  TAUB2RDE06 = 1; /*TAUBn channel reload data enable register*/ TAUB2RDS06 = 0; /*TAUBn channel reload data control CH select register*/ TAUB2RDM06 = 0; /*TAUBn channel reload data mode register*/ TAUB2RDC06 = 0; /*TAUBn channel reload data control register*/   /* Bit Position Bit Name Function 15, 14 TAUBnCKS[1:0] Operation Clock Selection 00: Prescaler output = CK0 01: Prescaler output = CK1 10: Prescaler output = CK2 11: Prescaler output = CK3 The value of the TAUBnCKS[1:0] bits of the master and slave channel(s) must be identical. 13 Reserved When read, the value after reset is returned. When writing to this bit, write the value after reset. 12 TAUBnCCS0 Write 0B. 11 TAUBnMAS Write 0B. 10 to 8 TAUBnSTS[2:0] Write 100B. 7, 6 TAUBnCOS[1:0] Write 00B. 5 Reserved When read, the value after reset is returned. When writing to this bit, write the value after reset. 4 to 1 TAUBnMD[4:1] Write 0100B. 0 TAUBnMD0 Write 1B. */ TAUB2CMOR7 = 0X0409; /*TAUBn channel mode OS register m*/  /* Bit Position Bit Name Function 7 to 2 Reserved When read, the value after reset is returned. When writing to these bits, write the value after reset. 1, 0 TAUBnTIS[1:0] 00: Not used, so set to 00. */ TAUB2CMUR7 = 0X00; /*TAUBn channel mode user register m*/   /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr The simultaneous rewrite registers (TAUBnTOM, TAUBnTOC, TAUBnTOL, TAUBnTDE , TAUBnTDM , TAUBnTDL TAUBnTRE, TAUBnTRO, TAUBnTRC, TAUBnTME) cannot be used with the PWM output Function. Therefore, these registers must be set to 0. */ TAUB2TOM07 = 1; /*TAUBn channel reload data enable register*/ TAUB2TOC07 = 0; /*TAUBn channel output configuration register*/ TAUB2TOL07 = 1; /*TAUBn channel output active level register*/ TAUB2TDE07 = 0; /*TAUBn channel dead time output enable register*/ TAUB2TDL07 = 0; /*TAUBn channel dead time output level register*/   /* Bit Name Setting TAUBnRDE.TAUBnRDEm 1: Enables simultaneous rewrite TAUBnRDS.TAUBnRDSm 0: Selects master channel for simultaneous rewrite triggers. 1: Selects upper channel outside the channel group for simultaneous rewrite triggers. TAUBnRDM.TAUBnRDMm 0: The simultaneous rewrite trigger signal is generated when the master channel starts counting TAUBnRDC.TAUBnRDCm 0: Does not use the channel to generate the simultaneous rewrite trigger. */ TAUB2RDE07 = 1; /*TAUBn channel reload data enable register*/ TAUB2RDS07 = 0; /*TAUBn channel reload data control CH select register*/ TAUB2RDM07 = 0; /*TAUBn channel reload data mode register*/ TAUB2RDC07 = 0; /*TAUBn channel reload data control register*/  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Enables the counter for each channel TAUB2TS - TAUBn Channel Start Trigger Register b15:b 0 TAUBnTSm - Enables the counter operation of channel m. - Enables the ch.6,7 counter */ //TAUB2TS06 = 1; /*TAUBn channel start trigger register*/ //TAUB2TS07 = 1; /*TAUBn channel start trigger register*/  //TAUB2TOE07 = 1; /*TAUBn channel output enable register*/ res = RET_OK; } else { res = RET_INVALID; } } return res; } #if 0 /*************************************************** taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Function: TAUB2_SetPwmParam taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Description: Set the param of the taub taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Parameters: Cycle:PWM Cycle Duty:PWM Duty Period:Timer cycle taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Returns: fail/ok/invalid taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h $Create & Verlog:$ taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Author: Xiaojie.Zheng Date:2016-12-12 Version:V1.0 ****************************************************/ U8 TAUB2_SetPwmParam(U32 Cycle, U32 Duty, TAUBPeriodDiv_ENUM Period) /*±³¹â¿ØÖÆ*/ { U8 res;  if (FALSE == taub_InitStatus) { res = RET_FAIL; } else { protected_write(SYSPROTCMDD1,SYSPROTSD1,SYSCKSC_ITAUB2S_CTL,0x01u); /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr TAUB0 clock = CLKFIX/1 = 80 MHz)*/ while(0x01u != SYSCKSC_ITAUB2S_ACT){}  TAUB2TPS = Period; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr specify clock frequency of CK0...CK3 (CK0 -> 80 MHz/128(2 ^ Period))*/  TAUB2CDR0 = Cycle; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr INTTAUDnIm cycle = count clock cycle taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h (TAUDnCDRm + 1) */ TAUB2CDR1 = Duty; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr INTTAUDnIm cycle = count clock cycle taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h (TAUDnCDRm + 1) */  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Controls master channel operation TAUDnCMORm - TAUDn Channel Mode OS Register b15:b14 TAUDnCKS - Selects an operation clock. - Selected Operation CK0 b13:b12 TAUDnCCS0 - Selects a count clock for TAUDnCNTm counter. - Uses an operation clock as a count clock. Set to 00'b b11 TAUDnMAS - Specifies whether the channel is a master channe or slave channel during synchronous channel operation. - Master channel. Set to 1'b b10:b 8 TAUDnSTS - Selects an external start trigger. - Triggers the counter by software. Set to 000'b b 7:b 6 TAUDnCOS - Specifies the timing for updating capture register TAUDnCDRm and overflow flag TAUDnCSRm.TAUDnOVF of channel m. - Unused. Set to 00'b. b 5 - Reserved set to 0 b 4:b 1 TAUDnMD - Specifies an operating mode. - Interval timer mode. Set to 0000'b b 0 TAUDnMD0 - Specifies whether INTTAUDnIm is generated at the beginning of count operation (when a start trigger is entered) or not. - INTTAUDnIm generated at the beginning of operation. Set to 1'b */ TAUB2CMOR0 = 0x0801u;  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Controls slave channel operation TAUDnCMORm - TAUDn Channel Mode OS Register b15:b14 TAUDnCKS - Selects an operation clock. - Selected Operation CK0 b13:b12 TAUDnCCS0 - Selects a count clock for TAUDnCNTm counter. - Uses an operation clock as a count clock. Set to 00'b b11 TAUDnMAS - Specifies whether the channel is a master channe or slave channel during synchronous channel operation. - Slave channel. Set to 0'b b10:b 8 TAUDnSTS - Selects an external start trigger. - INTTAUDnIm of master channel is a start trigger. Set to 100'b b 7:b 6 TAUDnCOS - Specifies the timing for updating capture register TAUDnCDRm and overflow flag TAUDnCSRm.TAUDnOVF of channel m. - Unused. Set to 00'b. b 5 - Reserved set to 0 b 4:b 1 TAUDnMD - Specifies an operating mode. - One-count mode. Set to 0100'b b 0 TAUDnMD0 - Specifies whether INTTAUDnIm is generated at the beginning of count operation (when a start trigger is entered) or not. - Start trigger during operation is valid. Set to 1'b */ TAUB2CMOR1 = 0x0409u;  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Specifies the type of valid edge detection used for the TAUDTTINm input. TAUDnCMURm - TAUDn Channel Mode User Register b 7:b 2 - Reserved set to 0 b 1:b 0 TAUDnTIS - Specifies a valid edge of TAUDTTINm input signal. - Unused. Set to 00'b. */  TAUB2CMUR0 = 0x0000u;  TAUB2CMUR1 = 0x0000u;   /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Master chanel settings */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr The simultaneous rewrite registers (TAUDnTOM, TAUDnTOC,TAUDnTOL,TAUDnTDE,TAUDnTDL,) cannot be used with the PWM output Function.Therefore, these registers must be set to 0. */ TAUB2TDL00 &= 0xFFFEU; TAUB2TDE00 &= 0xFFFEU; TAUB2TOL00 &= 0xFFFEU; TAUB2TOC00 &= 0xFFFEU; TAUB2TOM00 &= 0xFFFEU; TAUB2TOE00 &= 0xFFFEU;  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr The simultaneous rewrite registers (TAUDnRDE, TAUDnRDS, TAUDnRDM, and TAUDnRDC) Both the master and slave channels should have the same simultaneous rewrite settings. Unused with the sample programs. Therefore, these registers set to 0. */  TAUB2RDE00 &= 0xFFFEU; TAUB2RDS00 &= 0xFFFEU; TAUB2RDM00 &= 0xFFFEU;  TAUB2RDC00 &= 0xFFFEU;   /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr The simultaneous rewrite registers (TAUDnTDE, TAUDnTDL). Both the master and slave  channels should have the same simultaneous rewrite settings.  Unused with the PWM output Function. Therefore, these registers set to 0. */  TAUB2TDL01 &= 0xFFFDU; TAUB2TDE01 |= 0x0002U;  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Specifies the output mode of each channel in combination with TAUDnTOMm. TAUDnTOL - TAUDn Channel Output Level Register b15:b 0 TAUDnTOLm - Specifies the output logic of channel m output bit (TAUDnTO.TAUDnTOm). - Positive logic (active high). Set to 0. */  TAUB2TOL01 &= 0xFFFDU;  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Specifies the output mode of each channel in combination with TAUDnTOMm. TAUDnTOC - TAUDn Channel Output Configuration Register b15:b 0 TAUDnTOCm - Specifies an output mode. - Synchronous channel operating mode 1: Set when INT occurs on master channels, and reset when INT occurs on slave channels. Set to 0. */ TAUB2TOC01 |= 0x0002U;  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Slave chanel settings */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Specifies the output mode of each channel. TAUDnTOM - TAUDn Channel Output Mode Register b15:b 0 TAUDnTOMm - Specifies an output mode. - Synchronous channel operation. Set to 1. */  TAUB2TOM01 |= 0x0002U; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Enable the channel output TAUDnTOE - TAUDn Channel Output Enable Register b15:b 0 TAUDnTOEm - Enables/disables the independent channel output function. - Enables the independent timer output function. */  TAUB2TOE01 |= 0x0002U;  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr The simultaneous rewrite registers (TAUDnRDE, TAUDnRDS, TAUDnRDM, and TAUDnRDC) Both the master and slave channels should have the same simultaneous rewrite settings. Unused with the sample programs. Therefore, these registers set to 0. */  TAUB2RDE00 &= 0xFFFDU; TAUB2RDS00 &= 0xFFFDU; TAUB2RDM00 &= 0xFFFDU;  TAUB2RDC00 &= 0xFFFDU;  INTC2EIC49 = 0x0047u; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr unmasked timer TAUB0 chanel 0 interrupt(17)and enabled reference table jump method*/ INTC2EIC50 = 0x0047u; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr unmasked timer TAUB0 chanel 0 interrupt(17)and enabled reference table jump method*/ res = RET_OK; } return res; } #endif /*=========================================================================== taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h File Revision History(bottom to top:first revision to last revision) *============================================================================ taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h $Log:$ * taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h Rev: Userid: Date: Description *-------- ---------- --------- ------------------------------ * taub.c taub_cfg.h taub_info.inc taub_private.h taub_public.h V1.0 Xiaojie.Zheng 2016-12-12 Initial * *===========================================================================*/ #if 0 #include "r_typedefs.h" #include "dio_public.h"   void BPMTestStart(void){ U8 res =0;  DIO_SetIOSts(INDEX_DIO_PIN88, 1, &res);  TAUB_SetParam(2,2054,1027); TAUB_Start(2);  }  void BPMTestStop(void){ TAUB_Stop(2); } #endif
