/* **************************************************************************** PROJECT : VLIB - BSP FILE : $Id: r_bsp.c 7379 2016-01-27 08:34:40Z matthias.nippert $ ============================================================================ DESCRIPTION BSP Implementation D1Lx MANGO Board ============================================================================ C O P Y R I G H T ============================================================================ Copyright (c) 2015 by Renesas Electronics (Europe) GmbH. Arcadiastrasse 10 D-40472 Duesseldorf Germany All rights reserved. ============================================================================ Purpose: only for testing  DISCLAIMER This software is supplied by Renesas Electronics Corporation and is only intended for use with Renesas products. No other uses are authorized. This software is owned by Renesas Electronics Corporation and is protected under all applicable laws, including copyright laws. THIS SOFTWARE IS PROVIDED "AS IS" AND RENESAS MAKES NO WARRANTIES REGARDING THIS SOFTWARE, WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING BUT NOT LIMITED TO WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. ALL SUCH WARRANTIES ARE EXPRESSLY DISCLAIMED. TO THE MAXIMUM EXTENT PERMITTED NOT PROHIBITED BY LAW, NEITHER RENESAS ELECTRONICS CORPORATION NOR ANY OF ITS AFFILIATED COMPANIES SHALL BE LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES FOR ANY REASON RELATED TO THIS SOFTWARE, EVEN IF RENESAS OR ITS AFFILIATES HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Renesas reserves the right, without notice, to make changes to this software and to discontinue the availability of this software. By using this software, you agree to the additional terms and conditions found by accessing the following link: http://www.renesas.com/disclaimer * Copyright (C) 2011 Renesas Electronics Corporation. All rights reserved.  **************************************************************************** */  /* Section: BSP Description  The "D1Lx-Mango Board" Support Package is intended for the following board combination:  BSP Board Name: "D1Lx-MANGO Board" + D1L2 or D1L2H MANGO Adapter board (with D1L1 or D1L2 or D1L2H MCU) + D1x MANGO Main board */   /******************************************************************************* Section: Includes */  #include "Cpu.h" #include "r_typedefs.h" /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Renesas basic types, e.g. uint32_t */ #include "public.h" #include "r_gpio_api.h" #include "r_dev_api.h" #include "r_tick_api.h" #include "r_bsp_api.h"  #ifdef USE_BSP_STDIO #include "r_bsp_stdio_api.h" #endif  #ifdef USE_BSP_HMI #include "r_bsp_hmi_api.h" #endif   #ifdef USE_BSP_GFX #include "r_bsp_gfx_api.h" #include "r_bsp_gfx_disp_init.h" /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr CSI init for NEC display */ #include "r_bsp_gfx_hdmi_out.h" /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr init HDMI output converters */ #include "r_bsp_gfx_iis_audio_dac.h" /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr IIS Audio Digital Analog converter init */ #endif /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr USE_BSP_GFX */  #include "com_public.h" //#include "dr7f701402.dvf.h"  #define TEST_CODE_COMBINE 1   #if TEST_CODE_COMBINE #include "clock_public.h" #include "dio_public.h" #include "wdt_public.h" #include "stbc_public.h" #include "adce_public.h" #include "pwm_public.h" #include "taub_public.h" #include "dspi_public.h" #include "rstc_public.h" #include "ostm_public.h" #include "rtca_public.h" #include "adm_public.h" #include "iom_public.h" #include "pwmm_public.h" #include "eed_public.h" #include "bpm_public.h" #include "lrm_public.h"  #include "sys_public.h" #include "rtc_public.h" #include "nvm_public.h" #include "illu_public.h" #include "bat_public.h" #include "crus_public.h" #include "stsmg_public.h"  #include "trip_public.h" #include "st_public.h" #include "tip_public.h" #include "odo_public.h" #include "acc_public.h" #include "pwr_public.h" #include "ssb_public.h" #include "ass_public.h" #include "scs_public.h" #include "led_public.h" #include "msg_public.h" #include "idle_public.h"  #include "com_public.h" #include "bat_public.h"   #include "hsd_public.h" #include "rst_public.h"   #include "avgFuelCsump_V2.h" #include "FuelLevelAlgorithm_V2.h" #include "RangeToEmptyAlgorithm_V2.h" #include "ISM_Public.h" #include "nzm_public.h"  #endif   /******************************************************************************* Section: Local Defines */  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr make sure we have the information ready */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr BSP_SHOW_INFO: Print Clock Config at the end of BSP init */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr BSP_PROVIDE_INFO: Pprovide the API function to call the colck config print (later) */  #ifdef BSP_SHOW_INFO #define BSP_PROVIDE_INFO #endif  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr set 1 to use the FOUT */ #define USE_FOUT_PIN 0  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Module reset control register */ #define LOC_MRSTC 0xFFF8F400u #define LOC_PROTSMRST 0xFFF8F484u #define LOC_PROTCMDMRST 0xFFF8F480u  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Module reset control register bits */ #define MRSTC_XC0RES ((uint32_t)(1ul<<13u)) #define MRSTC_SDRB0RES ((uint32_t)(1ul<<12u)) #define MRSTC_MLBB0RES ((uint32_t)(1ul<<11u)) #define MRSTC_LCBI0RES ((uint32_t)(1ul<<10u)) #define MRSTC_SG4RES ((uint32_t)(1ul<<9u)) #define MRSTC_SG3RES ((uint32_t)(1ul<<8u)) #define MRSTC_SG2RES ((uint32_t)(1ul<<7u)) #define MRSTC_SG1RES ((uint32_t)(1ul<<6u)) #define MRSTC_SG0RES ((uint32_t)(1ul<<5u)) #define MRSTC_ADCE0RES ((uint32_t)(1ul<<4u)) #define MRSTC_ISM0RES ((uint32_t)(1ul<<3u)) #define MRSTC_ETNB0RES ((uint32_t)(1ul<<2u)) #define MRSTC_VDCE1RES ((uint32_t)(1ul<<1u)) #define MRSTC_VDCE0RES ((uint32_t)(1ul<<0u))  /******************************************************************************* Constant: LOC_BSP_BOARD_NAME  Name of the Application Boards (as string) */  #define LOC_BSP_BOARD_NAME "-MANGO" #define LOC_BSP_BOARD_VERSION "V1.0"   /******************************************************************************* Section: Local Constants */   /******************************************************************************* Array loc_PinFoutConfig  contains the pin configuration */   static const r_dev_PinConfig_t loc_D1L2_NetWorkPinConfig[] = //@KS add /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Port Pin Func Dir Feedback Pull OpenDrain HiCurr HiSpeed InputType */ { {0, 4, 4u, R_DEV_PIN_OUT, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr O: CAN TX */ {0, 5, 4u, R_DEV_PIN_IN, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr O: CAN RX */ {0, 6, 0u, R_DEV_PIN_OUT, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr O: CAN STB */  {0, 7, 1u, R_DEV_PIN_IN, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr O: LIN RX */ {0, 8, 1u, R_DEV_PIN_OUT, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr O: LIN TX */ {0, 9, 1u, R_DEV_PIN_IN, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr O: LIN INT */ {1, 0, 0u, R_DEV_PIN_OUT, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr O: LIN STB */  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr delimiter - do not remove */ {0u, (uint8_t)R_DEV_PIN_LAST, 0u, R_DEV_PIN_OUT, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 0u, R_DEV_PIN_CMOS1} };  static const r_dev_PinConfig_t loc_D1L2_BpmPinConfig[] = //@KS add /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Port Pin Func Dir Feedback Pull OpenDrain HiCurr HiSpeed InputType */ { {17, 5, 2u, R_DEV_PIN_OUT, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr O: CAN TX */ {17, 6, 0u, R_DEV_PIN_OUT, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr O: CAN RX */  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr delimiter - do not remove */ {0u, (uint8_t)R_DEV_PIN_LAST, 0u, R_DEV_PIN_OUT, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 0u, R_DEV_PIN_CMOS1} };  #if 1 static const r_dev_PinConfig_t loc_PinConfigIsm[] = /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Port Pin Func Dir Feedback Pull OpenDrain HiCurr HiSpeed InputType */ { /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr ISM stepper motors (P16_[0..11] and P17_[0..11] AF1 */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr ISM1x (ISM channel 0) */ {16u, 0u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO,  0u, 1u, 1u, R_DEV_PIN_CMOS1}, {16u, 1u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO,  0u, 1u, 1u, R_DEV_PIN_CMOS1}, {16u, 2u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO,  0u, 1u, 1u, R_DEV_PIN_CMOS1}, {16u, 3u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO,  0u, 1u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr ISM2x (ISM channel 1) */ //{16u, 4u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{16u, 5u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{16u, 6u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{16u, 7u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr ISM5x (ISM channel 4) */ {16u, 8u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, {16u, 9u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, {16u, 10u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, {16u, 11u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr ISM6x (ISM channel 5) */ //{17u, 0u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{17u, 1u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{17u, 2u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{17u, 3u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr ISM3x (ISM channel 2) */ //{17u, 4u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{17u, 5u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{17u, 6u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{17u, 7u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr ISM4x (ISM channel 3) */ //{17u, 8u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{17u, 9u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{17u, 10u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{17u, 11u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr delimiter - do not remove */ {0u, R_DEV_PIN_LAST,0u,R_DEV_PIN_OUT,0u,R_DEV_PIN_PULLNO, 0u, 0u, 0u, R_DEV_PIN_CMOS1} };  static const r_dev_PinConfig_t loc_PinConfigIsm2[] = /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Port Pin Func Dir Feedback Pull OpenDrain HiCurr HiSpeed InputType */ { /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr ISM stepper motors (P16_[0..11] and P17_[0..11] AF1 */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr ISM1x (ISM channel 0) */ {16u, 0u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO,  0u, 0u, 0u, R_DEV_PIN_CMOS1}, {16u, 1u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO,  0u, 0u, 0u, R_DEV_PIN_CMOS1}, {16u, 2u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO,  0u, 0u, 0u, R_DEV_PIN_CMOS1}, {16u, 3u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO,  0u, 0u, 0u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr ISM2x (ISM channel 1) */ //{16u, 4u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{16u, 5u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{16u, 6u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{16u, 7u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr ISM5x (ISM channel 4) */ {16u, 8u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 0u, R_DEV_PIN_CMOS1}, {16u, 9u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 0u, R_DEV_PIN_CMOS1}, {16u, 10u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 0u, R_DEV_PIN_CMOS1}, {16u, 11u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 0u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr ISM6x (ISM channel 5) */ //{17u, 0u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{17u, 1u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{17u, 2u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{17u, 3u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr ISM3x (ISM channel 2) */ //{17u, 4u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{17u, 5u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{17u, 6u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{17u, 7u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr ISM4x (ISM channel 3) */ //{17u, 8u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{17u, 9u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{17u, 10u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, //{17u, 11u, 1u, R_DEV_PIN_DIRECT, 0u, R_DEV_PIN_PULLNO, 0u, 1u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr delimiter - do not remove */ {0u, R_DEV_PIN_LAST,0u,R_DEV_PIN_OUT,0u,R_DEV_PIN_PULLNO, 0u, 0u, 0u, R_DEV_PIN_CMOS1} };  #endif   static const r_dev_PinConfig_t loc_D1L2_PWMPinConfig[] = //@KS add /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Port Pin Func Dir Feedback Pull OpenDrain HiCurr HiSpeed InputType */ { {16, 4, 2u, R_DEV_PIN_OUT, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr O: CAN TX */ {16, 5, 2u, R_DEV_PIN_OUT, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr O: CAN RX */ {16, 6, 2u, R_DEV_PIN_OUT, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr O: CAN STB */  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr delimiter - do not remove */ {0u, (uint8_t)R_DEV_PIN_LAST, 0u, R_DEV_PIN_OUT, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 0u, R_DEV_PIN_CMOS1} };   static const r_dev_PinConfig_t loc_PinFoutConfig[] = /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Port Pin Func Dir Feedback Pull OpenDrain HiCurr HiSpeed InputType */ { {0u, 4u, 3u, R_DEV_PIN_OUT, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 1u, R_DEV_PIN_CMOS1}, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr FOUT*/  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr delimiter - do not remove */ {0u, (uint8_t)R_DEV_PIN_LAST, 0u, R_DEV_PIN_OUT, 0u, R_DEV_PIN_PULLNO, 0u, 0u, 0u, R_DEV_PIN_CMOS1} };   #define TAUBO6_GPIO_BPM_PWR_PORT 17 #define TAUBO6_GPIO_BPM_PWR_PIN 6  /******************************************************************************* Array loc_ClkSelectionCfgD1L2  contains the clock selectors configuration for D1L2 */ static const r_dev_ClkSelConfig_t loc_ClkSelectionCfgD1L2[] = /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Cks SrcId Div StpReqMsk */ { {R_DEV_CKS_OSTM , R_DEV_CKS_SRC_MOSC, 2, 0u}, {R_DEV_CKS_CLKJIT , R_DEV_CKS_SRC_DIV, 6, 0u}, {R_DEV_CKS_PLLFIX , R_DEV_CKS_SRC_PLL1, 4, 0u}, {R_DEV_CKS_CLKFIX , R_DEV_CKS_SRC_DIV, 60, 0u},//12 {R_DEV_CKS_CPU , R_DEV_CKS_SRC_PLL0, 4, 0u}, {R_DEV_CKS_PLL2IN , R_DEV_CKS_SRC_MOSC, 1, 0u},  #if GRAPE_FBL_ENABLE {R_DEV_CKS_SFMA , R_DEV_CKS_SRC_PLL1, 3, 0u}, #endif //{R_DEV_CKS_RSCAN, R_DEV_CKS_SRC_PLL1, 4, 0u},  //{R_DEV_CKS_OSTM , R_DEV_CKS_SRC_MOSC, 2, 0u}, //{R_DEV_CKS_CLKJIT , R_DEV_CKS_SRC_DIV, 6, 0u}, //{R_DEV_CKS_PLLFIX , R_DEV_CKS_SRC_PLL1, 4, 0u}, //{R_DEV_CKS_CLKFIX , R_DEV_CKS_SRC_DIV, 6, 0u}, //{R_DEV_CKS_CPU , R_DEV_CKS_SRC_PLL0, 4, 0u}, //{R_DEV_CKS_PLL2IN , R_DEV_CKS_SRC_MOSC, 1, 0u}, //{R_DEV_CKS_SFMA , R_DEV_CKS_SRC_PLL1, 3, 0u}, // {R_DEV_CKS_RSCAN, R_DEV_CKS_SRC_PLL1, 4, 0u}, #if USE_FOUT_PIN {R_DEV_CKS_FOUT , R_DEV_CKS_SRC_PLL1_4, 1, 1u}, #endif /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr USE_FOUT_PIN */  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr delimiter - do not remove */ {R_DEV_CKS_LAST , R_DEV_CKS_SRC_MOSC, 2, 0u} };  /******************************************************************************* Array loc_ClkSelectionCfgD1L1  contains the clock selectors configuration for D1L1 (deviates from D1L2 setting only by slower SFMA clock) */ #if 0 { {R_DEV_CKS_OSTM , R_DEV_CKS_SRC_MOSC, 2, 0u}, {R_DEV_CKS_CLKJIT , R_DEV_CKS_SRC_DIV, 6, 0u}, {R_DEV_CKS_PLLFIX , R_DEV_CKS_SRC_PLL1, 1, 0u}, {R_DEV_CKS_CLKFIX , R_DEV_CKS_PLLFIX, 6, 0u}, {R_DEV_CKS_CPU , R_DEV_CKS_SRC_PLL0, 4, 0u}, {R_DEV_CKS_PLL2IN , R_DEV_CKS_SRC_MOSC, 1, 0u}, {R_DEV_CKS_SFMA , R_DEV_CKS_SRC_PLL1, 1, 0u}, {R_DEV_CKS_RSCAN, R_DEV_CKS_SRC_PLL1, 4, 0u}, #if USE_FOUT_PIN {R_DEV_CKS_FOUT , R_DEV_CKS_SRC_PLL1_4, 1, 1u}, #endif /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr USE_FOUT_PIN */  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr delimiter - do not remove */ {R_DEV_CKS_LAST , R_DEV_CKS_SRC_MOSC, 2, 0u} }  #endif  static const r_dev_ClkSelConfig_t loc_ClkSelectionCfgD1L1[] = /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Cks SrcId Div StpReqMsk */ { {R_DEV_CKS_OSTM , R_DEV_CKS_SRC_MOSC, 2, 0u}, {R_DEV_CKS_CLKJIT , R_DEV_CKS_SRC_DIV, 6, 0u}, {R_DEV_CKS_PLLFIX , R_DEV_CKS_SRC_PLL1, 4, 0u}, //{R_DEV_CKS_CLKFIX , R_DEV_CKS_SRC_DIV, 6, 0u}, {R_DEV_CKS_CPU , R_DEV_CKS_SRC_PLL0, 4, 0u}, {R_DEV_CKS_PLL2IN , R_DEV_CKS_SRC_MOSC, 1, 0u}, {R_DEV_CKS_SFMA , R_DEV_CKS_SRC_PLL1, 3, 0u},  #if USE_FOUT_PIN {R_DEV_CKS_FOUT , R_DEV_CKS_SRC_PLL1_4, 1, 1u}, #endif /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr USE_FOUT_PIN */  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr delimiter - do not remove */ {R_DEV_CKS_LAST , R_DEV_CKS_SRC_MOSC, 2, 0u} };   #ifdef BSP_PROVIDE_INFO /******************************************************************************* Local Constants (strings) for clock config informatioin */  static const char *locSrcNames[R_DEV_BUS_ALL] = { "PLL0", "PLL1", "PLL2", "PLL0PIX", "SDRX", "ETNBP", "MLBP", "RSCANP", "XCC", "ETNBXCC", "MLBXCC", "CPU", "ISOPCLK", "FIX", "JIT", "PLLFIX", "LRNG", "HRING", "ERING", "MOSC", "SOSC", };  static const char *locSelNames[R_DEV_CKS_ALL] = { "WDT0" , "AWOT", "RTC", "FOUT", "CPU", "MLB", "SFMA", "RSCAN", "RSCANXIN", "SSIF", "TAUB0", "TAUB2", "TAUJ", "OSTM", "LCBI", "ADCE", "ISM", "RLIN", "CLKJIT", "CLKFIX", "PLLFIX", "PLL2IN", "DOTCK0", "DOTCK1", "VDCE0CK", "VDCE1CK", "RSDSCK", "VI0CLK", "MIPIPLL", "MIPIPXL", "LAST", "FIX_JIT", "FIX_LOW",  };  static const char *locSrcSelNames[R_DEV_CKS_SRC_ALL] = { "DISABLED", "LRNG", "HRING", "ERING", "MOSC", "SOSC", "PLL0", "PLL0_2", "PLL0_4", "PLL1", "PLL1_4", "PLL2", "PLL2_4", "ISOCPU_4", "CLKFIX", "CLKFIX_8", "CLKJIT", "CLKJIT_2", "CLKJIT_4", "CLKJIT_8", "PLLFIX", "PLLFIX_10", "PLL0PIX", "PLL0PIX_3", "PLLFIX_3", "DOTCK0", "DOTCK0_4", "DOTCK1", "DOTCK1_4", "VI0CLK", "VI0PIX", "VI1PIX", "MIPIPXL", "MIPIPLL", "LAST", "DIV" };  /******************************************************************************* Function: loc_PrintClkCfg  This prints the current clock configuration in uer readable formant Just for information and debugging purposes (and thus exported in the API only in case BSP_SHOW_INFO is set) */  void R_BSP_PrintClkCfg(void) { uint32_t i, frq; r_dev_ClkSelConfig_t clk_cfg;  R_BSP_STDIO_Printf("Board: %s%s, Version: %s\n", R_DEV_GetDevName(), R_BSP_GetBoardName(), R_BSP_GetBoardVersion());  R_BSP_STDIO_Printf("******* Configured Clock sources *************\n"); for (i = (uint32_t)R_DEV_CLK_PLL0; i < (uint32_t)R_DEV_BUS_ALL; i++) { frq = R_DEV_BusFrequencyHz((r_dev_Bus_t)i); if (frq > 1000000) { R_BSP_STDIO_Printf("%-10s : %3d MHz\n", locSrcNames[i], frq/1000000u); } else if (frq > 0) { R_BSP_STDIO_Printf("%-10s : %3d KHz\n", locSrcNames[i], frq/1000u); } else { R_BSP_STDIO_Printf("%-10s : OFF\n", locSrcNames[i]);  } } R_BSP_STDIO_Printf("\n");  R_BSP_STDIO_Printf("******* Configured Clocks *************\n"); for (i = (uint32_t)R_DEV_CKS_WDT0; i < (uint32_t)R_DEV_CKS_ALL; i++) { if ((uint32_t)R_DEV_CKS_LAST != i) {  clk_cfg.Cks = (r_dev_ClkSel_t)i; clk_cfg.SrcId = R_DEV_CKS_SRC_DISABLED; clk_cfg.Div = 0; clk_cfg.StpReqMsk = 0;  frq = R_DEV_GetClkConfig(&clk_cfg);  if (frq > 1000000) { R_BSP_STDIO_Printf("%-10s : %3d MHz, ", locSelNames[i], frq/1000000u); } else if (frq > 0) { R_BSP_STDIO_Printf("%-10s : %3d KHz, ", locSelNames[i], frq/1000u); } else { R_BSP_STDIO_Printf("%-10s : OFF, ", locSelNames[i]); } R_BSP_STDIO_Printf("SrcClk: %-9s, Divider:%4d, StpMsk:%3d\n", locSrcSelNames[clk_cfg.SrcId], clk_cfg.Div, clk_cfg.StpReqMsk); } } R_BSP_STDIO_Printf("\n"); } #endif /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr BSP_PROVIDE_INFO */   /******************************************************************************* Section: Local Functions */   /******************************************************************************* Function: loc_InitClocks  This function just contains the starting (global) clock config for the BSP. Its purpose is to write the given setting in the structure passed as parameter.  As the clock config is done in low init, the globally stored data is cleared afterwards. So, this function has to be called during and after the low init in order to have the right settings afterwards. And becasue we want to keep data consistant and do not have two configs, this funbction is used.  Parameters: ClkGenCfg - pointer to the Clock generator configuration, see <r_dev_ClkGenConfig_t>  Returns: none  */ static void loc_InitClocks(r_dev_ClkGenConfig_t gfx hmi r_bsp.c stdio Config); static void loc_InitClocks(r_dev_ClkGenConfig_t gfx hmi r_bsp.c stdio Config) { /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Init Device Clocks */ Config->MainOsc.FrequencyHz = R_DEV_MOSC_FRQ_HZ; Config->MainOsc.StabiTimeNs = 400000; Config->MainOsc.Gain = 3; Config->MainOsc.Running = 1; Config->MainOsc.StpReqMsk = 1;  Config->SubOsc.FrequencyHz = 32768; Config->SubOsc.Running = 1; Config->RoscStpReqMsk = 0;  Config->Pll[0].Mode = R_DEV_PLL_SSCG; Config->Pll[0].DithMode = R_DEV_PLL_DITH_CENTER; Config->Pll[0].DithRange = 3; Config->Pll[0].ModFreq = 50; Config->Pll[0].FrequencyHz = 480 gfx hmi r_bsp.c stdio 1000 gfx hmi r_bsp.c stdio 1000;// //liuyy 480->80 Config->Pll[0].StabiTimeNs = 40000; Config->Pll[0].StpReqMsk = 0;  Config->Pll[1].Mode = R_DEV_PLL_ON; Config->Pll[1].DithMode = R_DEV_PLL_DITH_FIXED; Config->Pll[1].DithRange = 0; Config->Pll[1].ModFreq = 0; Config->Pll[1].FrequencyHz = 240 gfx hmi r_bsp.c stdio 1000 gfx hmi r_bsp.c stdio 1000; Config->Pll[1].StabiTimeNs = 40000; Config->Pll[1].StpReqMsk = 0;  Config->Pll[2].Mode = R_DEV_PLL_OFF; Config->Pll[2].DithMode = R_DEV_PLL_DITH_FIXED; Config->Pll[2].DithRange = 0; Config->Pll[2].ModFreq = 0; Config->Pll[2].FrequencyHz = 480 gfx hmi r_bsp.c stdio 1000 gfx hmi r_bsp.c stdio 1000; Config->Pll[2].StabiTimeNs = 40000; Config->Pll[2].StpReqMsk = 0;  Config->BusEnable[R_DEV_CLK_XCC] = 1; Config->BusEnable[R_DEV_CLK_PLL0] = 1; Config->BusEnable[R_DEV_CLK_PLL1] = 1; Config->BusEnable[R_DEV_CLK_PLL2] = 0; Config->BusEnable[R_DEV_CLK_PLL0PIX] = 1; Config->BusEnable[R_DEV_CLK_SDRB] = 1; Config->BusEnable[R_DEV_CLK_ETNBP] = 1; Config->BusEnable[R_DEV_CLK_ETNBXCC] = 1; Config->BusEnable[R_DEV_CLK_MLBP] = 0; Config->BusEnable[R_DEV_CLK_MLBXCC] = 0; Config->BusEnable[R_DEV_CLK_RSCANP] = 0; } /******************************************************************************* Section: Global Device/Board dependent Functions  For comments see: <r_bsp_api.h> */  /******************************************************************************* Function: R_BSP_LowInit  see <r_bsp_api.h> for details */ void R_BSP_LowInit(void) { uint32_t val; r_dev_ClkGenConfig_t clk_gen_cfg; r_dev_Device_t device;  __DI();  #if GRAPE_FBL_ENABLE SET_EBASE(0x00011000); //set Ebase to 0x10000, set RINT to 1 SET_PSW_EBV(); #endif  STBC_WakeupType(); DIO_Init();  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Release all Modules by module reset control register */ val = (0ul | MRSTC_XC0RES | MRSTC_MLBB0RES | MRSTC_LCBI0RES | MRSTC_SG4RES | MRSTC_SG3RES | MRSTC_SG2RES | MRSTC_SG1RES | MRSTC_SG0RES | MRSTC_ADCE0RES | MRSTC_ISM0RES | MRSTC_ETNB0RES | MRSTC_VDCE1RES | MRSTC_VDCE0RES); R_DEV_WRITE_PROT_REG(LOC_PROTCMDMRST, LOC_MRSTC, val); while ( 0 != R_DEV_READ_REG(32, LOC_PROTSMRST)) /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Read PROTSMRST */ { }  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Prepare device (clear all internal config, prepare interrupts) */ R_DEV_Prepare();  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Just the DDR" memory */ #ifdef USE_BSP_GFX R_BSP_GFX_LowInit(); #endif /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr USE_BSP_GFX */  }  /******************************************************************************* Function: R_BSP_Init  see <r_bsp_api.h> for details */ #if 1//TEST_CODE_COMBINE void switchIOPort(unsigned char type){ if(type){ R_DEV_PinInit (loc_PinConfigIsm2); }else{ R_DEV_PinInit (loc_PinConfigIsm); } }   void R_BSP_ZS12_init(void) { r_Error_t ret_val = R_ERR_OK; r_dev_ClkGenConfig_t clk_gen_cfg; r_dev_Device_t device; uint32_t step; uint8_t rsttype; uint8_t Littltezpd = 0;  R_BSP_LowInit();  if (FALSE == RST_GetRstSource(&rsttype)) { rsttype =TYPE_RST_EXTERNAL; }  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Get the config */ loc_InitClocks(&clk_gen_cfg);  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr use the config, call Clock Gen Init */ device = R_DEV_GetDev(); if (device < R_DEV_R7F701402) { R_DEV_ClkGenInit(&clk_gen_cfg, loc_ClkSelectionCfgD1L1); } else { R_DEV_ClkGenInit(&clk_gen_cfg, loc_ClkSelectionCfgD1L2); }  R_DEV_ClkGenInitStore(&clk_gen_cfg); CLOCK_Init(); __EI();  if (R_TICK_Init(0) != R_TICK_ERR_OK) { while(1) { } }  /*driver*/ STBC_Init();  DSPI_Init(); DIO_Init();  R_BSP_GFX_Init(); R_BSP_STDIO_Init(); R_BSP_GFX_CSI_NecDisplay_Init();  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr init the hdmi converters */ R_DEV_PinInit(loc_D1L2_NetWorkPinConfig); R_DEV_PinInit(loc_D1L2_BpmPinConfig); // R_DEV_PinInit (loc_PinConfigIsm); R_DEV_PinInit (loc_PinConfigIsm2);  SYS_Init();  OSTM_Start();  //liuyingying @20171220 //NZM_GetDataValue(INDEX_NZM_LITTLEZPD,&Littltezpd,1); //printf("test = %d,%d\r\n",STBC_GetWakeUpType(),Littltezpd); #if 0 if( INDEX_STBC_INTP5 != STBC_GetWakeUpType()/*0 == Littltezpd*/) { MOM_StartZPD_BeforeDeepStandBy();  NZM_SetLittleZpd(TRUE); } else { //Littltezpd = FALSE; /*guanbiaojin add here for litte zpd*/ MOM_StartLittleZPD(); } #endif if (TYPE_RST_ISORES != rsttype) { MOM_StartZPD_BeforeDeepStandBy(); RTCA_Init(); STBC_EnterDeepStop();  } else { if( INDEX_STBC_INTP6 != STBC_GetWakeUpType()/*0 == Littltezpd*/) { MOM_StartLittleZPD(); //MOM_StartZPD_BeforeDeepStandBy();  NZM_SetLittleZpd(TRUE);  } else { //Littltezpd = FALSE; /*guanbiaojin add here for litte zpd*/ MOM_StartLittleZPD();  } } //NZM_Init(); TRIP_Init(); }  #endif   r_Error_t R_BSP_Init(void) { r_Error_t ret_val = R_ERR_OK; r_dev_ClkGenConfig_t clk_gen_cfg;  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr For debug print the LowInit is moved from startup to here */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Added define to skip Low Init on request of application*/ #if defined (R_DBG_PRINT_DEV_REGS) || defined (APP_SKIP_LOW_INIT) R_BSP_LowInit(); #endif  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Get the config */ loc_InitClocks(&clk_gen_cfg);  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr use the config, store settings */ R_DEV_ClkGenInitStore(&clk_gen_cfg);  #if USE_FOUT_PIN /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Set pin config for FOUT pin */ R_DEV_PinInit(loc_PinFoutConfig); #endif /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr USE_FOUT_PIN */  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Enable interrupts globally */ __EI();  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr init tick driver */ if (R_TICK_Init(0) != R_TICK_ERR_OK) { return R_NG; }  DSPI_Init(); DIO_Init();  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Init Graphics functions XBus-Bridge, Gfx-SS Controller */ #ifdef USE_BSP_GFX R_BSP_GFX_Init(); #endif /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr USE_BSP_GFX */  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr init on board functions if required */ #ifdef USE_BSP_HMI //R_BSP_HMI_Init();//@KS #endif  #ifdef USE_BSP_STDIO R_BSP_STDIO_Init(); #endif  #ifdef USE_BSP_GFX /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr init the NEC display via CSI (required for NL2432HC22-41K) */ R_BSP_GFX_CSI_NecDisplay_Init();  #ifdef USE_RIIC /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr IIS Audio Digital Analog converter init */ // R_BSP_GFX_IIS_AudioDac_Init(); #endif /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr USE_RIIC */  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr init the HDMI output converters */ //R_BSP_GFX_HDMI_Init(); #endif /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr USE_BSP_GFX */  #ifdef USE_BSP_HMI //@KS // R_BSP_HMI_SetLed(15, R_FALSE); // R_BSP_HMI_SetLed(14, R_TRUE); // R_BSP_HMI_SetLed(13, R_FALSE); // R_BSP_HMI_SetLed(12, R_TRUE); #endif  #ifdef BSP_SHOW_INFO R_BSP_PrintClkCfg(); #endif     R_DEV_PinInit(loc_D1L2_BpmPinConfig); R_DEV_PinInit(loc_D1L2_NetWorkPinConfig);  R_GPIO_WritePin(TAUBO6_GPIO_BPM_PWR_PORT, TAUBO6_GPIO_BPM_PWR_PIN, 6); BPM_Init();    COM_Init();  return (ret_val); }  /******************************************************************************* Function: R_BSP_DeInit  see <r_bsp_api.h> for details */ r_Error_t R_BSP_DeInit(void) { return R_ERR_OK; }  /******************************************************************************* Function: R_BSP_Capabilities  see <r_bsp_api.h> for details */ uint32_t R_BSP_Capabilities(void) { /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr get the device type and configure the pins */ r_dev_Device_t device = R_DEV_GetDev(); uint32_t retval = 0; if (device > R_DEV_R7F7014OFFS) { retval = R_BSP_HAS_SERIAL_FLASH; } if (device > R_DEV_R7F701401) { retval |= R_BSP_HAS_VOUT0; retval |= R_BSP_HAS_DDR_SF; } if (device > R_DEV_R7F701402) { retval |= R_BSP_HAS_8BIT_SF; } return (retval); }  /******************************************************************************* Function: R_BSP_GetBoardName  see <r_bsp_api.h> for details */ const int8_t gfx hmi r_bsp.c stdio R_BSP_GetBoardName(void) { return (const int8_t *)LOC_BSP_BOARD_NAME; }  /******************************************************************************* Function: R_BSP_GetBoardVersion  see <r_bsp_api.h> for details */ const int8_t gfx hmi r_bsp.c stdio R_BSP_GetBoardVersion(void) { return (const int8_t *)LOC_BSP_BOARD_VERSION;  }
