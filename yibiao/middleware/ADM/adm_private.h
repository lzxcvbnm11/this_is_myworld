/***************************************************************************** adm.c adm_cfg.h adm_info.inc adm_private.h adm_public.h Copyright (C) 2016 ShenZhen Yeedon Media co.,LTD. All rights reserved. * adm.c adm_cfg.h adm_info.inc adm_private.h adm_public.h File Name : adm_private.h adm.c adm_cfg.h adm_info.inc adm_private.h adm_public.h Description : private informations of the ADM module adm.c adm_cfg.h adm_info.inc adm_private.h adm_public.h Author: Xueping.Chen adm.c adm_cfg.h adm_info.inc adm_private.h adm_public.h Date: 2016-11-25 ******************************************************************************/  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr check of multiple include */ #ifndef _ADM_PRIVATE_H_ #define _ADM_PRIVATE_H_  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Private Macros defines */ #define ADM_CHANNEL_MAX 16 /*the max channel of ADC*/ #define DEBOUNCE_COUNT 3 /*debounce counters of the ADC*/ #define DEBOUNCE_PERIOD 5 /*debounce time of the ADC*/ #define DEBOUNCE_RANGE1 82 /*the error range1 of the ADC*/ #define DEBOUNCE_RANGE2 102 /*the error range2 of the ADC*/ #define DEBOUNCE_FUEL_COUNT 5 /*the debounce time of the FUEL ADC*/ #define DEBOUNCE_RANGE_MAX 4095 /*the max error rang of the ADC */  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Private data structures defines */ typedef struct AdmGatherData_Tag { U8 res; /*去抖动结果*/ U8 cnt; /*采样计数器*/ U16 value; /*当前采样的值*/ U32 sum; /*连续采样有效值的加和，存放6次*/ U16 debounceValue; /*去抖动之后的采样值*/ }AdmGatherData_ST;  typedef struct AdmMatrix_Tag { BOOL enable; /*是否使能*/ AdceChannel_ENUM ch; /*对应ADCE的通道*/ U16 range; /*门限值*/ U8 debCnt; /*去抖次数*/ }AdmMatrix_ST;  /*constant define*/ const AdmMatrix_ST Adm_Matrix[ADM_CHANNEL_MAX]= { {TRUE, INDEX_ADCE_CH0, DEBOUNCE_RANGE2, DEBOUNCE_COUNT}, /*INDEX_ADM_SRS*/ {TRUE, INDEX_ADCE_CH1, DEBOUNCE_RANGE_MAX, DEBOUNCE_FUEL_COUNT}, /*INDEX_ADM_FUEL*/ {TRUE, INDEX_ADCE_CH2, DEBOUNCE_RANGE1, DEBOUNCE_COUNT}, /*INDEX_ADM_TRIPCOMPUTER*/ {TRUE, INDEX_ADCE_CH3, DEBOUNCE_RANGE1, DEBOUNCE_COUNT}, /*INDEX_ADM_LOCALTAPUPDOWN*/ {FALSE, INDEX_ADCE_CH4, DEBOUNCE_RANGE1, DEBOUNCE_COUNT}, /*INDEX_ADM_RESERVED2*/ {TRUE, INDEX_ADCE_CH5, DEBOUNCE_RANGE1, DEBOUNCE_COUNT}, /*INDEX_ADM_5VK*/ {TRUE, INDEX_ADCE_CH6, DEBOUNCE_RANGE2, DEBOUNCE_COUNT}, /*INDEX_ADM_BATT*/ {FALSE, INDEX_ADCE_CH7, DEBOUNCE_RANGE1, DEBOUNCE_COUNT}, /*INDEX_ADM_RESERVED3*/ {TRUE, INDEX_ADCE_CH8, DEBOUNCE_RANGE1, DEBOUNCE_COUNT}, /*INDEX_ADM_SSB*/ {TRUE, INDEX_ADCE_CH9, DEBOUNCE_RANGE1, DEBOUNCE_COUNT}, /*INDEX_ADM_ACCHSD*/ {TRUE, INDEX_ADCE_CH10, DEBOUNCE_RANGE1, DEBOUNCE_COUNT}, /*INDEX_ADM_IGNHSD*/ {TRUE, INDEX_ADCE_CH11, DEBOUNCE_RANGE1, DEBOUNCE_COUNT}, /*INDEX_ADM_CRUISE1*/ {TRUE, INDEX_ADCE_CH12, DEBOUNCE_RANGE1, DEBOUNCE_COUNT}, /*INDEX_ADM_CRUISE2*/ {FALSE, INDEX_ADCE_CH13, DEBOUNCE_RANGE1, DEBOUNCE_COUNT}, /*INDEX_ADM_RESERVED4*/ {FALSE, INDEX_ADCE_CH14, DEBOUNCE_RANGE1, DEBOUNCE_COUNT}, /*INDEX_ADM_RESERVED5*/ {FALSE, INDEX_ADCE_CH15, DEBOUNCE_RANGE1, DEBOUNCE_COUNT}, /*INDEX_ADM_RESERVED6*/ };  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Private static functions declare */ static U8 adm_ChannelDebounce(AdmChannel_ENUM index);   #endif /*_ADM_PRIVATE_H_*/  /*------------------end of file----------------------------*/  /*=========================================================================== adm.c adm_cfg.h adm_info.inc adm_private.h adm_public.h File Revision History(bottom to top:first revision to last revision) *============================================================================ adm.c adm_cfg.h adm_info.inc adm_private.h adm_public.h $Log:$ * adm.c adm_cfg.h adm_info.inc adm_private.h adm_public.h Rev: Userid: Date: Description *-------- ---------- --------- ------------------------------ * adm.c adm_cfg.h adm_info.inc adm_private.h adm_public.h V1.0 Xueping.Chen 2016-11-25 Initial * *===========================================================================*/
