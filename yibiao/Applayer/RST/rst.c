/***************************************************************************** rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h Copyright (C) 2016 ShenZhen Yeedon Media co.,LTD. All rights reserved. * rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h File Name : rst.c rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h Description : RST API application rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h Author: Hejianjun rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h Date: 2016-12-05 ******************************************************************************/  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Files for including */ #include "rst_info.inc"  static BOOL rst_InitSts = FALSE;   /*************************************************** rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h Function: RST_Init rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h Description: RST module initialized rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h Parameters: none rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h Returns: none rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h $Create & Verlog:$ rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h Author:Hejianjun Date:2016-12-05 Version:V1.0 ****************************************************/ void RST_Init(void) { rst_InitSts = FALSE; rst_InitSts = RSTC_GetInitStatus(); /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr RSTC module interface*/ }  /*************************************************** rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h Function: RST_GetRstSource rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h Description: feed back reset source rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h Parameters: output rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h reference RSTType_ENUM rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h Returns: RST_RES_INVALID rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h RST_RES_OK rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h RST_RES_FAIL rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h $Create & Verlog:$ rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h Author:Hejianjun Date:2016-12-05 Version:V1.0 ****************************************************/ U8 RST_GetRstSource(PU8 source) { U32 sourcetemp; U8 res = RET_FAIL;  if (NULL_PTR == source) { res = RET_INVALID; } else { if (RET_OK== RSTC_GetRstFlag(&sourcetemp))  { if (sourcetemp & (1u << RST_SWRES_FLAG)) /*0x0001*/ { *source = TYPE_RST_SWRES; /*Software reset*/ } else if (sourcetemp & (1u << RST_WDTA0RES_FLAG)) { *source = TYPE_RST_WDTA0RES; /*Overflow of the Watchdog Timers*/ } else if (sourcetemp & (1u << RST_WDTA1RES_FLAG))  { *source = TYPE_RST_WDTA1RES; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr WDT1 reserved */ } else if (sourcetemp & (1u << RST_CLMA0RES_FLAG)) { *source = TYPE_RST_CLMA0RES; /*Clock Monitor 0 reset*/ } else if (sourcetemp & (1u << RST_EXTERNAL_FLAG)) { *source = TYPE_RST_EXTERNAL; /*External reset signal RESET*/ } else if (sourcetemp & (1u << RST_POC0RES_FLAG)) { *source = TYPE_RST_POC0RES; /*Power-On-Clear 0*/ } else if (sourcetemp & (1u << RST_ISORES_FLAG)) { *source = TYPE_RST_ISORES; /*Isolated-Area (ISORES) reset */ } else if (sourcetemp & (1u << RST_ECMRES_FLAG)) { *source = TYPE_RST_ECMRES; /*Error Control Module rese*/ } else if (sourcetemp & (1u << RST_ISOPWRES_FLAG)) { *source = TYPE_RST_ISOPWRES; /*Isolated-Area power reset */ }  else { *source = TYPE_RST_NULL; } res = RET_OK; } else { res = RET_FAIL; } } return res; }    /*=========================================================================== rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h File Revision History(bottom to top:first revision to last revision) *============================================================================ rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h $Log:$ * rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h Rev: Userid: Date: Description *-------- ---------- --------- ------------------------------ * rst.c rst_cfg.h rst_info.inc rst_private.h rst_public.h V1.0 Hejianjun 2016-12-05 Initial * *===========================================================================*/
