/***************************************************************************** | Copyright |----------------------------------------------------------------------------- | Copyright (c) by SAIC Motor Co. LTD. All rights reserved. | | This software is furnished under a license and may be used and copied  | only in accordance with the terms of such license and with the inclusion | of the above copyright notice. This software or any other copies thereof  | may not be provided or otherwise made available to any other person. | No title to and ownership of the software is hereby transferred. | | The information in this software is subject to change without notice  | and should not be construed as a commitment by  | SAIC Motor Co. LTD. | | SAIC Motor Co. LTD. assumes no responsibility for the use or reliability | of its Software on equipment which is not supported by SAIC Motor Co. LTD. |----------------------------------------------------------------------------- ******************************************************************************/ /******************************************************************************/ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Version 15.06.08.0.0.4 */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Name Date changeLog */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 李秋实 2014/11/15 增加根据RAM序列号设置及检查DTC的功能 */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 李秋实 2014/11/26 增加配置检查功能 */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 李秋实 2014/12/08 修改读快照及扩展数据函数，以返回值判断是否成功 */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 李秋实 2015/06/08 增加函数 */ /******************************************************************************/ #ifndef _S_FM_API_H #define _S_FM_API_H  #include "s_fm_typedef.h" /*外部接口*/ /******************************************************************************/ /*函数名 ：f_fm_cfgInit */ /*功 能 ：写0100~010X后需调用此函数，以初始化故障码的配置 */ /*输入值 ：无 */ /*返回值 ：无 */ /******************************************************************************/ extern void f_fm_cfgInit(void);  /******************************************************************************/ /*函数名 ：f_fm_init */ /*功 能 ：FM模块初始化，注意此初始化必须在EEPROM初始化之后 */ /*输入值 ：无 */ /*返回值 ：无 */ /******************************************************************************/ extern void f_fm_init(void); /******************************************************************************/ /*函数名 ：f_fm_task */ /*功 能 ：FM模块主任务，需周期调用 */ /*输入值 ：无 */ /*返回值 ：无 */ /******************************************************************************/ extern void f_fm_task(void); /******************************************************************************/ /*函数名 ：f_fm_configCheck */ /*功 能 ：故障管理模块配置检查 */ /*输入值 ：无 */ /*返回值 ：0 检查通过 */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 1 故障码总数或存储数或快照存储数配置错误 */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 2 调度周期过大或过小 */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 3 支持的掩码配置错误 */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 4 故障灯配置错误 */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 5 操作循环配置错误 */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 6 确认故障的操作循环数配置错误 */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 7 故障码开关的配置DID或位置错误 */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 8 故障码严重等级不可为0 */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 9 全局快照配置错误 */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr A 局部快照配置错误 */ /******************************************************************************/ extern s_uint8 f_fm_configCheck(void); /******************************************************************************/ /*函数名 ：f_fm_setDTC */ /*功 能 ：供应用程序设置故障码状态 */ /*输入值 ：s_uint32 dtc_code,s_uint8 state */ /*返回值 ：无 */ /******************************************************************************/ extern void f_fm_setDTC(s_uint32 dtc_code,s_uint8 state); /******************************************************************************/ /*函数名 ：f_fm_checkDTC */ /*功 能 ：此函数可返回某一故障码的当前状态 */ /*输入值 ：s_uint32 dtc_code */ /*返回值 ：s_uint8 */ /******************************************************************************/ extern s_uint8 f_fm_checkDTC(s_uint32 dtc_code); /******************************************************************************/ /*函数名 ：f_fm_controlDTCDealing */ /*功 能 ：此函数可打开或关闭FM功能，可供85服务使用 */ /*输入值 ：s_uint8 State */ /*返回值 ：无 */ /******************************************************************************/ extern void f_fm_controlDTCDealing(s_uint8 State); /******************************************************************************/ /*函数名 ：f_fm_clearDTC */ /*功 能 ：清除故障码记录，可供14服务使用 */ /*输入值 ：无 */ /*返回值 ：无 */ /******************************************************************************/ extern void f_fm_clearDTC(void); /******************************************************************************/ /*函数名 ：f_fm_readDTCNum */ /*功 能 ：读故障码数，供19 01使用 */ /*输入值 ：s_uint8 mask, s_uint8* data, s_uint16 *len */ /*返回值 ：无 */ /******************************************************************************/ extern void f_fm_readDTCNum(s_uint8 mask, s_uint8* data, s_uint16 *len); /******************************************************************************/ /*函数名 ：f_fm_readDTCLogged */ /*功 能 ：读故障码，供19 02使用 */ /*输入值 ：s_uint8 mask, s_uint8* data, s_uint16 *len */ /*返回值 ：无 */ /******************************************************************************/ extern void f_fm_readDTCLogged(s_uint8 mask, s_uint8* data, s_uint16 *len); /******************************************************************************/ /*函数名 ：f_fm_readAllDTC */ /*功 能 ：读所有故障码，供19 0A使用 */ /*输入值 ：s_uint8* data, s_uint16 *len */ /*返回值 ：无 */ /******************************************************************************/ extern void f_fm_readAllDTC(s_uint8* data, s_uint16 *len); /******************************************************************************/ /*函数名 ：f_fm_readDTCSnapshot */ /*功 能 ：读故障码快照，供19 04使用 */ /*输入值 ：s_uint32 dtc_code, s_uint8 RecordNum, s_uint8* data, s_uint16 *len */ /*返回值 ：s_uint8 0：成功；1：无此故障码；2：快照类型无效 */ /******************************************************************************/ extern s_uint8 f_fm_readDTCSnapshot(s_uint32 dtc_code, s_uint8 RecordNum, s_uint8* data, s_uint16 *len); /******************************************************************************/ /*函数名 ：f_fm_readDTCExtendData */ /*功 能 ：读扩展数据，供19 06使用 */ /*输入值 ：s_uint32 dtc_code, s_uint8* data, s_uint16 *len */ /*返回值 ：s_uint8 0：成功；1：无此故障码 */ /******************************************************************************/ extern s_uint8 f_fm_readDTCExtendData(s_uint32 dtc_code, s_uint8* data, s_uint16 *len); /******************************************************************************/ /*函数名 ：f_fm_getCouldPowerDownState */ /*功 能 ：判断FM模块是否执行完成，系统可否进入powerdown */ /*输入值 ：无 */ /*返回值 ：s_uint8 */ /******************************************************************************/ extern s_uint8 f_fm_getCouldPowerDownState(void); /******************************************************************************/ /*函数名 ：void f_fm_setDTCByNo(s_uint8 location,s_bool state) */ /*功 能 ： */ /*输入值 ：无 */ /*返回值 ：无 */ /******************************************************************************/ extern void f_fm_setDTCByNo(s_uint8 location,s_bool state); /******************************************************************************/ /*函数名 ：s_bool f_fm_checkDTCByNo(s_uint8 location) */ /*功 能 ： */ /*输入值 ：无 */ /*返回值 ：无 */ /******************************************************************************/ extern s_bool f_fm_checkDTCByNo(s_uint8 location); /******************************************************************************/ /*函数名 ：f_fm_configDTC */ /*功 能 ： */ /*输入值 ： */ /*返回值 ： */ /******************************************************************************/ extern void f_fm_configDTC(s_uint32 dtc_code,s_bool state);  #endif
