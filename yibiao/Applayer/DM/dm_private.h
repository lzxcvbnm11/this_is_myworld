/***************************************************************************** dm.c dm_cfg.h dm_info.inc dm_private.h dm_public.h Copyright (C) 2016 ShenZhen Yeedon Media co.,LTD. All rights reserved. * dm.c dm_cfg.h dm_info.inc dm_private.h dm_public.h File Name : dm_private.h dm.c dm_cfg.h dm_info.inc dm_private.h dm_public.h Description :the private datas of the dm module. dm.c dm_cfg.h dm_info.inc dm_private.h dm_public.h Author: Xueping.Chen dm.c dm_cfg.h dm_info.inc dm_private.h dm_public.h Date: 2016-12-05 ******************************************************************************/  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr check of multiple include */ #ifndef _DM_PRIVATE_H_  #define _DM_PRIVATE_H_  #include "yd_typedefs.h" #include "pwmm_public.h"  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Pravate Macros defines */ #define DM_PROCESS_PRO 50 #define DM_LOGODURING_PRO 5000 #define DM_LOGODURING_CNT (DM_LOGODURING_PRO/DM_PROCESS_PRO) #define DM_LOGO1_CNT 24 #define DM_LOGO2_CNT 39 #define DM_LOGO2_STARTCNT (DM_LOGODURING_CNT-DM_LOGO2_CNT) #define DM_LOGO_NUM 63 #define SPEED_THRESHHOLD_MAX 220 #define DM_TEST_CHANGE_CNT (5000/DM_PROCESS_PRO) #define DM_TEST_MAX_TABLE 51 #define SETMAIN_TABLE_MAXCNT 8 #define DM_FLTLIST_ITEM_MAX 4 #define LOGO_TABLE_CNT (5000/DM_PROCESS_PRO)    typedef struct Dm_SetPageData_tag { BOOL ScsEn; BOOL SpdLmtEn; BOOL illuEn; U8 Item[3]; U8 maxCnt; }Dm_SetPageData_ST;  const static U8 logoTab[LOGO_TABLE_CNT+1]= { #if 1 0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9, 10,10,11,11,12,12,13,13,14,14,15,15,16,16,17,17,18,18,19,19, 20,20,21,21,22,22,23,23,24,24, 25,25,26,27,28,29,29,30,31,32,33,33,34,35,36,37,37,38,39,40, 41,41,42,43,44,45,45,46,47,48,49,49,50,51,52,53,53,54,55,56, 57,57,58,59,60,61,61,62,63,63 #else 0,0,1,2,2,3,4,4,5,6,6,7,8,8,9, 10,10,11,12,12,13,14,14,15,16,16,17,18,18,19, 20,20,21,22,22,23,24,24,25,26,26,27,28,28,29, 30,30,31,32,32,33,34,34,35,36,36,37,38,38,39,  40,40,41,42,42,43,44,44,45,46,46,47,48,48,49,  50,50,51,52,52,53,54,54,55,56,56,57,58,58,59,  60,60,61,62,62,63,63,63,63,63,63 #endif };   const static Dm_SetPageData_ST dm_SetTab[SETMAIN_TABLE_MAXCNT]= { {FALSE,FALSE,FALSE,ITEM_SETMAIN_NULL,ITEM_SETMAIN_NULL,ITEM_SETMAIN_NULL,0}, {FALSE,FALSE,TRUE,ITEM_SETMAIN_ILLU,ITEM_SETMAIN_NULL,ITEM_SETMAIN_NULL,1}, {FALSE,TRUE,FALSE,ITEM_SETMAIN_LIMIT,ITEM_SETMAIN_NULL,ITEM_SETMAIN_NULL,1},  {FALSE,TRUE,TRUE,ITEM_SETMAIN_ILLU,ITEM_SETMAIN_LIMIT,ITEM_SETMAIN_NULL,2}, {TRUE,FALSE,FALSE,ITEM_SETMAIN_SCSOFF,ITEM_SETMAIN_NULL,ITEM_SETMAIN_NULL,1}, {TRUE,FALSE,TRUE,ITEM_SETMAIN_ILLU,ITEM_SETMAIN_SCSOFF,ITEM_SETMAIN_NULL,2}, {TRUE,TRUE,FALSE,ITEM_SETMAIN_LIMIT,ITEM_SETMAIN_SCSOFF,ITEM_SETMAIN_NULL,2}, {TRUE,TRUE,TRUE,ITEM_SETMAIN_ILLU,ITEM_SETMAIN_LIMIT,ITEM_SETMAIN_SCSOFF,3} }; const static Dm_CMD_ST dm_test_table[DM_TEST_MAX_TABLE]= {  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_CRUS_FAULT}, /*0*/ {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_COOLANT_CRITICAL},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_EMISSION},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_ENGINE},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_CHARGE},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_ALTERNAT},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_OILPRESURE},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_ASS_FAULT},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_EPS_LOWFEATURE},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_EPS_FAULT},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_SASFAULT},/*10*/  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_SASUNCAL},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_ESCL_DEFECT},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_ESCL_LOCKLAMPFLASH},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_ESCL_BLOCK},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_TPMS_FAULT},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_TPMS_PRESURELOW},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_TPMS_LEAKAGE},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_TPMS_PRESUREHIGH},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_TPMS_TEMPHIGH},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_TPMS_BALANCEFAIL}, /*20*/ {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_TPMS_BATLOW},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_ABS_ALERT},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_ABS_NODEMISSING},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_SCS_DSCFAULT_FAULT},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_SCS_TCFAULT_FAULT},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_BRAKE_EBD},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_BRAKE_FLUDLOW},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_SRS},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_SRSLGT},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_KEY_LOWBAT},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_FUELSENSOR_FLT},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_AHD_FAULT},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_HDC_ON},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_DOORANDLID_LDSP_U5},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_PDC_FAULT},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_CLTHFLT_ON},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_BCMRUNCRKF_ON},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_BCMSSBFLTSTS_ON},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_LDIPDBEAMLGHTF_ON},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_RDIPDBEAMLGHTF_ON},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_LDIRCNINDLGHTF_ON},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_RDIRCNINDLGHTF_ON},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_LBRKLGHTF_ON},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_RBRKLGHTF_ON},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_LSIDELGHTF_ON},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_RSIDELGHTF_ON},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_DAYTIMERUNNINGLGHTF_ON},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_RRFOGLGHTF_ON},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_BATAGNGSTA_ON},  {INDEX_FUNCTION,MAINFUCTION_FAULT,INDEX_MSG_PEPSANTFLT_ON}  };  #define DM_FAULT_ITEMNUM 4 /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Private data structures defines */ typedef enum AllPage_Index_Tag { INDEX_TC_SPEED, INDEX_TC_INSFUELCOMPN, INDEX_TC_RANG, INDEX_TC_BAT, INDEX_TC_AUTOSTART, INDEX_TC_AUTORST, INDEX_TC_TIREPRESS, INDEX_SET_SETTING, INDEX_SET_ILLU, INDEX_SET_SPEEDLIMIT, INDEX_SET_SCS, INDEX_ENT_MEDIA_MUSIC, //INDEX_ENT_MEDIA_FM, //INDEX_ENT_MEDIA_AM, INDEX_FAULT_FAULTLIST, INDEX_PAGE_ALL, }AllPage_Index_ENUM;  typedef struct Dm_FuctionPage_Tag { U8 MainPage; U8 SubPage; U8 DestPage_Point; }Dm_FuctionPage_ST;  typedef struct Page_Index_Tag { Dm_FuctionPage_ST CMD_LEFT; Dm_FuctionPage_ST CMD_RIGHT; Dm_FuctionPage_ST CMD_UP; Dm_FuctionPage_ST CMD_DOWN; Dm_FuctionPage_ST CMD_OK; }Page_Index_ST;  const Page_Index_ST DestPage_Matrix[INDEX_PAGE_ALL] = { /*LEFT_DestPage RIGHT_DestPage UP_DestPage DOWN_DestPage OK_DestPage*/ { {MAINFUCTION_FAULT, SUBFUCTION_FAULT_LIST, INDEX_FAULT_FAULTLIST},  {MAINFUCTION_SET, SUBFUCTION_SETTING, INDEX_SET_SETTING},  {MAINFUCTION_TC, SUBFUCTION_TC_TIREPRESS, INDEX_TC_TIREPRESS}, {MAINFUCTION_TC, SUBFUCTION_TC_INSFUELCOMP, INDEX_TC_INSFUELCOMPN},  {MAINFUCTION_TC, SUBFUCTION_TC_SPEED, INDEX_TC_SPEED} }, /*TC SPEED*/ { {MAINFUCTION_FAULT, SUBFUCTION_FAULT_LIST, INDEX_FAULT_FAULTLIST},  {MAINFUCTION_SET, SUBFUCTION_SETTING, INDEX_SET_SETTING},  {MAINFUCTION_TC, SUBFUCTION_TC_SPEED, INDEX_TC_SPEED},  {MAINFUCTION_TC, SUBFUCTION_TC_RANGE, INDEX_TC_RANG},  {MAINFUCTION_TC, SUBFUCTION_TC_INSFUELCOMP, INDEX_TC_INSFUELCOMPN} }, /*TC INSFUELCOMPN*/ { {MAINFUCTION_FAULT, SUBFUCTION_FAULT_LIST, INDEX_FAULT_FAULTLIST},  {MAINFUCTION_SET, SUBFUCTION_SETTING, INDEX_SET_SETTING},  {MAINFUCTION_TC, SUBFUCTION_TC_INSFUELCOMP, INDEX_TC_INSFUELCOMPN}, {MAINFUCTION_TC, SUBFUCTION_TC_BAT, INDEX_TC_BAT}, {MAINFUCTION_TC, SUBFUCTION_TC_RANGE, INDEX_TC_RANG} }, /*TC RANGE*/ { {MAINFUCTION_FAULT, SUBFUCTION_FAULT_LIST, INDEX_FAULT_FAULTLIST},  {MAINFUCTION_SET, SUBFUCTION_SETTING, INDEX_SET_SETTING},  {MAINFUCTION_TC, SUBFUCTION_TC_RANGE, SUBFUCTION_TC_RANGE},  {MAINFUCTION_TC, SUBFUCTION_TC_AUTOSTART, SUBFUCTION_TC_AUTOSTART},  {MAINFUCTION_TC, SUBFUCTION_TC_BAT, INDEX_TC_BAT} }, /*TC BAT*/ { {MAINFUCTION_FAULT, SUBFUCTION_FAULT_LIST, INDEX_FAULT_FAULTLIST},  {MAINFUCTION_SET, SUBFUCTION_SETTING, INDEX_SET_SETTING},  {MAINFUCTION_TC, SUBFUCTION_TC_BAT, INDEX_TC_BAT},  {MAINFUCTION_TC, SUBFUCTION_TC_AUTORST, SUBFUCTION_TC_AUTORST},  {MAINFUCTION_TC, SUBFUCTION_TC_AUTOSTART, SUBFUCTION_TC_AUTOSTART} }, /*TC AUTOSTART*/ { {MAINFUCTION_FAULT, SUBFUCTION_FAULT_LIST, INDEX_FAULT_FAULTLIST},  {MAINFUCTION_SET, SUBFUCTION_SETTING, INDEX_SET_SETTING},  {MAINFUCTION_TC, SUBFUCTION_TC_AUTOSTART, SUBFUCTION_TC_AUTOSTART},  {MAINFUCTION_TC, SUBFUCTION_TC_TIREPRESS, INDEX_TC_TIREPRESS},  {MAINFUCTION_TC, SUBFUCTION_TC_AUTORST, SUBFUCTION_TC_AUTORST} }, /*TC AUTORST*/ { {MAINFUCTION_FAULT, SUBFUCTION_FAULT_LIST, INDEX_FAULT_FAULTLIST},  {MAINFUCTION_SET, SUBFUCTION_SETTING, INDEX_SET_SETTING},  {MAINFUCTION_TC, SUBFUCTION_TC_AUTORST, SUBFUCTION_TC_AUTORST},  {MAINFUCTION_TC, SUBFUCTION_TC_SPEED, INDEX_TC_SPEED},  {MAINFUCTION_TC, SUBFUCTION_TC_TIREPRESS, INDEX_TC_TIREPRESS} }, /*TC TIREPRESS*/ { {MAINFUCTION_TC, SUBFUCTION_TC_SPEED, INDEX_TC_SPEED}, {MAINFUCTION_ENTERTAINMENT, SUBFUCTION_MEDIA_MUSIC, INDEX_ENT_MEDIA_MUSIC}, {MAINFUCTION_SET, SUBFUCTION_SETTING, INDEX_SET_SETTING}, {MAINFUCTION_SET, SUBFUCTION_SETTING, INDEX_SET_SETTING}, {MAINFUCTION_SET, SUBFUCTION_SETTING, INDEX_SET_SETTING} }, /*SET SETTING*/ { {MAINFUCTION_TC, SUBFUCTION_TC_SPEED, INDEX_TC_SPEED}, {MAINFUCTION_ENTERTAINMENT, SUBFUCTION_MEDIA_MUSIC, INDEX_ENT_MEDIA_MUSIC}, {MAINFUCTION_SET, SUBFUCTION_SET_ILLU, INDEX_SET_ILLU}, {MAINFUCTION_SET, SUBFUCTION_SET_ILLU, INDEX_SET_ILLU}, {MAINFUCTION_SET, SUBFUCTION_SETTING, INDEX_SET_SETTING} }, /*SET ILLU*/ { {MAINFUCTION_TC, SUBFUCTION_TC_SPEED, INDEX_TC_SPEED}, {MAINFUCTION_ENTERTAINMENT, SUBFUCTION_MEDIA_MUSIC, INDEX_ENT_MEDIA_MUSIC}, {MAINFUCTION_SET, SUBFUCTION_SET_SPEEDLIMIT, INDEX_SET_SPEEDLIMIT}, {MAINFUCTION_SET, SUBFUCTION_SET_SPEEDLIMIT, INDEX_SET_SPEEDLIMIT}, {MAINFUCTION_SET, SUBFUCTION_SETTING, INDEX_SET_SETTING} }, /*SET SPEEDLIMIT*/ { {MAINFUCTION_TC, SUBFUCTION_TC_SPEED, INDEX_TC_SPEED}, {MAINFUCTION_ENTERTAINMENT, SUBFUCTION_MEDIA_MUSIC, INDEX_ENT_MEDIA_MUSIC}, {MAINFUCTION_SET, SUBFUCTION_SET_SCS, INDEX_SET_SCS}, {MAINFUCTION_SET, SUBFUCTION_SET_SCS, INDEX_SET_SCS}, {MAINFUCTION_SET, SUBFUCTION_SETTING, INDEX_SET_SETTING} }, /*SET SCS*/ { {MAINFUCTION_SET, SUBFUCTION_SETTING, INDEX_SET_SETTING}, {MAINFUCTION_FAULT, SUBFUCTION_FAULT_LIST, INDEX_FAULT_FAULTLIST}, {MAINFUCTION_ENTERTAINMENT, SUBFUCTION_MEDIA_MUSIC, INDEX_ENT_MEDIA_MUSIC}, {MAINFUCTION_ENTERTAINMENT, SUBFUCTION_MEDIA_MUSIC, INDEX_ENT_MEDIA_MUSIC}, {MAINFUCTION_ENTERTAINMENT, SUBFUCTION_MEDIA_MUSIC, INDEX_ENT_MEDIA_MUSIC} }, /*ENTERTAINMENT MEDIA MUSIC*/ #if 0 { {MAINFUCTION_SET, SUBFUCTION_SETTING, INDEX_SET_SETTING}, {MAINFUCTION_FAULT, SUBFUCTION_FAULT_LIST, INDEX_FAULT_FAULTLIST}, {MAINFUCTION_ENTERTAINMENT, SUBFUCTION_MEDIA_FM, INDEX_ENT_MEDIA_FM}, {MAINFUCTION_ENTERTAINMENT, SUBFUCTION_MEDIA_FM, INDEX_ENT_MEDIA_FM}, {MAINFUCTION_ENTERTAINMENT, SUBFUCTION_MEDIA_FM, INDEX_ENT_MEDIA_FM} }, /*ENTERTAINMENT MEDIA FM*/ { {MAINFUCTION_SET, SUBFUCTION_SETTING, INDEX_SET_SETTING}, {MAINFUCTION_FAULT, SUBFUCTION_FAULT_LIST, INDEX_FAULT_FAULTLIST}, {MAINFUCTION_ENTERTAINMENT, SUBFUCTION_MEDIA_AM, INDEX_ENT_MEDIA_AM}, {MAINFUCTION_ENTERTAINMENT, SUBFUCTION_MEDIA_AM, INDEX_ENT_MEDIA_AM}, {MAINFUCTION_ENTERTAINMENT, SUBFUCTION_MEDIA_AM, INDEX_ENT_MEDIA_AM} }, /*ENTERTAINMENT MEDIA AM*/ #endif { {MAINFUCTION_ENTERTAINMENT, SUBFUCTION_MEDIA_MUSIC,  INDEX_ENT_MEDIA_MUSIC}, {MAINFUCTION_TC, SUBFUCTION_TC_SPEED, INDEX_TC_SPEED}, {MAINFUCTION_FAULT, SUBFUCTION_FAULT_LIST, INDEX_FAULT_FAULTLIST}, {MAINFUCTION_FAULT, SUBFUCTION_FAULT_LIST, INDEX_FAULT_FAULTLIST}, {MAINFUCTION_FAULT, SUBFUCTION_FAULT_LIST, INDEX_FAULT_FAULTLIST} }, /*FAULT FAULTLIST*/ };  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Private extern functions declare */ extern BOOL FL_GetFuelSensorFaultFlag(void); extern U16 RANG_GetDisplayRangeToEmpty(void); extern U8 FC_GetFuelConsumption1(void); extern U8 FC_GetFuelConsumptionV1(void); extern U8 FC_GetFuelConsumption2(void); extern U8 FC_GetFuelConsumptionV2(void); static void dm_Get_DestPage_Process(void); //static void dm_Get_DestData_Process(void); static void dm_Get_DestData_Process(U8 isUpdate);  static void dm_KeyRespond_OK(void); static void dm_KeyRespond_UP(void); static void dm_KeyRespond_DOWN(void); static void dm_KeyRespond_LEFT(void); static void dm_KeyRespond_RIGHT(void); //static void dm_Get_MainPage_TC_Data(void); static void dm_Get_MainPage_TC_Data(U8 isUpdate);  static void dm_Get_MainPage_Set_Data(void); static void dm_Get_MainPage_ENT_Data(void); static void dm_Get_MainPage_FAULT_Data(void); static void dm_Get_IlluSetStatus(void); static void dm_Get_Eninfotainment_SubPage(void); static void dm_AdjustSpeedThsHold_100ms(void); static void dm_SetMenu_AutoExist(void); static void dm_Get_POPUP_MainPage_MSG_Data(void); static void dm_KeyTripCmpt_DOWN(void); #endif /*_DM_PRIVATE_H_*/  /*----------------end of file------------------------*/  /*=========================================================================== dm.c dm_cfg.h dm_info.inc dm_private.h dm_public.h File Revision History(bottom to top:first revision to last revision) *============================================================================ dm.c dm_cfg.h dm_info.inc dm_private.h dm_public.h $Log:$ * dm.c dm_cfg.h dm_info.inc dm_private.h dm_public.h Rev: Userid: Date: Description *-------- ---------- --------- ------------------------------ * dm.c dm_cfg.h dm_info.inc dm_private.h dm_public.h V1.0 Xueping.Chen 2016-12-05 Initial * *===========================================================================*/
