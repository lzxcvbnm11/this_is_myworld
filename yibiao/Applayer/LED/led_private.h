/************************************************************************** | Copyright |------------------------------------------------------------------------ |Copyright(c) by YEEDON MultiMedia Co.,LTD. All rights reserved. | | this software if furnished under a license and may be used and copied | only in accordance with the terms of such license and with the inclusion | of he above copyright notic.This software or any other copies thereof | may not be provided of otherwise made available to any other person. | No title to and ownership of the software is hereby transferred. | | the information in this software is subject to change without notice | and should not be construed as a commitment by | YEEDON MultiMedia Co.LTD. | | YEEDON MultiMedia Co.LTD. assumes no responsibility for the use or reliability | of its Software on equipment which is not supported by YEEDON MultiMedia Co.LTD. |-------------------------------------------------------------- **************************************************************************/    /*-----------------------------------------------------------------------*/ /*----Description of file-----------------------------------------------------*/ /*-----------------------------------------------------------------------*/    /************************************************************************* LED private file used for LED ON,OFF,FLASH control when warn or other event trigged *************************************************************************/   /*------------------------------------------------------------------------*/ /*-----Head of file----------------------------------------------------------*/ /*------------------------------------------------------------------------*/  /*check of multiple include*/ #ifndef _LED_PRIVATE_H_ #define _LED_PRIVATE_H_   /*Files for including*/ #include "rtwtypes.h" #include "stsmg_public.h"   /*Public Macro definitions*/ #define LIGHT_CYCLE_ENABLE 1 #define LED_PROCESS_PERIOD_MS 50 #define FLASH_NONE_COUNT 0 #define FLASH_QUATER_COUNT (2000/LED_PROCESS_PERIOD_MS)/*2s亮，2秒灭 计数40个周期*/ #define FLASH_HALF_COUNT (1000/LED_PROCESS_PERIOD_MS) /*1s亮，1秒灭 计数20个周期*/ #define FLASH_1HZ_COUNT (500/LED_PROCESS_PERIOD_MS) /*0.5s亮，0.5秒灭 计数10个周期*/ #define FLASH_2HZ_COUNT (250/LED_PROCESS_PERIOD_MS) /*0.25s亮，0.25秒灭 计数5个周期*/ //#define FAULT_COUT_MAX 5/*水温故障的计数*/ #define SELF_CHECK_CNT (5000/LED_PROCESS_PERIOD_MS)/*自检矩阵表个数*/ #define REVERSE_FACTOR (LED_PROCESS_PERIOD_MS)/*自检矩阵表个数*/ #define TEMP_OFFSET 40  typedef enum LEDSEGLevel_Tag { LEVEL_LED_SEGNONE= ( 0U ), LEVEL_LED_SEG1, LEVEL_LED_SEG2, LEVEL_LED_SEG3, LEVEL_LED_SEG4, LEVEL_LED_SEG5, LEVEL_LED_SEG6, LEVEL_LED_SEG7, LEVEL_LED_SEG8, LEVEL_LED_ALL }LEDSEGLevel_ENUM;  typedef enum LEDWarnWorkSts_Tag { WARNWORK_IDLE= ( 0U ), WARNWORK_RUN, WARNWORK_ALL }LEDWarnWorkSts_Tag_ENUM;   typedef enum LEDLamp_Tag { LEDLAMP_NONE=(0u), /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Reserved Bits */ LEDLAMP_AUTOHOLD_GREEN, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Reserved Bits */ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr add new*/ LEDLAMP_TURNLEFT,/* 左转向灯绿 */ LEDLAMP_BRAKEERROR,/* 制动器故障灯红*/ LEDLAMP_SRS,/* 安全气囊灯红 */ LEDLAMP_ABS_ERROR,/* ABS故障灯黄 */ LEDLAMP_SEATBELT_UNFASTEN,/* 安全带未系灯红*/ LEDLAMP_TPMS_WARN,/* 胎压报警灯黄*/ LEDLAMP_SCSSTART,/* SCS启动灯黄*/ LEDLAMP_EPB,/* EPB 预留 */ LEDLAMP_FUEL_WARN,/* 燃油报警灯黄 */ LEDLAMP_BEAM_LAMP,/* 远光灯蓝 */ LEDLAMP_REAR_FOG,/*后雾灯黄*/ LEDLAMP_EPB_OFF,/* EPB OFF灯黄*/ LEDLAMP_SCS_OFF ,/* SCS关闭灯黄*/ LEDLAMP_CRUISE_GREEN,/* 巡航灯绿*/ LEDLAMP_CRUISE_YELLOW, /*巡航灯黄 */ LEDLAMP_FUELSEGMENT8,/* 燃油8段灯白*/ LEDLAMP_FUELSEGMENT7,/* 燃油7段灯白*/ LEDLAMP_FUELSEGMENT6,/* 燃油6段灯白 */ LEDLAMP_FUELSEGMENT5,/* 燃油5段灯白 */ LEDLAMP_FUELSEGMENT4,/* 燃油4段灯白 */ LEDLAMP_FUELSEGMENT3,/* 燃油3段灯白 */ LEDLAMP_FUELSEGMENT2,/* 燃油2段灯白 */ LEDLAMP_FUELSEGMENT1,/* 燃油1段灯白 */ LEDLAMP_TEMPSEGMENT1,/* 水温1段灯白 */ LEDLAMP_TEMPSEGMENT8,/* 水温8段灯白 */ LEDLAMP_TEMPSEGMENT7,/*水温7段灯白 */ LEDLAMP_TEMPSEGMENT6,/* 水温6段灯白 */ LEDLAMP_TEMPSEGMENT5,/* 水温5段灯白 */ LEDLAMP_TEMPSEGMENT4,/* 水温4段灯白 */ LEDLAMP_TEMPSEGMENT3,/* 水温3段灯白 */ LEDLAMP_TEMPSEGMENT2,/* 水温2段灯白 */ LEDLAMP_TEMP_WARN_RED, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr TEMP WARN */ LEDLAMP_ASS_ACTIVE,/* ASS激活灯绿 */ LEDLAMP_ASS_ERROR,/* 启停故障灯黄*/ LEDLAMP_ECOMODE,/* 经济模式灯绿 */ LEDLAMP_SIDELIGHTS,/* 位置灯绿*/ LEDLAMP_FRONT_FOG,/* 前雾灯绿 */ LEDLAMP_HDC_GREEN,/* 水温报警灯红*/ /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr add new*/ LEDLAMP_HDC_YELLOW,/* 水温报警灯红*/ LEDLAMP_ALARM,/*防盗灯*/ LEDLAMP_EPS_ERROR,/* EPS故障灯红 */ LEDLAMP_EPS_WARN,/* EPS警告灯黄 */ LEDLAMP_CHARGER,/*交流充电灯红 */ LEDLAMP_EMS_ERROR,/* 发动机故障灯黄*/ LEDLAMP_EMISSION_ERROR,/* 排放故障灯黄 */ LEDLAMP_FUELPRESURE_LOW,/* 机油压力低灯红 */ LEDLAMP_TURNRIGHT,/*右转向灯绿 */ LEDLAMP_ASS,/*自启停报警灯 */ LEDLAMP_ALL } LEDLamp_ENUM;  typedef enum LEDLightFrequency_Tag { FREQUENCY_LED_NONE = ( 0U ), /*没有频率*/ FREQUENCY_LED_QUARTER , /*0.25Hz*/ FREQUENCY_LED_HALF, /*0.5HZ*/ FREQUENCY_LED_1HZ, /*1Hz*/ FREQUENCY_LED_2HZ, /*2HZ*/ FREQUENCY_LED_ALL } LEDLightFrequency_ENUM;  typedef enum LEDLightType_Tag { LEDLIGHTTYPE_OFF = ( 0U ), /*熄灭*/ LEDLIGHTTYPE_ON, /*点亮*/ LEDLIGHTTYPE_FLASH, /*闪烁*/ LEDLIGHTTYPE_ALL } LEDLightType_ENUM;   typedef enum SEGType_Tag { TYPE_LED_FUEL= ( 0U ), TYPE_LED_TEMP, TYPE_LED_ALL  }SEGType_ENUM;     /*------------------- LEDEventPriority_ENUM liuyingying 2017-0206 ADD add priority enum priority from low to high -------------------*/  typedef enum LEDEventPriority_Tag { PRIORITY_NONE, PRIORITY_ON_LEVEL1, PRIORITY_ON_LEVEL2, PRIORITY_ON_LEVEL3, PRIORITY_ON_LEVEL4, PRIORITY_ON_LEVEL5, PRIORITY_ON_LEVEL6, // 2HZ PRIORITY_ON_LEVEL7,// 1HZ PRIORITY_ON_LEVEL8,//HAFG PRIORITY_ON_LEVEL9,//HAFG PRIORITY_FLASH_ALL } LEDEventPriority_ENUM;   typedef struct LEDLightPrm_Tag { U8 Frequency;/*闪烁频率*/ U32 Duration;/*是否为周期/持续时间 s*/ } LEDLightPrm_ST;  typedef struct LEDLightData_Tag { U16 TotalCnt;/*周期数*/ U8 done; U8 Level; U16 Priority; LEDLightPrm_ST prm; /*灯的参数*/ } LEDLightData_ST;   typedef struct LEDMatrix_Tag { LEDEventPriority_ENUM priority;/*事件对应的优先级，主要用于处理一个灯对应多个事件时，事件消隐的处理*/ LEDLamp_ENUM index;/*指示灯的索引*/ LEDLightPrm_ST data;/*灯的参数*/ } LEDMatrix_ST;  typedef struct LEDState_Tag { LRMState_UN lrm_lamp;/* 74H595控制的灯的状态*/ BOOL assLamp;/* ASS灯的状态*/ } LEDState_ST;   static const LEDState_ST led_selfcheckMatrix[SELF_CHECK_CNT] = {  {0XFE,0X7F,0X00,0X00,0X7F,0XFB,TRUE}, /*50ms*/ {0XFE,0X7F,0X00,0X00,0X7F,0XFB,TRUE}, /*100ms*/ {0XFE,0X7F,0X00,0X00,0X7F,0XFB,TRUE}, /*150ms*/ {0XFE,0X7F,0X00,0X00,0X7F,0XFB,TRUE}, /*200ms*/ {0XFE,0X7F,0X00,0X00,0X7F,0XFB,TRUE}, /*250ms*/ {0XFE,0X7F,0X00,0X00,0X7F,0XFB,TRUE}, /*300ms*/ {0XFE,0X7F,0X00,0X00,0X7F,0XFB,TRUE}, /*350ms*/ {0XFE,0X7F,0X00,0X00,0X7F,0XFB,TRUE}, /*400ms*/ {0XFE,0X7F,0X00,0X00,0X7F,0XFB,TRUE}, /*450ms*/ {0XFE,0X7F,0X00,0X00,0X7F,0XFB,TRUE}, /*500ms*/ {0XFE,0X7F,0X00,0X00,0X7F,0XFB,TRUE}, /*550ms*/ {0XFE,0X7F,0X00,0X00,0X7F,0XFB,TRUE}, /*600ms*/ {0XFE,0X7F,0X00,0X00,0X7F,0XFB,TRUE}, /*650ms*/ {0XFE,0X7F,0X00,0X00,0X7F,0XFB,TRUE}, /*700ms*/ {0XFE,0X7F,0X00,0X00,0X7F,0XFB,TRUE}, /*750ms*/ {0XFE,0X7F,0X00,0X00,0X7F,0XFB,TRUE}, /*800ms*/ {0XFE,0X7F,0X00,0X00,0X7F,0XFB,TRUE}, /*850ms*/ {0XFE,0X7F,0X00,0X00,0X7F,0XFB,TRUE}, /*900ms*/ {0XFE,0X7F,0X80,0X01,0X7F,0XFB,TRUE}, /*950ms*/ {0XFE,0X7F,0X80,0X01,0X7F,0XFB,TRUE}, /*1000ms*/ {0XFE,0X7F,0X80,0X01,0X7F,0XFB,TRUE}, /*1050ms*/ {0XFE,0X7F,0X80,0X01,0X7F,0XFB,TRUE}, /*1100ms*/ {0XFE,0X7F,0XC0,0X81,0X7F,0XFB,TRUE}, /*1150ms*/ {0XFE,0X7F,0XC0,0X81,0X7F,0XFB,TRUE}, /*1200ms*/ {0XFE,0X7F,0XC0,0X81,0X7F,0XFB,TRUE}, /*1250ms*/ {0XFE,0X7F,0XC0,0X81,0X7F,0XFB,TRUE}, /*1300ms*/ {0XFE,0X7F,0XE0,0XC1,0X7F,0XFB,TRUE}, /*1350ms*/ {0XFE,0X7F,0XE0,0XC1,0X7F,0XFB,TRUE}, /*1400ms*/ {0XFE,0X7F,0XE0,0XC1,0X7F,0XFB,TRUE}, /*1450ms*/ {0XFE,0X7F,0XE0,0XC1,0X7F,0XFB,TRUE}, /*1500ms*/ {0XFE,0X7F,0XF0,0XE1,0X7F,0XFB,TRUE}, /*1600ms*/ {0XFE,0X7F,0XF0,0XE1,0X7F,0XFB,TRUE}, /*1650ms*/ {0XFE,0X7F,0XF0,0XE1,0X7F,0XFB,TRUE}, /*1700ms*/ {0XFE,0X7F,0XF0,0XE1,0X7F,0XFB,TRUE}, /*1750ms*/ {0XFE,0X7F,0XF8,0XF1,0X7F,0XFB,TRUE}, /*1800ms*/ {0XFE,0X7F,0XF8,0XF1,0X7F,0XFB,TRUE}, /*1850ms*/ {0XFE,0X7F,0XF8,0XF1,0X7F,0XFB,TRUE}, /*1900ms*/ {0XFE,0X7F,0XF8,0XF1,0X7F,0XFB,TRUE}, /*1950ms*/ {0XFE,0X7F,0XFC,0XF9,0X7F,0XFB,TRUE}, /*2000ms*/ {0XFE,0X7F,0XFC,0XF9,0X7F,0XFB,TRUE}, /*2050ms*/ {0XFE,0X7F,0XFC,0XF9,0X7F,0XFB,TRUE}, /*2100ms*/ {0XFE,0X7F,0XFC,0XF9,0X7F,0XFB,TRUE}, /*2150ms*/ {0XFE,0X7F,0XFE,0XFD,0X7F,0XFB,TRUE}, /*2200ms*/ {0XFE,0X7F,0XFE,0XFD,0X7F,0XFB,TRUE}, /*2250ms*/ {0XFE,0X7F,0XFE,0XFD,0X7F,0XFB,TRUE}, /*2300ms*/ {0XFE,0X7F,0XFE,0XFD,0X7F,0XFB,TRUE}, /*2350ms*/ {0XFE,0X7F,0XFF,0XFF,0X7F,0XFB,TRUE}, /*2400ms*/ {0XFE,0X7F,0XFF,0XFF,0X7F,0XFB,TRUE}, /*2450ms*/ {0XFE,0X7F,0XFF,0XFF,0X7F,0XFB,TRUE}, /*2500ms*/ {0XFE,0XBE,0XFF,0XFF,0XBF,0XFB,TRUE}, /*2550ms*/ {0XFF,0XBE,0XFF,0XFF,0XBF,0XFD,TRUE}, /*2600ms*/ {0XFF,0XBE,0XFF,0XFF,0XBF,0XFD,TRUE}, /*2650ms*/ {0XFF,0XBE,0XFF,0XFF,0XBF,0XFD,TRUE}, /*2700ms*/ {0XFF,0XBE,0XFF,0XFF,0XBF,0XFD,TRUE}, /*2750ms*/ {0XFF,0XBE,0XFF,0XFF,0XBF,0XFD,TRUE}, /*2800ms*/ {0XFF,0XBE,0XFF,0XFF,0XBF,0XFD,TRUE}, /*2850ms*/ {0XFF,0XBE,0XFF,0XFF,0XBF,0XFD,TRUE}, /*2900ms*/ {0XFF,0XBE,0XFF,0XFF,0XBF,0XFD,TRUE}, /*2950ms*/ {0XFF,0XBE,0XFF,0XFF,0XBF,0XFD,TRUE}, /*3000ms*/ {0XFF,0XBE,0XFF,0XFF,0XBF,0XFD,TRUE}, /*3050ms*/ {0XFF,0XBE,0XFE,0XFD,0XBF,0XFD,TRUE}, /*3100ms*/ {0XFF,0XBE,0XFE,0XFD,0XBF,0XFD,TRUE}, /*3150ms*/ {0XFF,0XBE,0XFE,0XFD,0XBF,0XFD,TRUE}, /*3200ms*/ {0XFF,0XBE,0XFE,0XFD,0XBF,0XFD,TRUE}, /*3250ms*/ {0XFF,0XBE,0XFC,0XF9,0XBF,0XFD,TRUE}, /*3300ms*/ {0XFF,0XBE,0XFC,0XF9,0XBF,0XFD,TRUE}, /*3350ms*/ {0XFF,0XBE,0XFC,0XF9,0XBF,0XFD,TRUE}, /*3400ms*/ {0XFF,0XBE,0XFC,0XF9,0XBF,0XFD,TRUE}, /*3450ms*/ {0XFF,0XBE,0XF8,0XF1,0XBF,0XFD,TRUE}, /*3500ms*/ {0XFF,0XBE,0XF8,0XF1,0XBF,0XFD,TRUE}, /*3550ms*/ {0XFF,0XBE,0XF8,0XF1,0XBF,0XFD,TRUE}, /*3600ms*/ {0XFF,0XBE,0XF8,0XF1,0XBF,0XFD,TRUE}, /*3650ms*/ {0XFF,0XBE,0XF0,0XE1,0XBF,0XFD,TRUE}, /*3700ms*/ {0XFF,0XBE,0XF0,0XE1,0XBF,0XFD,TRUE}, /*3750ms*/ {0XFF,0XBE,0XF0,0XE1,0XBF,0XFD,TRUE}, /*3800ms*/ {0XFF,0XBE,0XF0,0XE1,0XBF,0XFD,TRUE}, /*3850ms*/ {0XFF,0XBE,0XE0,0XC1,0XBF,0XFD,TRUE}, /*3900ms*/ {0XFF,0XBE,0XE0,0XC1,0XBF,0XFD,TRUE}, /*3950ms*/ {0XFF,0XBE,0XE0,0XC1,0XBF,0XFD,TRUE}, /*4000ms*/ {0XFF,0XBE,0XE0,0XC1,0XBF,0XFD,TRUE}, /*4050ms*/ {0XFF,0XBE,0XC0,0X81,0XBF,0XFD,TRUE}, /*4100ms*/ {0XFF,0XBE,0XC0,0X81,0XBF,0XFD,TRUE}, /*4150ms*/ {0XFF,0XBE,0XC0,0X81,0XBF,0XFD,TRUE}, /*4200ms*/ {0XFF,0XBE,0XC0,0X81,0XBF,0XFD,TRUE}, /*4250ms*/ {0XFF,0XBE,0X80,0X01,0XBF,0XFD,TRUE}, /*4300ms*/ {0XFF,0XBE,0X80,0X01,0XBF,0XFD,TRUE}, /*4350ms*/ {0XFF,0XBE,0X80,0X01,0XBF,0XFD,TRUE}, /*4400ms*/ {0XFF,0XBE,0X80,0X01,0XBF,0XFD,TRUE}, /*4450ms*/ {0XFF,0XBE,0X00,0X00,0XBF,0XFD,TRUE}, /*4500ms*/ {0XFF,0XBE,0X00,0X00,0XBF,0XFD,TRUE}, /*4550ms*/ {0XFF,0XBE,0X00,0X00,0XBF,0XFD,TRUE}, /*4600ms*/ {0XFF,0XBE,0X00,0X00,0XBF,0XFD,TRUE}, /*4650ms*/ {0XFF,0XBE,0X00,0X00,0XBF,0XFD,TRUE}, /*4700ms*/ {0XFF,0XBE,0X00,0X00,0XBF,0XFD,TRUE}, /*4750ms*/ {0XFF,0XBE,0X00,0X00,0XBF,0XFD,TRUE}, /*4800ms*/ {0XFF,0XBE,0X00,0X00,0XBF,0XFD,TRUE}, /*4850ms*/ {0XFF,0XBE,0X00,0X00,0XBF,0XFD,TRUE}, /*4900ms*/ {0XFF,0XBE,0X00,0X00,0XBF,0XFD,TRUE}, /*4950ms*/ {0XFF,0XBE,0X00,0X00,0XBF,0XFD,TRUE}, /*4950ms add new */ {0XFF,0XBE,0X00,0X00,0XBF,0XFD,TRUE}, /*5000ms*/  };  static const LEDMatrix_ST led_Matrix[INDEX_LED_ALL]= { {PRIORITY_NONE, LEDLAMP_NONE, FREQUENCY_LED_1HZ, 0},/*INDEX_LED_NULL*/  {PRIORITY_ON_LEVEL3, LEDLAMP_ABS_ERROR, FREQUENCY_LED_NONE, 0},/*INDEX_LED_ABS_ALERT_ON*/  {PRIORITY_ON_LEVEL3, LEDLAMP_ABS_ERROR, FREQUENCY_LED_NONE, 0},/*INDEX_LED_ABS_NODEMISSING_ON*/  {PRIORITY_ON_LEVEL3, LEDLAMP_CHARGER, FREQUENCY_LED_NONE, 0},/*INDEX_LED_ALTERNAT_ON*/  {PRIORITY_ON_LEVEL6, LEDLAMP_CHARGER, FREQUENCY_LED_NONE, 0},/*INDEX_LED_CHARGE_ON*/  {PRIORITY_ON_LEVEL2, LEDLAMP_CHARGER, FREQUENCY_LED_NONE, 0},/*INDEX_LED_LOADSHED_ON*/  {PRIORITY_ON_LEVEL1, LEDLAMP_ASS_ACTIVE, FREQUENCY_LED_NONE, 0},/*INDEX_LED_ASS_GREEN_ON*/  {PRIORITY_ON_LEVEL2, LEDLAMP_ASS_ACTIVE, FREQUENCY_LED_2HZ, 1500},/*INDEX_LED_ASS_FBD_GREEN_FLASH_2HZ*/  {PRIORITY_ON_LEVEL1, LEDLAMP_ASS_ERROR, FREQUENCY_LED_NONE, 0},/*INDEX_LED_ASS_FAULT_YELLOW_ON*/ {PRIORITY_ON_LEVEL5, LEDLAMP_BRAKEERROR, FREQUENCY_LED_HALF, 30000},/*INDEX_LED_BRAKE_HANDON_FLASH*/  {PRIORITY_ON_LEVEL4, LEDLAMP_BRAKEERROR, FREQUENCY_LED_NONE, 0},/*INDEX_LED_BRAKE_HANDON_ON*/  {PRIORITY_ON_LEVEL2, LEDLAMP_BRAKEERROR, FREQUENCY_LED_NONE, 0},/*INDEX_LED_BRAKE_EBD_ON*/  {PRIORITY_ON_LEVEL1, LEDLAMP_TEMP_WARN_RED, FREQUENCY_LED_NONE, 0},/*INDEX_LED_COOLANT_ON*/  {PRIORITY_ON_LEVEL2, LEDLAMP_TEMP_WARN_RED, FREQUENCY_LED_HALF, 0xffff},/*INDEX_LED_COOLANT_FLASH_HALFHZ*/ {PRIORITY_ON_LEVEL1,LEDLAMP_CRUISE_GREEN, FREQUENCY_LED_NONE, 0},/*INDEX_LED_CRUS_GREEN_ON*/  {PRIORITY_ON_LEVEL1, LEDLAMP_CRUISE_YELLOW, FREQUENCY_LED_NONE, 0},/*INDEX_LED_CRUS_YELLOW_ON*/ {PRIORITY_ON_LEVEL2, LEDLAMP_CRUISE_YELLOW, FREQUENCY_LED_HALF, 0xffff},/*INDEX_LED_CRUS_YELLOW_FLASH_HALFHZ*/  {PRIORITY_ON_LEVEL1, LEDLAMP_ECOMODE, FREQUENCY_LED_NONE, 0},/*INDEX_LED_ECO*/  {PRIORITY_ON_LEVEL1, LEDLAMP_EMS_ERROR, FREQUENCY_LED_NONE, 0},/*INDEX_LED_EMISSION_ON*/ {PRIORITY_ON_LEVEL5, LEDLAMP_EMS_ERROR, FREQUENCY_LED_HALF, 0xffff},/*INDEX_LED_EMISSION_FLASH_HALFHZ*/ {PRIORITY_ON_LEVEL4, LEDLAMP_EMS_ERROR, FREQUENCY_LED_1HZ, 0xffff},/*INDEX_LED_EMISSION_FLASH_1HZ*/ {PRIORITY_ON_LEVEL3, LEDLAMP_EMS_ERROR, FREQUENCY_LED_2HZ, 0xffff},/*INDEX_LED_EMISSION_FLASH_2HZ*/ {PRIORITY_ON_LEVEL1, LEDLAMP_EMISSION_ERROR, FREQUENCY_LED_NONE, 0},/*INDEX_LED_ENGINE_ON*/  {PRIORITY_ON_LEVEL6, LEDLAMP_EPS_ERROR, FREQUENCY_LED_HALF, 0xffff},/*INDEX_LED_EPS_RED_FLASH*/ {PRIORITY_ON_LEVEL4, LEDLAMP_EPS_ERROR, FREQUENCY_LED_NONE, 0},/*INDEX_LED_SASFAULT_RED_ON*/  {PRIORITY_ON_LEVEL2, LEDLAMP_EPS_ERROR, FREQUENCY_LED_NONE, 0},/*INDEX_LED_SASUNCAL_ON*/  {PRIORITY_ON_LEVEL2, LEDLAMP_EPS_WARN, FREQUENCY_LED_NONE, 0},/*INDEX_LED_EPS_YELLOW_ON*/ {PRIORITY_ON_LEVEL4, LEDLAMP_EPS_WARN, FREQUENCY_LED_HALF, 0xffff},/*INDEX_LED_ESCL_YELLOW_FLASH*/ {PRIORITY_ON_LEVEL1, LEDLAMP_FRONT_FOG, FREQUENCY_LED_NONE, 0},/*INDEX_LED_FRONTFOGLAMP_ON*/  {PRIORITY_ON_LEVEL2, LEDLAMP_FUEL_WARN, FREQUENCY_LED_HALF, 0xffff},/*INDEX_LED_FUEL_RED_FLASH_HALFHZ*/  {PRIORITY_ON_LEVEL1, LEDLAMP_FUEL_WARN, FREQUENCY_LED_NONE, 0},/*INDEX_LED_FUEL_RED_ON*/  {PRIORITY_ON_LEVEL1, LEDLAMP_BEAM_LAMP, FREQUENCY_LED_NONE, 0},/*INDEX_LED_HEADLAMP_ON*/  {PRIORITY_NONE, LEDLAMP_NONE, FREQUENCY_LED_1HZ, 0xffff},/*INDEX_LED_IGNKEY_ON*/ {PRIORITY_ON_LEVEL1, LEDLAMP_ALARM, FREQUENCY_LED_NONE, 0},/*INDEX_LED_KEY_ON*/ {PRIORITY_ON_LEVEL3, LEDLAMP_ALARM, FREQUENCY_LED_HALF, 0xffff},/*INDEX_LED_KEY_FLASH_HALFHZ*/  {PRIORITY_ON_LEVEL2, LEDLAMP_TURNLEFT, FREQUENCY_LED_NONE, 0},/*INDEX_LED_LEFTDIR_ON*/ {PRIORITY_ON_LEVEL1, LEDLAMP_SIDELIGHTS, FREQUENCY_LED_NONE, 0},/*INDEX_LED_LIGHT_ON*/ {PRIORITY_ON_LEVEL1, LEDLAMP_SIDELIGHTS, FREQUENCY_LED_NONE, 0},/*INDEX_LED_SIDELAMP_ON*/  {PRIORITY_ON_LEVEL7, LEDLAMP_FUELPRESURE_LOW, FREQUENCY_LED_NONE, 0},/*INDEX_LED_OILPRESURE_ON*/ {PRIORITY_NONE, LEDLAMP_NONE, FREQUENCY_LED_1HZ, 0xffff},/*INDEX_LED_OVERSPEED_ON*/ {PRIORITY_NONE, LEDLAMP_NONE, FREQUENCY_LED_NONE, 0},/*INDEX_LED_PDCAUDWRN_ON*/ {PRIORITY_NONE, LEDLAMP_NONE, FREQUENCY_LED_NONE, 0},/*INDEX_LED_PDCSTS_ON*/  {PRIORITY_ON_LEVEL1, LEDLAMP_REAR_FOG, FREQUENCY_LED_NONE, 0},/*INDEX_LED_REARFOGLLAMP_ON*/  {PRIORITY_ON_LEVEL3, LEDLAMP_TURNRIGHT, FREQUENCY_LED_NONE, 0},/*INDEX_LED_RIGHTDIR_ON*/  {PRIORITY_ON_LEVEL4, LEDLAMP_SCS_OFF, FREQUENCY_LED_NONE, 0},/*INDEX_LED_SCS_DSCOFF_ON*/  {PRIORITY_ON_LEVEL2, LEDLAMP_SCS_OFF, FREQUENCY_LED_NONE, 0},/*INDEX_LED_SCS_TCOFF_ON*/  {PRIORITY_ON_LEVEL3, LEDLAMP_SCSSTART, FREQUENCY_LED_NONE, 0},/*INDEX_LED_SCS_DSCFAULT_ON*/  {PRIORITY_ON_LEVEL1, LEDLAMP_SCSSTART, FREQUENCY_LED_2HZ, 0xffff},/*INDEX_LED_SCS_DSCACTIVE_FLASH_2HZ*/  {PRIORITY_ON_LEVEL5, LEDLAMP_SCSSTART, FREQUENCY_LED_NONE, 0},/*INDEX_LED_SCS_TCFAULT_ON*/  {PRIORITY_ON_LEVEL5, LEDLAMP_SEATBELT_UNFASTEN, FREQUENCY_LED_HALF, 0xffff},/*INDEX_LED_SEATBELT_DRV_FLASH_HALFHZ*/  // {PRIORITY_ON_LEVEL5, LEDLAMP_SEATBELT_UNFASTEN, FREQUENCY_LED_HALF, 1},/*INDEX_LED_SEATBELT_PNSG_FLASH_HALFHZ*/  {PRIORITY_ON_LEVEL1, LEDLAMP_SEATBELT_UNFASTEN, FREQUENCY_LED_NONE, 0},/*INDEX_LED_SEATBELT_LAMPON_ON*/  {PRIORITY_ON_LEVEL1, LEDLAMP_SRS, FREQUENCY_LED_NONE, 0},/*INDEX_LED_SRS_ON*/  {PRIORITY_ON_LEVEL2, LEDLAMP_SRS, FREQUENCY_LED_HALF, 0xffff},/*INDEX_LED_SRS_FLASH_HALFHZ*/  {PRIORITY_ON_LEVEL3, LEDLAMP_SRS, FREQUENCY_LED_HALF, 0xffff},/*EVENT_SRSLGT_LED_ON*/  {PRIORITY_ON_LEVEL9, LEDLAMP_TPMS_WARN, FREQUENCY_LED_HALF, 90000},/*INDEX_LED_TPMS_FAULT_FLASH*/ {PRIORITY_ON_LEVEL8, LEDLAMP_TPMS_WARN, FREQUENCY_LED_NONE, 0},/*INDEX_LED_TPMS_FAULT_ON*/  {PRIORITY_ON_LEVEL3, LEDLAMP_NONE, FREQUENCY_LED_NONE, 0},/*INDEX_LED_TPMS_IDFICNLRMCM_ON*/  {PRIORITY_ON_LEVEL2, LEDLAMP_NONE, FREQUENCY_LED_NONE, 0},/*INDEX_LED_TPMS_WNTRMDA_ON*/  {PRIORITY_ON_LEVEL1, LEDLAMP_NONE, FREQUENCY_LED_NONE, 0},/*INDEX_LED_TPMS_AUTOLOCTNCM_ON*/  {PRIORITY_ON_LEVEL1, LEDLAMP_EPB, FREQUENCY_LED_2HZ, 0xffff},/*INDEX_LED_EPB_RED_FLASH_2HZ*/ {PRIORITY_ON_LEVEL2, LEDLAMP_EPB, FREQUENCY_LED_NONE, 0},/*INDEX_LED_EPB_RED_ON*/ {PRIORITY_ON_LEVEL1, LEDLAMP_AUTOHOLD_GREEN, FREQUENCY_LED_NONE, 0},/*INDEX_LED_AHD_GREEN_ON*/ {PRIORITY_ON_LEVEL1, LEDLAMP_EPB_OFF, FREQUENCY_LED_2HZ, 0xffff},/*INDEX_LED_EPBFLT_FLASH_HALFHZ*/ {PRIORITY_ON_LEVEL2, LEDLAMP_EPB_OFF, FREQUENCY_LED_NONE, 0},/*INDEX_LED_EBFLT_ON*/ {PRIORITY_ON_LEVEL2, LEDLAMP_HDC_GREEN, FREQUENCY_LED_NONE, 0},/*INDEX_LED_HDC_GREEN_ON*/ {PRIORITY_ON_LEVEL1, LEDLAMP_HDC_GREEN, FREQUENCY_LED_2HZ, 0xffff},/*INDEX_LED_HDC_GREEN_FLASH_2HZ*/ {PRIORITY_ON_LEVEL2, LEDLAMP_HDC_YELLOW, FREQUENCY_LED_NONE, 0},/*INDEX_LED_HDC_YELLOW_ON*/ {PRIORITY_ON_LEVEL1, LEDLAMP_HDC_YELLOW, FREQUENCY_LED_2HZ, 0xffff},/*INDEX_LED_HDC_YELLOW_FLASH_2HZ*/  }; static const U8 led_counter[FREQUENCY_LED_ALL]= { FLASH_NONE_COUNT, FLASH_QUATER_COUNT, FLASH_HALF_COUNT, FLASH_1HZ_COUNT, FLASH_2HZ_COUNT };  static const LedEventData_ST flashMask= { INDEX_LED_NULL, 0XFFFFFFFF,/*0X C8 00 07 28*/ 0XFFFFFFFF,/*0X 00 C0 00 61*/ 0xFFFFFFFF, };  static const LedEventData_ST led_dataMask=  { INDEX_LED_NULL, 0XFFFFFFFF,/*0X C8 00 07 28*/ 0XFFFFFFFF,/*0X 00 C0 00 61*/ 0xFFFFFFFF, /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 屏蔽INDEX_STSMG_ESCL_FAULT 事件*/ };  /*private external functions declarations*/ static void led_NormalProcess( void ); static void led_SelfChkProcess( void ); extern LEDLamp_ENUM led_GetLampIndex(U8 type, U8 index); static BOOL led_GetLampDataByIndex(LEDState_ST *pValue, LEDLamp_ENUM lamp); static void led_EventProcess( void ); static void led_UpdateFuelLampProcess(void); static void led_UpdateTemLampProcess(void); static void led_LampUpdateProcess(void); static void led_OutPutProcess(void); static BOOL led_SetLampStatus(LEDState_ST *state, LEDLamp_ENUM lamp, U8 Value); /*-----End of File----------------------------------------*/ #endif/*_LED_PRIVATE_H_*/  /*======================================================= led.c led_cfg.h led_info.inc led_private.h led_public.h File Revision History (bottom to top:first revision to last revision) * *======================================================== *$Log:$ *  *Rev: Userid: date: description *----- ----- ----------- ----------- *Rev 1 liuyingying 2016-11-24 initial =========================================================*/
