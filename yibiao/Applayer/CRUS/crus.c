/***************************************************************************** crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Copyright (C) 2016 ShenZhen Yeedon Media co.,LTD. All rights reserved. * crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h File Name : crus.c crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Description : CRUS API application crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Author: ChenSongMing crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Date: 2017-6-29 ******************************************************************************/  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Files for including */ #include "crus_info.inc"  static U8 Crus_InitSts = FALSE; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr CRUS 模块初始化状态*/ static U8 Crus_FltSts = FAULT_CRUS1_NONE;  static U8 crus_KeyADSts = FALSE; static U16 crus_Counter = 0; static U16 crus_Adc1Value = 0; /*CRUISE1开关的ADC去抖动后的采样值*/ static U16 crus_Adc2ValuePre = 0; /*CRUISE2开关上一次的ADC去抖动后的采样值*/ static U16 crus_Adc2Value = 0; /*CRUISE2开关的ADC去抖动后的采样值*/ /*根据获取巡航开关的状态，存储发送到网络上的信号*/ static CRUSSendNetData_ST crus_NetCrusSwitchStsReq;   /*************************************************** crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Function: CRUS_Init crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Description: CRUS module initialized crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Parameters: none crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Returns: none crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h $Create & Verlog:$ crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Author:Hejianjun Date:2016-11-30 Version:V1.0 ****************************************************/ void CRUS_Init(void) { U8 res = RET_FAIL; Crus_FltSts = FAULT_CRUS1_NONE; crus_KeyADSts = 0u; crus_Adc1Value = 0u; crus_Counter = 0; crus_Adc2ValuePre = 0u; crus_Adc2Value = 0u; crus_NetCrusSwitchStsReq.CCSwStsCanclSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsOnSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsRsmSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsSpdDecSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsSpdIncSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsSetSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsDistDecSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsDistIncSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsSwDataIntgty = STATUS_CRUS_DATAVALID; crus_NetCrusSwitchStsReq.CCSwStsPV = 0u; crus_NetCrusSwitchStsReq.CCSwStsAlvRC = 0u;  Crus_InitSts = ((ADM_GetInitStatus()) && (IOM_GetModuleStatus())); }  /*************************************************** crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Function: CRUS_Process_20ms crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Description: the process of the CRUS module crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Parameters: none crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Returns: none crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h $Create & Verlog:$ crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Author:Hejianjun Date:2016-11-30 Version:V1.0 crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Author:chenshongming Date:2017-6-26 Version:V1.1 ****************************************************/ void CRUS_Process_20ms(void) { U8 batSts = 0; if (TRUE == Crus_InitSts) { /*insCruiseActLampEnPrm*/ if (FALSE == DIAG_GetCruiseActLampEn()) { crus_NetCrusSwitchStsReq.CCSwStsCanclSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsOnSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsRsmSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsSpdDecSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsSpdIncSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsSetSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsDistDecSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsDistIncSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsSwDataIntgty = STATUS_CRUS_DATAINVALID; } else { BAT_GetBatFltSts(TYPE_BATDET_CLASSA,&batSts); if(FLT_BAT_NO == batSts) { crus_LocalProcess(); crus_KeyStatusProcess(); crus_KeyFaultCheck(); crus_KeyFaultRemove(); } else { } }  crus_CalRollingCnt(); crus_CalCCSwStsPV(); } else { crus_NetCrusSwitchStsReq.CCSwStsCanclSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsOnSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsRsmSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsSpdDecSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsSpdIncSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsSetSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsDistDecSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsDistIncSwA = FALSE; crus_NetCrusSwitchStsReq.CCSwStsSwDataIntgty = STATUS_CRUS_DATAVALID; crus_NetCrusSwitchStsReq.CCSwStsPV = 0u; crus_NetCrusSwitchStsReq.CCSwStsAlvRC = 0u; } }   /*************************************************** crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Function: crus_CCSwStsPVCalc crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Description: get the value of CCSwStsPV crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Parameters: input: none crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Returns: none crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h $Create & Verlog:$ crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Author:Hejianjun Date:2016-11-29 Version:V1.0 ****************************************************/ static void crus_CalCCSwStsPV(void) { BYTE0_UN Byte0; BYTE2_UN Byte2; Byte0.Byte = 0; Byte2.Byte = 0; Byte0.BYTES.CRUS_CCSwStsSwDataIntgty = 0; Byte0.BYTES.CRUS_CCSwStsSpdDecSwA = FALSE; Byte0.BYTES.CRUS_CCSwStsSpdIncSwA = FALSE; Byte0.BYTES.CRUS_CCSwStsSetSwA = FALSE; Byte0.BYTES.CRUS_CCSwStsRsmSwA = FALSE; Byte0.BYTES.CRUS_CCSwStsOnSwA = FALSE; Byte0.BYTES.CRUS_CCSwStsCanclSwA = FALSE; Byte2.BYTES.CCSwStsAlvRC = 0; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 局部变量初始化*/ Byte2.BYTES.CCSwStsDistDecSwA = FALSE; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 无此网络信号*/ Byte2.BYTES.CCSwStsDistIncSwA = FALSE; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 无此网络信号*/  Byte0.BYTES.CRUS_CCSwStsSwDataIntgty = crus_NetCrusSwitchStsReq.CCSwStsSwDataIntgty; Byte0.BYTES.CRUS_CCSwStsSpdDecSwA = crus_NetCrusSwitchStsReq.CCSwStsSpdDecSwA ; Byte0.BYTES.CRUS_CCSwStsSpdIncSwA = crus_NetCrusSwitchStsReq.CCSwStsSpdIncSwA; Byte0.BYTES.CRUS_CCSwStsSetSwA = crus_NetCrusSwitchStsReq.CCSwStsSetSwA; Byte0.BYTES.CRUS_CCSwStsRsmSwA = crus_NetCrusSwitchStsReq.CCSwStsRsmSwA; Byte0.BYTES.CRUS_CCSwStsOnSwA = crus_NetCrusSwitchStsReq.CCSwStsOnSwA; Byte0.BYTES.CRUS_CCSwStsCanclSwA = crus_NetCrusSwitchStsReq.CCSwStsCanclSwA; Byte2.BYTES.CCSwStsAlvRC = crus_NetCrusSwitchStsReq.CCSwStsAlvRC; Byte2.BYTES.CCSwStsDistDecSwA = crus_NetCrusSwitchStsReq.CCSwStsDistDecSwA; Byte2.BYTES.CCSwStsDistIncSwA = crus_NetCrusSwitchStsReq.CCSwStsDistIncSwA; crus_NetCrusSwitchStsReq.CCSwStsPV = (U8)((0xFF -(Byte0.Byte + Byte2.Byte) ) + 1);  }  /*************************************************** crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Function: crus_LocalProcess crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Description: the process of getting the value of netsignal by check the AD and IO crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Parameters: input: none crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Returns: none crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h $Create & Verlog:$ crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Author:Hejianjun Date:2016-11-29 Version:V1.0 ****************************************************/ static void crus_LocalProcess(void) { U8 i =0; U8 iosts = 0; U16 advalue = 0; U8 crus_IOValue; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 数字IO 状态*/ U8 DataIntgtyTemp1 = 0; U8 DataIntgtyTemp2 = 0;  if (RET_OK == IOM_GetInputLevel(INDEX_IOINTPUT_CRUISE3, &iosts)) { crus_IOValue = iosts; } else { crus_IOValue = STATUS_IOM_LOW; }  if (RET_OK == ADM_GetDebounceValue(INDEX_ADM_CRUISE1, &advalue)) {  for (i = 0; i < CRUS1_TABLE_SIZE; i++) { if ((crus4Key_Martrix[i].IOStatus == crus_IOValue) && (ABS_SUB(advalue, crus4Key_Martrix[i].adValue ) <= CRUS_OFFSETRANGE)) { crus_NetCrusSwitchStsReq.CCSwStsOnSwA = crus4Key_Martrix[i].CCSwStsOnSwA; crus_NetCrusSwitchStsReq.CCSwStsRsmSwA = crus4Key_Martrix[i].CCSwStsRsmSwA; crus_NetCrusSwitchStsReq.CCSwStsCanclSwA = crus4Key_Martrix[i].CCSwStsCanclSwA; crus_NetCrusSwitchStsReq.CCSwStsSetSwA = crus4Key_Martrix[i].CCSwStsSetSwA; DataIntgtyTemp1 = crus4Key_Martrix[i].CCSwStsSwDataIntgty; } else { } } } else { /*do nothing */ }  /*insCruiseSWTypePrm*/ if (TYPE_8KEY == DIAG_GetCruiseSWType()) { if (RET_OK == ADM_GetDebounceValue(INDEX_ADM_CRUISE2, &advalue)) {  for (i = 0; i < CRUS2_TABLE_SIZE; i++) { if(ABS_SUB(advalue, crus8Key_Martrix[i].adValue) <= CRUS_OFFSETRANGE) { crus_NetCrusSwitchStsReq.CCSwStsSpdDecSwA = crus8Key_Martrix[i].CCSwStsSpdDecSwA; crus_NetCrusSwitchStsReq.CCSwStsSpdIncSwA = crus8Key_Martrix[i].CCSwStsSpdIncSwA; crus_NetCrusSwitchStsReq.CCSwStsDistDecSwA = crus8Key_Martrix[i].CCSwStsDistDecSwA; crus_NetCrusSwitchStsReq.CCSwStsDistIncSwA = crus8Key_Martrix[i].CCSwStsDistIncSwA; DataIntgtyTemp2 = crus8Key_Martrix[i].CCSwStsSwDataIntgty; } else { /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr do nothing */ } } } else { }  if (DataIntgtyTemp2 == DataIntgtyTemp1) { crus_NetCrusSwitchStsReq.CCSwStsSwDataIntgty = DataIntgtyTemp1; } else { if ((FAILURE_DETECTED == DataIntgtyTemp1) || (FAILURE_DETECTED == DataIntgtyTemp2)) { crus_NetCrusSwitchStsReq.CCSwStsSwDataIntgty = FAILURE_DETECTED; } else if ((ILLEAGAL_RANGE == DataIntgtyTemp1) || (ILLEAGAL_RANGE == DataIntgtyTemp2)) { crus_NetCrusSwitchStsReq.CCSwStsSwDataIntgty = ILLEAGAL_RANGE; } else if ((INVALID == DataIntgtyTemp1) || (INVALID == DataIntgtyTemp2)) { crus_NetCrusSwitchStsReq.CCSwStsSwDataIntgty = INVALID; } else { crus_NetCrusSwitchStsReq.CCSwStsSwDataIntgty = VALID; } } } else { crus_NetCrusSwitchStsReq.CCSwStsSwDataIntgty = DataIntgtyTemp1; } }  /*************************************************** crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Function: crus_ChangeSignalStatus crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Description: get the value of CCSwStsAlvRC crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Parameters: input: bool crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Returns: none crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h $Create & Verlog:$ crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Author:chenshongming Date:2017-6-29 Version:V2.0 ****************************************************/ static void crus_ChangeSignalStatus(BOOL value) { crus_NetCrusSwitchStsReq.CCSwStsSpdDecSwA = value; crus_NetCrusSwitchStsReq.CCSwStsSpdIncSwA = value; crus_NetCrusSwitchStsReq.CCSwStsDistDecSwA = value; crus_NetCrusSwitchStsReq.CCSwStsDistIncSwA = value; crus_NetCrusSwitchStsReq.CCSwStsOnSwA = value; crus_NetCrusSwitchStsReq.CCSwStsRsmSwA = value; }  /*************************************************** crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Function: crus_RollingCnt crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Description: get the value of CCSwStsAlvRC crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Parameters: input: none crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Returns: none crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h $Create & Verlog:$ crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Author:Hejianjun Date:2016-11-29 Version:V1.0 ****************************************************/ static void crus_CalRollingCnt(void) { static U8 RollCnt = 0; if (FALSE != v_test_flag(crusrollcnt_handle)) { RollCnt ++; RollCnt = (RollCnt & 0x03); crus_NetCrusSwitchStsReq.CCSwStsAlvRC = RollCnt; } else {  }  v_clear_flag(crusrollcnt_handle); }   /*************************************************** crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Function: crus_KeyStatusProcess crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Description: get crus key status crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Parameters: none crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Returns: none crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h $Create & Verlog:$ crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Author:chenshongming Date:2017-6-29 Version:V2.0 ****************************************************/ static void crus_KeyStatusProcess(void) { U8 res = 0; U16 ad1value = 0; res = ADM_GetDebounceValue(INDEX_ADM_CRUISE1, &ad1value);  if (CRUS_SIGNAL_SHORT_2_GND >= ad1value) { crus_KeyADSts = STATUS_CRUS1_SHORT_2_GND; } else if (CRUS_SIGNAL_SHORT_2_BAT <= ad1value) { crus_KeyADSts = STATUS_CRUS1_SHORT_2_BAT; } else if (ABS_SUB(ad1value, CRUS_SIGNAL_SET) <= CRUS_OFFSETRANGE) { crus_KeyADSts = STATUS_CRUS1_SET; } else if (ABS_SUB(ad1value, CRUS_SIGNAL_OFF) <= CRUS_OFFSETRANGE) { crus_KeyADSts = STATUS_CRUS1_OFF; } else if (ABS_SUB(ad1value, CRUS_SIGNAL_ON) <= CRUS_OFFSETRANGE) { crus_KeyADSts = STATUS_CRUS1_ON; } else if (ABS_SUB(ad1value, CRUS_SIGNAL_RESUME) <= CRUS_OFFSETRANGE) { crus_KeyADSts = STATUS_CRUS1_RESUME; } else if (ABS_SUB(ad1value, CRUS_SIGNAL_CANCEL) <= CRUS_OFFSETRANGE) { crus_KeyADSts = STATUS_CRUS1_CANCEL; } else { crus_KeyADSts = STATUS_CRUS1_OUTRANGE; } }  /*************************************************** crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Function: crus_KeyFaultCheck crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Description: fault detected crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Parameters:  crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Returns: none crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h $Create & Verlog:$ crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Author:chenshongming Date:2017-6-23 Version:V2.0 ****************************************************/ static void crus_KeyFaultCheck(void) { static U8 CrusSts = STATUS_CRUS1_ON;  if (CrusSts == crus_KeyADSts) { if ( CNT_FAULT_PERIOD <= crus_Counter) { if ((STATUS_CRUS1_SHORT_2_BAT == crus_KeyADSts) && (FAULT_CRUS1_NONE == Crus_FltSts)) { Crus_FltSts = FAULT_CRUS1_BAT; } else if ((STATUS_CRUS1_SHORT_2_GND == crus_KeyADSts) && (FAULT_CRUS1_NONE == Crus_FltSts)) { Crus_FltSts = FAULT_CRUS1_GND; } else if ((FAULT_CRUS1_NONE == Crus_FltSts)  && ((STATUS_CRUS1_SET == crus_KeyADSts)  ||(STATUS_CRUS1_RESUME == crus_KeyADSts)  ||(STATUS_CRUS1_CANCEL == crus_KeyADSts) ) ) { if ((CNT_STICKY_FAULT_PERIOD <= crus_Counter)) { Crus_FltSts = FAULT_CRUS1_STICKY; } else { crus_Counter++; }  } else if ((STATUS_CRUS1_OUTRANGE== crus_KeyADSts) && (FAULT_CRUS1_NONE == Crus_FltSts)) { Crus_FltSts = FAULT_CRUS1_OUTRANGE; } else { } } else { crus_Counter ++; } if(FAULT_CRUS1_NONE != Crus_FltSts) { crus_ChangeSignalStatus(FALSE); if(FAULT_CRUS1_OUTRANGE == Crus_FltSts) crus_NetCrusSwitchStsReq.CCSwStsSwDataIntgty = STATUS_CRUS_ILLEGARANGE; else crus_NetCrusSwitchStsReq.CCSwStsSwDataIntgty = STATUS_CRUS_FAILUREDETECTED;  } else { } } else { crus_Counter = 0; CrusSts = crus_KeyADSts; } }  /*************************************************** crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Function: crus_KeyFaultRemove crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Description: process key fault remove crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Parameters: none crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Returns: none crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h $Create & Verlog:$ crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Author:chenshongming Date:2017-6-23 Version:V1.0 ****************************************************/ static void crus_KeyFaultRemove(void) { static U8 CrusSts = 0; static U16 CrusHealCnt = 0;  switch (Crus_FltSts) { case FAULT_CRUS1_BAT: if (STATUS_CRUS1_SHORT_2_BAT != crus_KeyADSts) { if (CNT_CANCEL_BAT <= CrusHealCnt) { Crus_FltSts = FAULT_CRUS1_NONE; } else { CrusHealCnt ++; }  } else { CrusHealCnt = 0; }  break; case FAULT_CRUS1_GND: if (STATUS_CRUS1_SHORT_2_GND!= crus_KeyADSts) { if (CNT_CANCEL_GND <= CrusHealCnt) { Crus_FltSts = FAULT_CRUS1_NONE; } else { CrusHealCnt ++; }  } else { CrusHealCnt = 0; } break; case FAULT_CRUS1_OUTRANGE: if (STATUS_CRUS1_OUTRANGE != crus_KeyADSts) { if (CNT_CANCEL_OUTRANGE <= CrusHealCnt) { Crus_FltSts = FAULT_CRUS1_NONE; } else { CrusHealCnt ++; } } else { CrusHealCnt = 0; } break; case FAULT_CRUS1_STICKY: if (CrusSts != crus_KeyADSts) { Crus_FltSts = FAULT_CRUS1_NONE; } else { CrusHealCnt = 0; } break; default: break; } CrusSts = crus_KeyADSts; }  /*************************************************** crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Function: CRUS_SendNetSignal_10ms crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Description: send the signal crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Parameters: input: none crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Returns: none crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h $Create & Verlog:$ crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Author:Hejianjun Date:2016-11-29 Version:V1.0 ****************************************************/ void CRUS_SendNetSignal_10ms(void) { v_wr_bool(CCSwStsCanclSwA_handle, crus_NetCrusSwitchStsReq.CCSwStsCanclSwA); /*need update signal handle*/ v_wr_bool(CCSwStsOnSwA_handle, crus_NetCrusSwitchStsReq.CCSwStsOnSwA); v_wr_bool(CCSwStsRsmSwA_handle, crus_NetCrusSwitchStsReq.CCSwStsRsmSwA); v_wr_bool(CCSwStsSpdDecSwA_handle, crus_NetCrusSwitchStsReq.CCSwStsSpdDecSwA); v_wr_bool(CCSwStsSpdIncSwA_handle, crus_NetCrusSwitchStsReq.CCSwStsSpdIncSwA); v_wr_bool(CCSwStsSetSwA_handle, crus_NetCrusSwitchStsReq.CCSwStsSetSwA); v_wr_bool(CCSwStsDisDecSwA_handle, crus_NetCrusSwitchStsReq.CCSwStsDistDecSwA); v_wr_bool(CCSwStsDistIncSwA_handle, crus_NetCrusSwitchStsReq.CCSwStsDistIncSwA); v_wr_8(CCSwStsSwDataIntgty_handle, crus_NetCrusSwitchStsReq.CCSwStsSwDataIntgty); v_wr_8(CCSwStsPV_handle, crus_NetCrusSwitchStsReq.CCSwStsPV); v_wr_8(CCSwStsAlvRC_handle, crus_NetCrusSwitchStsReq.CCSwStsAlvRC); }  /*************************************************** crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Function: CRUS_GetFltStatus crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Description: check the CRUS Fault status crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Parameters:  crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Returns: RET_FAIL RET_INVAILD RET_OK crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h $Create & Verlog:$ crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Author:chenshongming Date:2017-06-27 Version:V2.0 ****************************************************/ U8 CRUS_GetFltStatus(PU8 sts) { U8 res =RET_OK;  if (FALSE == Crus_InitSts) { res = RET_FAIL; } else if (NULL_PTR == sts) { res = RET_INVALID; } else { *sts = Crus_FltSts; } return res; }  /*=========================================================================== crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h File Revision History(bottom to top:first revision to last revision) *============================================================================ crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h $Log:$ * crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h Rev: Userid: Date: Description *-------- ---------- --------- ------------------------------ * crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h V1.0 Hejianjun 2016-11-30 Initial crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h V1.1 liuyingying 2017-03-16 modify crus.c crus_cfg.h crus_info.inc crus_private.h crus_public.h V1.2 chenshongming 2017-6-24 modify *===========================================================================*/
