 /************************************************************************** | Copyright |------------------------------------------------------------------------ |Copyright(c) by YEEDON MultiMedia Co.LTD. All rights reserved. | | this software if furnished under a license and may be used and copied | only in accordance with the terms of such license and with the inclusion | of he above copyright notic.This software or any other copies thereof | may not be provided of otherwise made available to any other persion. | No title to and ownership of the software is hereby transferred. | | the information in this software is subject to change without notice | and should not be construed as a commitment by | YEEDON MultiMedia Co.LTD. | | YEEDON MultiMedia Co.LTD. assumes no responsibility for the use or reliability | of its Software on equipment which is not supported by YEEDON MultiMedia Co.LTD. |-------------------------------------------------------------- **************************************************************************/  /*--------------------------------------------------------------------------*/ /***************************************************************************** fl.c fl_cfg.h fl_info.inc FL_Input.c FL_Output.c fl_private.h fl_public.h FuelLevelAlgorithm_V2.c FuelLevelAlgorithm_V2.h FuelLevelAlgorithm_V2_data.c FuelLevelAlgorithm_V2_private.h FuelLevelAlgorithm_V2_types.h Copyright (C) 2016 ShenZhen Yeedon Media co.,LTD. All rights reserved. * fl.c fl_cfg.h fl_info.inc FL_Input.c FL_Output.c fl_private.h fl_public.h FuelLevelAlgorithm_V2.c FuelLevelAlgorithm_V2.h FuelLevelAlgorithm_V2_data.c FuelLevelAlgorithm_V2_private.h FuelLevelAlgorithm_V2_types.h File Name : FC_Input.c fl.c fl_cfg.h fl_info.inc FL_Input.c FL_Output.c fl_private.h fl_public.h FuelLevelAlgorithm_V2.c FuelLevelAlgorithm_V2.h FuelLevelAlgorithm_V2_data.c FuelLevelAlgorithm_V2_private.h FuelLevelAlgorithm_V2_types.h Description : FC_Input module middleware fl.c fl_cfg.h fl_info.inc FL_Input.c FL_Output.c fl_private.h fl_public.h FuelLevelAlgorithm_V2.c FuelLevelAlgorithm_V2.h FuelLevelAlgorithm_V2_data.c FuelLevelAlgorithm_V2_private.h FuelLevelAlgorithm_V2_types.h Author: liuyingying fl.c fl_cfg.h fl_info.inc FL_Input.c FL_Output.c fl_private.h fl_public.h FuelLevelAlgorithm_V2.c FuelLevelAlgorithm_V2.h FuelLevelAlgorithm_V2_data.c FuelLevelAlgorithm_V2_private.h FuelLevelAlgorithm_V2_types.h Date: 2016-12-21 ******************************************************************************/ /*------------------------------------------------------------------------*/ /*-----Head of file----------------------------------------------------------*/ /*------------------------------------------------------------------------*/ #include "yd_typedefs.h" #include "public.h" #include "adm_public.h" #include "nvm_public.h" #include "FuelLevelAlgorithm_V2.h" #include "com_public.h" /*************************************************** fl.c fl_cfg.h fl_info.inc FL_Input.c FL_Output.c fl_private.h fl_public.h FuelLevelAlgorithm_V2.c FuelLevelAlgorithm_V2.h FuelLevelAlgorithm_V2_data.c FuelLevelAlgorithm_V2_private.h FuelLevelAlgorithm_V2_types.h Function: FL_Input fl.c fl_cfg.h fl_info.inc FL_Input.c FL_Output.c fl_private.h fl_public.h FuelLevelAlgorithm_V2.c FuelLevelAlgorithm_V2.h FuelLevelAlgorithm_V2_data.c FuelLevelAlgorithm_V2_private.h FuelLevelAlgorithm_V2_types.h Description: Fuellevel Input signal process fl.c fl_cfg.h fl_info.inc FL_Input.c FL_Output.c fl_private.h fl_public.h FuelLevelAlgorithm_V2.c FuelLevelAlgorithm_V2.h FuelLevelAlgorithm_V2_data.c FuelLevelAlgorithm_V2_private.h FuelLevelAlgorithm_V2_types.h Parameters: none fl.c fl_cfg.h fl_info.inc FL_Input.c FL_Output.c fl_private.h fl_public.h FuelLevelAlgorithm_V2.c FuelLevelAlgorithm_V2.h FuelLevelAlgorithm_V2_data.c FuelLevelAlgorithm_V2_private.h FuelLevelAlgorithm_V2_types.h Returns:none fl.c fl_cfg.h fl_info.inc FL_Input.c FL_Output.c fl_private.h fl_public.h FuelLevelAlgorithm_V2.c FuelLevelAlgorithm_V2.h FuelLevelAlgorithm_V2_data.c FuelLevelAlgorithm_V2_private.h FuelLevelAlgorithm_V2_types.h $Create & Verlog:$ fl.c fl_cfg.h fl_info.inc FL_Input.c FL_Output.c fl_private.h fl_public.h FuelLevelAlgorithm_V2.c FuelLevelAlgorithm_V2.h FuelLevelAlgorithm_V2_data.c FuelLevelAlgorithm_V2_private.h FuelLevelAlgorithm_V2_types.h Author:liuyingying Date:2016-12-21 Version:V1.0 ****************************************************/ void FL_Input(void) { U8 res = RET_FAIL; U16 batAdcValue = 0; U32 tempValue1 = 0; U32 tempValue2 = 0; U16 RegValue; /*NOTE:gASI_FuelSensorADAverage should be res value now it is voltage value*/ res = ADM_GetDebounceValue(INDEX_ADM_FUEL, &gASI_FuelSensorADAverage); res = ADM_GetDebounceValue(INDEX_ADM_BATT, &batAdcValue); tempValue1 = 600*gASI_FuelSensorADAverage; tempValue2 = 4*batAdcValue - gASI_FuelSensorADAverage; gASI_FuelSensorADAverage = (U16) ((tempValue1/tempValue2) *10); //RegValue = (U16) ((tempValue1/tempValue2) *10); /*--------------------------------------------------------- @-----LYY-NOTE--------------------------------------------  the final gASI_FuelSensorADAverage:  after get gASI_FuelSensorADAverage here should do convert to res  then multiple 10 ----------------------------------------------------------*/ gASI_VehicleSpeed = v_rd_16(VehSpdAvgDrvn_handle); gASI_VehicleSpeedV = v_rd_8(VehSpdAvgDrvnV_handle); gASI_EngineSpeed = v_rd_16(EnSpd_handle); gASI_EngineSpeedStatus = v_rd_8(EnSpdSts_handle); }  /*=========================================================================== fl.c fl_cfg.h fl_info.inc FL_Input.c FL_Output.c fl_private.h fl_public.h FuelLevelAlgorithm_V2.c FuelLevelAlgorithm_V2.h FuelLevelAlgorithm_V2_data.c FuelLevelAlgorithm_V2_private.h FuelLevelAlgorithm_V2_types.h File Revision History(bottom to top:first revision to last revision) *============================================================================ fl.c fl_cfg.h fl_info.inc FL_Input.c FL_Output.c fl_private.h fl_public.h FuelLevelAlgorithm_V2.c FuelLevelAlgorithm_V2.h FuelLevelAlgorithm_V2_data.c FuelLevelAlgorithm_V2_private.h FuelLevelAlgorithm_V2_types.h $Log:$ * fl.c fl_cfg.h fl_info.inc FL_Input.c FL_Output.c fl_private.h fl_public.h FuelLevelAlgorithm_V2.c FuelLevelAlgorithm_V2.h FuelLevelAlgorithm_V2_data.c FuelLevelAlgorithm_V2_private.h FuelLevelAlgorithm_V2_types.h Rev: Userid: Date: Description *-------- ---------- --------- ------------------------------ * fl.c fl_cfg.h fl_info.inc FL_Input.c FL_Output.c fl_private.h fl_public.h FuelLevelAlgorithm_V2.c FuelLevelAlgorithm_V2.h FuelLevelAlgorithm_V2_data.c FuelLevelAlgorithm_V2_private.h FuelLevelAlgorithm_V2_types.h V1.0 liuyingying 2016-12-21 Initial * *===========================================================================*/
