/***************************************************************************** ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Copyright (C) 2016 ShenZhen Yeedon Media co.,LTD. All rights reserved. * ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h File Name : ass.c ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Description : ASS API application ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Author: Hejianjun ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Date: 2016-12-03 ******************************************************************************/  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Files for including */ #include "ass_info.inc"  static BOOL ass_NetASSInhBtnAReq; /*将按键状态发送到网络*/ static BOOL ass_InitSts; /*模块初始化*/ static U8 ass_Gcounter = 0; //static BOOL insStopStartSysEnPrm = FALSE;   /*************************************************** ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Function: ASS_Init ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Description: ASS module initialized ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Parameters: none ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Returns: none ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h $Create & Verlog:$ ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Author:Hejianjun Date:2016-12-03 Version:V1.1 ****************************************************/ void ASS_Init(void) {  ass_NetASSInhBtnAReq = FALSE;   ass_InitSts = IOM_GetModuleStatus(); if(TRUE == ass_InitSts) { IOM_SetOutPutLevel(INDEX_IOOUTPUT_ASSLED,LOW); } else { }  }  /*************************************************** ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Function: ASS_Process_5ms ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Description: the process of the ASS module ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Parameters: none ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Returns: none ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h $Create & Verlog:$ ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Author:Hejianjun Date:2016-12-03 Version:V1.0  ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Author:LiuYingying Date:2017-02-22 Version:V1.1 ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h $Log: Modify Process flow Pwrmode condition move into ass_JudgeXX Function   ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Author:zhangxianxiang Date:2017-06-23 Version:V2.0 Log: USE IOM_SetOutPutLevel TO OUTPUT ASS SWITCH STATUS  ****************************************************/ void ASS_Process_100ms(void) { U8 level = FALSE; U8 res = RET_FAIL; U8 pwrMode = PWR_OFF; BOOL netAssInhBtnLampOnReq = FALSE; static BOOL LampOnReq = FALSE;  if (TRUE == ass_InitSts) { res = PWR_GetPwrMode(&pwrMode); if ((PWR_RUN ==pwrMode ||PWR_CRANK ==pwrMode) && (TRUE == DIAG_GetStopStartSysEn())) { COM_GetSignalValue_BOOL(INDEX_COM_RS_ASSINHBTNLAMPON, &netAssInhBtnLampOnReq);  if (RET_OK == IOM_GetInputLevel(INDEX_IOINTPUT_ASSBUTTON, &level)) { ass_NetASSInhBtnAReq = (!level); } else { /*DO NOTHING*/ } } else {  netAssInhBtnLampOnReq = LOW; }   if((LampOnReq != netAssInhBtnLampOnReq) && (TRUE == DIAG_GetStopStartSysEn())) { LampOnReq = netAssInhBtnLampOnReq; IOM_SetOutPutLevel(INDEX_IOOUTPUT_ASSLED,netAssInhBtnLampOnReq); } else { /*DO NOTHING*/ } } else { /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr do nothing */ }   }  /*************************************************** ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Function: ASS_GetInitStatus ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Description: get the ASS module initialized status ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Parameters: none ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Returns: TRUE or FALSE ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h $Create & Verlog:$ ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Author:Hejianjun Date:2016-12-03 Version:V1.1 ****************************************************/ BOOL ASS_GetInitStatus(void) { return ass_InitSts; }   /*************************************************** ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Function: ASS_SendNetSignal_5ms ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Description: update the ASS switch status with the period of 5ms ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Parameters: input: none ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Returns: none ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h $Create & Verlog:$ ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Author:Hejianjun Date:2016-12-03 Version:V1.1 ****************************************************/ void ASS_SendNetSignal_5ms(void) { v_wr_bool(ASSInhBtnA_handle, ass_NetASSInhBtnAReq); /*need update signal handle*/  }   /*=========================================================================== ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h File Revision History(bottom to top:first revision to last revision) *============================================================================ ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h $Log:$ * ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h Rev: Userid: Date: Description *-------- ---------- --------- ------------------------------ * ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h V1.0 Hejianjun 2016-12-03 Initial ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h V1.1 liuyingying 2017-02-22 modify ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h V1.2 liuyingying 2017-03-16 modify ass.c ass_cfg.h ass_info.inc ass_private.h ass_public.h V2.0 zhangxianxiang 2017-06-23 modify $ log add ass_Gcounter,delete some variables not used *===========================================================================*/
