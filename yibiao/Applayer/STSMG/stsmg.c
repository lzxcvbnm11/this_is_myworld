/***************************************************************************** stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Copyright (C) 2016 ShenZhen Yeedon Media co.,LTD. All rights reserved. * stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h File Name : stsmg.c stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Description : API layer source file of STSMG. stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Author: Qinhui.Shen stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Date: 2016-11-29 ******************************************************************************/  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Files for including */ #include "stsmg_info.inc"  /*--------------- Global variable definition and initialization -----------------*/ #if (1 == OSTM_EVT_EN) STSMG_EventDataAll_ST Stsmg_EventVar; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr INDEX_STSMG_NULL, 0 */ #else  static STSMG_EventDataAll_ST Stsmg_EventVar; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr INDEX_STSMG_NULL, 0 */ #endif static U8 Stsmg_InitSts = FALSE;   /*---------------------- Implementation of module ---------------------*/ /*************************************************** stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Function: STSMG_Init stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Description: STSMG initialization. stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Parameters: none stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Returns:none * stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h $Create & Verlog:$ stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Author:Qinhui.Shen Date:2016-11-29 Version:V1.0 ****************************************************/ void STSMG_Init(void) { memset(&Stsmg_EventVar,0,sizeof(STSMG_EventDataAll_ST));  Stsmg_InitSts = TRUE; }  /*************************************************** stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Function: STSMG_GetEventLed stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Description: LED module get event from STSMG. stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Parameters: stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h output: stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h pValue- pointer of StsmgEventData_ST type variable. stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Returns: stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h FALSE(0): get event fail. stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h TRUE(1): get event success. stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h $Create & Verlog:$ stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Author:Qinhui.Shen Date:2016-10-14 Version:V1.0 stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Author:Qinhui.Shen Date:2016-10-14 Version:V1.1 stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h $log: Adding 'else', modify return value. ****************************************************/ U8 STSMG_GetEventLed(LedEventData_ST *pValue) {  U8 k = 0; U8 res = RET_FAIL;  if(FALSE == Stsmg_InitSts) { res = RET_FAIL; } else if (NULL_PTR == pValue) { res = RET_INVALID; } else { *pValue = Stsmg_EventVar.led; res = RET_OK; }  return res; }    /*************************************************** stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Function: STSMG_Process_20ms stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Description: STSMG module process function. stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Parameters: none stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Returns:none * stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h $Create & Verlog:$ stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Author:Qinhui.Shen Date:2016-11-29 Version:V1.0 stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Author:Qinhui.Shen Date:2016-10-14 Version:V1.1 stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h $log: Adding 'else'. ****************************************************/ void STSMG_Process_20ms(void) { EVT_JudgeProcess_20ms(&Stsmg_EventVar); }  U8 STSMG_GetStopStartEventLed(U8 *pValue) { U8 res = RET_FAIL;  StsmgEvent_ST evt;  evt.led = INDEX_LED_NULL; evt.msg= INDEX_MSG_NULL; evt.warn= INDEX_WARN_NULL;  if (FALSE == Stsmg_InitSts) { res = RET_FAIL; } else if (NULL_PTR == pValue) { res = RET_INVALID; } else {  EVT_GetJudgeStopStartActive(&evt); if (INDEX_LED_NULL == evt.led)  { *pValue = 0; } else { *pValue = 1; }  }  return RET_OK; }   /*----------------- End of Module -----------------*/  /*=========================================================================== stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h File Revision History(bottom to top:first revision to last revision) *============================================================================ stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h $Log:$ * stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h Rev: Userid: Date: Description *-------- ---------- --------- ------------------------------ * stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h V1.0 Qinhui.Shen 2016-11-29 Initial stsmg.c stsmg_cfg.h stsmg_info.inc stsmg_private.h stsmg_public.h stsmgmsgPriyTab.h stsmgwarnPriyTab.h V1.1 Qinhui.Shen 2016-12-16 modify * *===========================================================================*/
