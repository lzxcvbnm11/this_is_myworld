/***************************************************************************** hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Copyright (C) 2016 ShenZhen Yeedon Media co.,LTD. All rights reserved. * hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h File Name : hsd.c hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Description : HSD module Application hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Author: Hejianjun hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Date: 2016-12-03 ******************************************************************************/  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Files for including */ #include "hsd_info.inc"  static BOOL hsd_InitSts = FALSE; static BOOL hsd_GNetAccryStatus = FALSE; static BOOL hsd_GNetRunCrankStatus = FALSE;  static U8 hsd_GCounter = 0; /*************************************************** hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Function: HSD_Init hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Description: HSD module initialized hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Parameters: none hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Returns: none hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h $Create & Verlog:$ hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Author:Hejianjun Date:2016-12-01 Version:V1.3 ****************************************************/ void HSD_Init(void) { hsd_GNetAccryStatus = FALSE; hsd_GNetRunCrankStatus = FALSE; hsd_InitSts = FALSE; hsd_GCounter = 0;  hsd_InitSts = IOM_GetModuleStatus(); /*get IOM module status */ }  /*************************************************** hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Function: HSD_Process_100ms hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Description: the process of the HSD module hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Parameters: none hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Returns: none hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h $Create & Verlog:$ hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Author:Hejianjun Date:2016-12-01 Version:V1.3 ****************************************************/ void HSD_Process_100ms(void) { U8 PwrSts; U8 res;  if (TRUE == hsd_InitSts) { res = PWR_GetPwrMode(&PwrSts); if (PWR_UNKNOWN != PwrSts) { #if (0 == PDC_SYNC_TEST) { IOM_SetOutPutLevel(INDEX_IOOUTPUT_IGNHSD, Hsd_Matrix[PwrSts].ign_HSD); IOM_SetOutPutLevel(INDEX_IOOUTPUT_ACCHSD, Hsd_Matrix[PwrSts].acc_HSD); } #endif hsd_GNetAccryStatus = Hsd_Matrix[PwrSts].ipcArryA; hsd_GNetRunCrankStatus = Hsd_Matrix[PwrSts].ipcRunCrkA; } else { }  } else { hsd_GNetAccryStatus = FALSE; hsd_GNetRunCrankStatus= FALSE; }  }  /*************************************************** hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Function: hsd_outPutProcess_5ms hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Description: the output control of the IGN and ACC with the period of 5ms hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Parameters: input: none hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Returns: none hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h $Create & Verlog:$ hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Author:Hejianjun Date:2016-12-03 Version:V1.3 ****************************************************/ static void hsd_outPutProcess_5ms(void) { U8 PwrSts; U8 res;  res = PWR_GetPwrMode(&PwrSts); if ((RET_OK== res)&&(PWR_UNKNOWN != PwrSts)) { IOM_SetOutPutLevel(INDEX_IOOUTPUT_IGNHSD, Hsd_Matrix[PwrSts].ign_HSD); IOM_SetOutPutLevel(INDEX_IOOUTPUT_ACCHSD, Hsd_Matrix[PwrSts].acc_HSD); hsd_GNetAccryStatus = Hsd_Matrix[PwrSts].ipcArryA; hsd_GNetRunCrankStatus = Hsd_Matrix[PwrSts].ipcRunCrkA; } else { } }  /*************************************************** hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Function: hsd_FeedBackProcess_30ms hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Description: the ADC feedback output to check the output of ACC and IGN hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Parameters: input: none hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Returns: none hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h $Create & Verlog:$ hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Author:Hejianjun Date:2016-12-01 Version:V1.3 ****************************************************/  /*************************************************** hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Function: HSD_SendNetSignal_5ms hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Description: the ADC feedback output to check the output of ACC and IGN hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Parameters: input: none hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Returns: none hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h $Create & Verlog:$ hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Author:Hejianjun Date:2016-12-01 Version:V1.3 ****************************************************/ void HSD_SendNetSignal_5ms(void) { v_wr_bool(IPCAccryA_handle, hsd_GNetAccryStatus); /*need update signal handle*/ v_wr_bool(IPCRunCrkA_handle, hsd_GNetRunCrankStatus); /*need update signal handle*/ }  /*************************************************** hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Function: hsd_Diag_50ms hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Description: HSD DTC reserved(V2) hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Parameters: none hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Returns: none hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h $Create & Verlog:$ hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Author:Hejianjun Date:2016-12-01 Version:V1.3 ****************************************************/  /*************************************************** hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Function: HSD_GetInitStatus hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Description: get the HSD module initialized status hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Parameters: none hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Returns: TRUE or FALSE hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h $Create & Verlog:$ hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Author:Hejianjun Date:2016-12-01 Version:V1.3 ****************************************************/ BOOL HSD_GetInitStatus(void) { return hsd_InitSts; }   /*=========================================================================== hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h File Revision History(bottom to top:first revision to last revision) *============================================================================ hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h $Log:$ * hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h Rev: Userid: Date: Description *-------- ---------- --------- ------------------------------ * hsd.c hsd_cfg.h hsd_info.inc hsd_private.h hsd_public.h V1.3 Hejianjun 2016-12-01 Initial * *===========================================================================*/
