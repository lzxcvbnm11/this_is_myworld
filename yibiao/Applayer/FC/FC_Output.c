 /************************************************************************** | Copyright |------------------------------------------------------------------------ |Copyright(c) by YEEDON MultiMedia Co.LTD. All rights reserved. | | this software if furnished under a license and may be used and copied | only in accordance with the terms of such license and with the inclusion | of he above copyright notic.This software or any other copies thereof | may not be provided of otherwise made available to any other persion. | No title to and ownership of the software is hereby transferred. | | the information in this software is subject to change without notice | and should not be construed as a commitment by | YEEDON MultiMedia Co.LTD. | | YEEDON MultiMedia Co.LTD. assumes no responsibility for the use or reliability | of its Software on equipment which is not supported by YEEDON MultiMedia Co.LTD. |-------------------------------------------------------------- **************************************************************************/  /*--------------------------------------------------------------------------*/ /***************************************************************************** avgFuelCsump_V2.c avgFuelCsump_V2.h avgFuelCsump_V2_data.c avgFuelCsump_V2_private.h avgFuelCsump_V2_types.h FC_Input.c FC_Output.c Copyright (C) 2016 ShenZhen Yeedon Media co.,LTD. All rights reserved. * avgFuelCsump_V2.c avgFuelCsump_V2.h avgFuelCsump_V2_data.c avgFuelCsump_V2_private.h avgFuelCsump_V2_types.h FC_Input.c FC_Output.c File Name : FC_Output.c avgFuelCsump_V2.c avgFuelCsump_V2.h avgFuelCsump_V2_data.c avgFuelCsump_V2_private.h avgFuelCsump_V2_types.h FC_Input.c FC_Output.c Description : FC_Output signal proccess avgFuelCsump_V2.c avgFuelCsump_V2.h avgFuelCsump_V2_data.c avgFuelCsump_V2_private.h avgFuelCsump_V2_types.h FC_Input.c FC_Output.c Author: liuyingying avgFuelCsump_V2.c avgFuelCsump_V2.h avgFuelCsump_V2_data.c avgFuelCsump_V2_private.h avgFuelCsump_V2_types.h FC_Input.c FC_Output.c Date: 2016-12-21 ******************************************************************************/ /*------------------------------------------------------------------------*/ /*-----Head of file----------------------------------------------------------*/ /*------------------------------------------------------------------------*/ #include "avgFuelCsump_V2.h" #include "public.h" #include "nvm_public.h" #include "com_public.h" #include "pwr_public.h"  /*************************************************** avgFuelCsump_V2.c avgFuelCsump_V2.h avgFuelCsump_V2_data.c avgFuelCsump_V2_private.h avgFuelCsump_V2_types.h FC_Input.c FC_Output.c Function: FC_Output avgFuelCsump_V2.c avgFuelCsump_V2.h avgFuelCsump_V2_data.c avgFuelCsump_V2_private.h avgFuelCsump_V2_types.h FC_Input.c FC_Output.c Description: Fuel consumption output avgFuelCsump_V2.c avgFuelCsump_V2.h avgFuelCsump_V2_data.c avgFuelCsump_V2_private.h avgFuelCsump_V2_types.h FC_Input.c FC_Output.c Parameters: none avgFuelCsump_V2.c avgFuelCsump_V2.h avgFuelCsump_V2_data.c avgFuelCsump_V2_private.h avgFuelCsump_V2_types.h FC_Input.c FC_Output.c Returns:none avgFuelCsump_V2.c avgFuelCsump_V2.h avgFuelCsump_V2_data.c avgFuelCsump_V2_private.h avgFuelCsump_V2_types.h FC_Input.c FC_Output.c $Create & Verlog:$ avgFuelCsump_V2.c avgFuelCsump_V2.h avgFuelCsump_V2_data.c avgFuelCsump_V2_private.h avgFuelCsump_V2_types.h FC_Input.c FC_Output.c Author:liuyingying Date:2016-12-21 Version:V1.0 ****************************************************/ void FC_Output(void) { static U8 pwrMode; U8 curMode;  PWR_GetPwrMode(&curMode); if(((PWR_OFF == curMode) || (PWR_ACC == curMode)) && ((PWR_RUN== pwrMode) ||  (PWR_CRANK == pwrMode))) {  NVM_SetParas(INDEX_NVM_ESUM_FUEL,(PU8)&e_sum_fuel,4); NVM_SetParas(INDEX_NVM_ESUM2_FUEL,(PU8)&e_sum2_fuel,4); }  pwrMode = curMode;    }  void FC_NetSignal_OutPut(void) { U32 gAFC_u32sumDist1_Send; U32 gAFC_u32sumDist2_Send; U32 e_sum_fuel_Send; U32 e_sum2_fuel_Send;  v_wr_8(AvgFuelCsump_handle,gAFC_u8avgFuelCsump2); v_wr_8(AvgFuelCsumpV_handle,gAFC_u8avgFuelCsumpV2); #if DEBUG_FL_ALGORITHM //v_wr_32(gAFC_u32sumDist1_handle,gAFC_u32sumDist1); //v_wr_32(gAFC_u32sumDist2_handle,gAFC_u32sumDist2); //v_wr_32(e_sum_fuel_handle,e_sum_fuel); //v_wr_32(e_sum2_fuel_handle,e_sum2_fuel);  //e_sum_fuel_Send = 0x555555; //e_sum2_fuel_Send = 0xAAAAAA;   gAFC_u32sumDist1_Send = (((gAFC_u32sumDist1 & 0x0000ff) << 16) | (gAFC_u32sumDist1 & 0x00ff00) | ((gAFC_u32sumDist1 & 0xff0000) >> 16));    gAFC_u32sumDist2_Send = (((gAFC_u32sumDist2 & 0x0000ff) << 16) | (gAFC_u32sumDist2 & 0x00ff00) | ((gAFC_u32sumDist2 & 0xff0000) >> 16));   e_sum_fuel_Send = (((e_sum_fuel & 0x0000ff) << 16) | (e_sum_fuel & 0x00ff00) | ((e_sum_fuel & 0xff0000) >> 16)); e_sum2_fuel_Send = (((e_sum2_fuel & 0x0000ff) << 16) | (e_sum2_fuel & 0x00ff00) | ((e_sum2_fuel & 0xff0000) >> 16));     v_wr_bytes(gAFC_u32sumDist1_handle,&gAFC_u32sumDist1_Send,3,0); v_wr_bytes(gAFC_u32sumDist2_handle,&gAFC_u32sumDist2_Send,3,0); v_wr_bytes(e_sum_fuel_handle,&e_sum_fuel_Send,3,0); v_wr_bytes(e_sum2_fuel_handle,&e_sum2_fuel_Send,3,0);  //v_rd_bytes(VehOdo_handle,&odo_NetVehOdo,0x03,0x00);  #endif   }  U8 FC_GetFuelConsumption1(void) { return gAFC_u8avgFuelCsump; } U8 FC_GetFuelConsumptionV1(void) { return gAFC_u8avgFuelCsumpV; } U8 FC_GetFuelConsumption2(void) { return gAFC_u8avgFuelCsump2; } U8 FC_GetFuelConsumptionV2(void) { return gAFC_u8avgFuelCsumpV2; }  /*=========================================================================== avgFuelCsump_V2.c avgFuelCsump_V2.h avgFuelCsump_V2_data.c avgFuelCsump_V2_private.h avgFuelCsump_V2_types.h FC_Input.c FC_Output.c File Revision History(bottom to top:first revision to last revision) *============================================================================ avgFuelCsump_V2.c avgFuelCsump_V2.h avgFuelCsump_V2_data.c avgFuelCsump_V2_private.h avgFuelCsump_V2_types.h FC_Input.c FC_Output.c $Log:$ * avgFuelCsump_V2.c avgFuelCsump_V2.h avgFuelCsump_V2_data.c avgFuelCsump_V2_private.h avgFuelCsump_V2_types.h FC_Input.c FC_Output.c Rev: Userid: Date: Description *-------- ---------- --------- ------------------------------ * avgFuelCsump_V2.c avgFuelCsump_V2.h avgFuelCsump_V2_data.c avgFuelCsump_V2_private.h avgFuelCsump_V2_types.h FC_Input.c FC_Output.c V1.0 liuyingying 2016-12-21 Initial * *===========================================================================*/
