 /************************************************************************** | Copyright |------------------------------------------------------------------------ |Copyright(c) by YEEDON MultiMedia Co.LTD. All rights reserved. | | this software if furnished under a license and may be used and copied | only in accordance with the terms of such license and with the inclusion | of he above copyright notic.This software or any other copies thereof | may not be provided of otherwise made available to any other persion. | No title to and ownership of the software is hereby transferred. | | the information in this software is subject to change without notice | and should not be construed as a commitment by | YEEDON MultiMedia Co.LTD. | | YEEDON MultiMedia Co.LTD. assumes no responsibility for the use or reliability | of its Software on equipment which is not supported by YEEDON MultiMedia Co.LTD. |-------------------------------------------------------------- **************************************************************************/  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Files for including */ #include "slf_info.inc"  /************variable*********************************/ static U8 slf_InitSts = FALSE;  static BOOL slf_fault_status = FALSE; static U16 Flt_Cnt = 0;  /*************************************************** slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Function: SLF_Init slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Description: SLF Init slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Parameters: none slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Returns: NO slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h $Create & Verlog:$ slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Author:liuyingying Date:2017-6-29 Version:V2.0 ****************************************************/ void SLF_Init(void) { slf_fault_status = FALSE; slf_InitSts = ADM_GetInitStatus();  }   /*************************************************** slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Function: slf_EVT_Process_20ms slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Description: processing TOCK/TOCK event slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Parameters: none slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Returns: NO slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h $Create & Verlog:$ slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Author:liuyingying Date:2017-6-29 Version:V2.0 ****************************************************/  static void slf_EVT_Process_20ms(void) { #if (0 == OSTM_EVT_EN) EVT_JudgeLeftDirLamp(); EVT_JudgeRightDirLamp(); #endif }  /*************************************************** slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Function: SLF_Process_20ms slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Description: SLF process slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Parameters: none slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Returns: NO slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h $Create & Verlog:$ slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Author:liuyingying Date:2017-6-29 Version:V2.0 ****************************************************/ void SLF_Process_20ms(void) { U16 res = RET_FAIL;  U16 slf_ADCValue;  res = ADM_GetDebounceValue(INDEX_ADM_SRS, &slf_ADCValue);  if ((TRUE == slf_InitSts) && (RET_OK == res)) { if (SLF_ADC_RANG_LOW > slf_ADCValue) { if (SLF_FLT_MONITOR_CNT >= Flt_Cnt) { Flt_Cnt ++; } else { slf_fault_status = TRUE; } } else { Flt_Cnt = 0; slf_fault_status = FALSE; } slf_EVT_Process_20ms(); }  else { /*DO nothing*/ }  }  /*************************************************** slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Function: SLF_GetSrsLedFltStatus slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Description: Get SLF Falut status slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Parameters: *status slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Returns: res slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h $Create & Verlog:$ slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h Author:liuyingying Date:2017-6-29 Version:V2.0 ****************************************************/ U8 SLF_GetSrsLedFltStatus(PU8 status) { U8 res = RET_OK;  if (FALSE == slf_InitSts) { res = RET_FAIL; } else if (NULL_PTR == status) { res = RET_INVALID; } else { *status = slf_fault_status; }  return res; }  /*=========================================================================================================== slf.c slf_cfg.h slf_info.inc slf_private.h slf_public.h File Revision History (bottom to top:first revision to last revision) * *============================================================================================================ *$Log:$ *  *Rev: Userid: date: description *----- ----- ----------- ----------- *V2.0 liuyingying 2017-06-29 initial ============================================================================================================*/
