/****************************************************************************** lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c CECT-MOTOR All rights reserved * ****************************************************************************** lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c File name: s_dsm_check_copyright.c * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c Description: This is the copyright check source file. * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c Author: zhangwj * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c Version: v1.00.10 * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c modification history * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c -------------------- * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c v0.01.00 2010/07/28, zhangwj create this file. * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c v0.01.01 2010/08/05, Q AC validation passed. * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c v1.00.00 2010/08/06, submission to test. * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c v1.00.01 2010/08/20, sa & iocbi service modified and submission to test. * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c v1.00.02 2010/08/30, run_iteration reset & SA NRC_7E bugs fixed. * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c v1.00.03 2010/09/24, modify sa&iocbi service, s_dsm_indication() and * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c s_dsm_task() function. * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c v1.00.04 2010/10/27, Modify DSM configuration file, and Q AC validation * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c passed. * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c v1.00.05 2010/11/17, Modify SA service callout and s_dsm_ckeck_cfg * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c function. * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c v1.00.06 2010/12/20, DSM functions add S_FUNC_PRE and S_FUNC_SUF * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c macro definition. * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c v1.00.07 2011/04/07, Modify s_dsm_get_buffer() using and move the * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c s_dsm_reset(DSM_RESET_TYPE) function form callout * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c to s_dsm_task. * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c v1.00.08 2011/08/05, Add RSDBI/RDBPI/DDDI/ATP/SDT/ROE/LC service * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c function. * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c v1.00.09 2012/08/17, 1)Replace all const struct handle declaration with * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c const struct *. * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c 2)Add S_DSM_ROM macro definition before const * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c declaration. * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c 3)Change macro definition S_ROM_PTR to S_DSM_ROM_PTR* lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c v1.00.10 2012/08/28, 1)Implementing reading multi data identifier in one * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c RDBI service request. * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c * ******************************************************************************/  #include "s_dsm_api.h" #include "s_dsm_check_copyright.h"  S_DSM_ROM volatile s_uint8 default_string[DEFAULT_STRING_SIZE] = {(s_uint8)'C',(s_uint8)'E',(s_uint8)'T',(s_uint8)'C',(s_uint8)'M',(s_uint8)'O',(s_uint8)'T',(s_uint8)'O',(s_uint8)'R'};  /****************************************************************************** lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c Function: s_dsm_check_input_string lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c  lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c Description: lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c This function is used to check whether input string is equal "SAIC". lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c  lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c Parameter: lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c indata[IN]: lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c The input string that will be checked. * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c Return: lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c S_TRUE: The input string isn't equal to "SAIC". lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c S_FALSE: The input string is equal to "SAIC". lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c  ******************************************************************************/ S_FUNC_PRE s_bool S_FUNC_SUF  s_dsm_check_input_string( const volatile s_dsm_block lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c const indata ) { s_uint8 keyword[COPYRIGHT_SEED_SIZE] = {(s_uint8)'S',(s_uint8)'A',(s_uint8)'I',(s_uint8)'C'};  s_uint16 keywordcnt; s_bool ret_state = S_FALSE;  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr the size fof the input string is invalid, returns true */ if (COPYRIGHT_SEED_SIZE != (indata->size)) { ret_state = S_TRUE; } else { /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr check whether input string is equal to "saic" */ for (keywordcnt = 0; keywordcnt < COPYRIGHT_SEED_SIZE; keywordcnt++) { /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr if there is one char in input string is invalid, returns true */ if (keyword[keywordcnt] != indata->address[keywordcnt]) { ret_state = S_TRUE; } else { } } }  return (ret_state); }   /****************************************************************************** lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c Function: s_dsm_get_copyright_id lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c  lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c Description: lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c This function is used to get the DSM version information. lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c  lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c Parameter: lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c outdata[OUT]: lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c Current DSM version information. * lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c Return: lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c None. lib s_dsm_api.h s_dsm_callout.c s_dsm_cfg.c s_dsm_cfg.h s_dsm_check_copyright.c s_dsm_check_copyright.h s_dsm_dtc.h s_sa.c  ******************************************************************************/ S_FUNC_PRE void S_FUNC_SUF  s_dsm_get_copyright_id( volatile s_dsm_block_handle outdata ) { s_uint8 copyrightid[COPYRIGHT_KEY_SIZE] = {(s_uint8)'C',(s_uint8)'E',(s_uint8)'T',(s_uint8)'C',(s_uint8)'M',(s_uint8)'O',(s_uint8)'T',(s_uint8)'O',(s_uint8)'R' ,(s_uint8)'0',(s_uint8)'0',(s_uint8)'1'}; volatile s_uint8 *key = s_dsm_get_buffer(); s_uint8 i;  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr copy the version to rambuffer */ if (COPYRIGHT_KEY_SIZE < s_dsm_get_buffer_size())  {  for(i = 0; i < COPYRIGHT_KEY_SIZE; i++)  { key[i] = copyrightid[i]; } } else { }  outdata->address = key; outdata->size = COPYRIGHT_KEY_SIZE;  return; }
