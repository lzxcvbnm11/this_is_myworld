#include "r_typedefs.h" /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Renesas basic types, e.g. uint32_t */ #include "r_bsp_api.h" /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Board support package */ #include "r_ddb_api.h" #include "r_cdi_api.h" #include "r_wm_api.h" #include "r_drw2d_os.h" #include "r_drw2d_api.h" #include "img_format.h" #include "font.h" #include "font_data.h" #include "r_config_drw2d.h" #include "r_drw2d_ctx_cpu.h"  #include <string.h> #include "hmi_manager.h" #include "stsmg_public.h" #include "rtc_public.h" #include "odo_public.h" #include "msg_public.h" #include "img_drw2d.h" #include "acc_public.h"   extern const Font_t FontArial19;  //extern const FontPos_t _FontArial19Pos[]; const uint8_t warn_NULL[] = ""; /*INDEX_STSMG_NULL*/ const uint8_t warn_CCAON[] = "CRUS_CCAON"; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr null ,INDEX_STSMG_CRUS_CCAON*/ const uint8_t warn_CCAOFF[] = "CRUS_CCAOFF"; /*null,INDEX_STSMG_CRUS_CCAOFF*/ const uint8_t warn_CCAFAULT[] = "Cruise Ctrl Fail"; /*巡航控制故障，请维修！INDEX_STSMG_CRUS_CCAFAULT*/ const uint8_t warn_COOLANTHIGH1[] = "COOLANT_HIGH1"; /*null,INDEX_STSMG_COOLANT_HIGH1*/ const uint8_t warn_COOLANTHIGH2[] = "Eng Cool Temp High"; /*发动机冷却液温度高，请注意,INDEX_STSMG_COOLANT_HIGH2*/  const uint8_t warn_EMISLWM[] = "Engine Fault"; /*发动机排放故障 请维修INDEX_STSMG_IGN_EMIS_LWM*/ const uint8_t warn_EMISLM[] = "Engine Fault"; /*发动机排放故障 请维修,INDEX_STSMG_IGN_EMIS_LM*/ const uint8_t warn_EMIS2[] = "IGN_EMIS2"; /*null,INDEX_STSMG_IGN_EMIS2*/ const uint8_t warn_EMIS3[] = "IGN_EMIS3"; /*null,INDEX_STSMG_IGN_EMIS3*/ const uint8_t warn_EMIS4[] = "IGN_EMIS4"; /*null,INDEX_STSMG_IGN_EMIS4*/ const uint8_t warn_IGNFAULT[] = "Check Engine"; /*发动机故障 请维修INDEX_STSMG_IGN_FAULT*/  const uint8_t warn_CHARGE_LWM[] = "Alternator Fail"; /*发电机故障 请维修INDEX_STSMG_ACC_ALTERNATCHARGE_LWM*/ const uint8_t warn_CHARGE_L[] = "ACC_CHARGE_L"; /*null,INDEX_STSMG_ACC_ALTERNATCHARGE_L*/ const uint8_t warn_ALTERNATOR_LWM[] ="Alternator Fail";/*发电机故障 请维修INDEX_STSMG_ACC_ALTERNATFAIL_LWM*/ const uint8_t warn_ALTERNATOR_L[] = "ACC_ALTERNATOR_L";/*null,INDEX_STSMG_ACC_ALTERNATFAIL_LWM*/ const uint8_t warn_LOADSHED_LWM[] = "Alternator Fail";/*发电机故障 请维修,INDEX_STSMG_ACC_ALTERNATFAIL_LWM*/ const uint8_t warn_LOADSHED_LM[] = "Alternator Fail";/*发电机故障 请维修,INDEX_STSMG_ACC_ALTERNATFAIL_LWM*/ const uint8_t warn_LOADSHED_MIDPOWER[] = "Pwr Low ,Part Fun Limited";/*蓄电池电量低，部分功能禁用,INDEX_STSMG_ACC_ALTERNATFAIL_LWM*/ const uint8_t warn_LOADSHED_HIGHPOWER[] = "Bat Low,Pls Start Engine";/*蓄电池电量低，请启动车辆,INDEX_STSMG_ACC_ALTERNATFAIL_LWM*/   const uint8_t warn_OILLOW1L[] = "OILLOW1_L"; /*null,INDEX_STSMG_ACC_OILLOW1_L */ const uint8_t warn_OILLOW1LM[] = "Low Oil Pressure"; /*机油压力低 请注意！INDEX_STSMG_ACC_OILLOW1_LM*/ const uint8_t warn_OILLOW2L[] = "OILLOW2_L"; /*null,INDEX_STSMG_ACC_OILLOW2_L*/ const uint8_t warn_OILLOW2LM[] = "Low Oil Pressure"; /*机油压力低 请注意！INDEX_STSMG_ACC_OILLOW2_LM*/ const uint8_t warn_OILLOW3L[] = "OILLOW3_L"; /*null,INDEX_STSMG_ACC_OILLOW3_L*/ const uint8_t warn_OILLOW3W[] = "OILLOW3_W"; /*null,INDEX_STSMG_ACC_OILLOW3_W*/ const uint8_t warn_OILLOW3LWM[] = "Low Oil Pressure"; /*机油压力低 请注意INDEX_STSMG_ACC_OILLOW3_LWM*/ const uint8_t warn_FORBIDEN2ENABLE[] = "Stop Start Unavailable"; /*启停系统当前不可用,INDEX_STSMG_ASS_ACTIVE_FORBIDEN2ENABLE*/ const uint8_t warn_ASSACTIVEON[] = "Stop Start Active"; /*启停系统激活INDEX_STSMG_ASS_ACTIVE_ON*/ const uint8_t warn_ASSLAMPON[] = "Lamp On"; /*启停系统激活INDEX_STSMG_ASS_ACTIVE_ON*/ const uint8_t warn_ASSFAULT[] = "Stop Start Fault"; /*启停系统故障 请维修INDEX_STSMG_ASS_FAULT */   const uint8_t warn_EPSFlashLWM[] = "Power Steering Fault";/*助力转向故障 ，请维修INDEX_STSMG_EPS_FLASH_LWM*/ const uint8_t warn_EPSFlashLW[] = "EPS_FLASH_LW";/*null,INDEX_STSMG_EPS_FLASH_LW*/ const uint8_t warn_SASFAULTLWM[] = "SAS Fault";/*转角传感器故障 ，请维修INDEX_STSMG_SASFAULT_LWM*/ const uint8_t warn_SASFAULTLW[] = "SASFAULT_LW";/* null,INDEX_STSMG_SASFAULT_LW*/ const uint8_t warn_SASUNCALLWM[] = "SAS UnCalibrated";/*INDEX_STSMG_SASFAULT_LWM*/ const uint8_t warn_SASUNCALLW[] = "SASFAULT_LW";/* null,INDEX_STSMG_SASFAULT_LW*/ const uint8_t warn_ESCLLWM[] ="ESCL_LWM";/*null,INDEX_STSMG_ESCL_LWM*/ const uint8_t warn_ESCLLW[] = "ESCL_LW";/* null,INDEX_STSMG_ESCL_LW*/ const uint8_t warn_EPSONLWM[] = "EPS Perf Decrease";/*转向系统性能降低 请维修INDEX_STSMG_EPS_ON_LWM*/ const uint8_t warn_EPSONLW[] = "EPS_ON_LW";/*null,INDEX_STSMG_EPS_ON_LW*/  const uint8_t warn_SASFAULTWM[] = "SAS Fault";/*转角传感器故障 ，请维修INDEX_STSMG_SASFAULT_WM*/ const uint8_t warn_SASFAULTW[] = "SASFAULT_W";/*null,INDEX_STSMG_SASFAULT_W*/ const uint8_t warn_SASUNCALWM[] = "SAS UnCalibrated";/*INDEX_STSMG_SASFAULT_WM*/ const uint8_t warn_SASUNCALW[] = "SASFAULT_W";/*null,INDEX_STSMG_SASFAULT_W*/ const uint8_t warn_ESCLWM[] ="ESCL_WM";/*null,INDEX_STSMG_ESCL_WM*/ const uint8_t warn_ESCLW[] ="ESCL_W";/*null,INDEX_STSMG_ESCL_W*/ const uint8_t warn_EPSONWM[] = "EPS Perf Decrease ";/*转向系统性能降低 请维修INDEX_STSMG_EPS_ON_WM*/ const uint8_t warn_EPSONW[] = "EPS_ON_W";/*null,INDEX_STSMG_EPS_ON_W*/  const uint8_t warn_EPSFlashM[] = "Power Steering Fault";/*INDEX_STSMG_EPS_FLASH_M*/ const uint8_t warn_SASFAULTM[] = "SAS Fault";/*转角传感器故障 ，请维修INDEX_STSMG_SASFAULT_M*/ const uint8_t warn_SASUNCALM[] = "SAS UnCali";/*INDEX_STSMG_SASFAULT_M*/ const uint8_t warn_ESCLM[] ="ESCL_M";/*null,INDEX_STSMG_ESCL_M*/ const uint8_t warn_EPSONM[] = "EPS Perf Decrease ";/*转向系统性能降低 请维修INDEX_STSMG_EPS_ON_M*/    const uint8_t warn_TPMSFAULTL[] = "TPMS_FAULT_L"; /*null,INDEX_STSMG_TPMS_FAULT_L*/ const uint8_t warn_TPMSFAULTLWM[] = "TPMS Fail"; /*胎压监测系统故障，请维修,INDEX_STSMG_TPMS_FAULT_LWM*/ const uint8_t warn_TPMSLOWPRESL[] = "TPMS_LOWPRES_L"; /*null,INDEX_STSMG_TPMS_LOWPRES_L*/ const uint8_t warn_TPMSLOWPRESLW[] = "TPMS_LOWPRES_LW"; /*null,INDEX_STSMG_TPMS_LOWPRES_LW*/ const uint8_t warn_TPMSFAULTONL[] = "TPMS_FAULTON_L"; /*null,INDEX_STSMG_TPMS_FAULTON_L*/ const uint8_t warn_TPMSFAULTONLW[] ="TPMS_FAULTON_LW"; /*null,INDEX_STSMG_TPMS_FAULTON_LW*/ const uint8_t warn_TPMSSENSORLEARN[] = "TPMS Sensor Learning"; /*胎压监测系统传感器学习中,INDEX_STSMG_TPMS_SENSORLEARN*/ const uint8_t warn_TPMSWINTERMOD[] = "TPMS Enter Winter Mode"; /*胎压监测系统进入冬季模式INDEX_STSMG_TPMS_WINTERMOD*/ const uint8_t warn_TPMSLOCATIONOK[] = "TPMS AUTO Location"; /*胎压监测系统自定位完成INDEX_STSMG_TPMS_LOCATIONOK*/ const uint8_t warn_TPMSPresureLow[] = "Tire Low";/*INDEX_MSG_TPMS_PRESURELOW*/ const uint8_t warn_TPMSLeakage[] = "Tire leakage";/*INDEX_MSG_TPMS_LEAKAGE*/ const uint8_t warn_TPMSPresureHigh[] = "Tire High";/*INDEX_MSG_TPMS_PRESUREHIGH*/ const uint8_t warn_TPMSTempHigh[] = "Tire Temp High";/*INDEX_MSG_TPMS_TEMPHIGH*/ const uint8_t warn_TPMSBalanceFail[] = "BalanceFail";/*INDEX_MSG_TPMS_BALANCEFAIL*/ const uint8_t warn_TPMSBatLow[] = "BatLow";/*INDEX_MSG_TPMS_BATLOW*/ const uint8_t warn_AutoHoldErr[] = "Auto Hold Err";/*INDEX_MSG_AHD_FAULT*/ const uint8_t warn_HDCFail[] = "HDC FAIL"; /*INDEX_MSG_HDC_ON*/ const uint8_t warn_ABSALERTLW[] = "ABS_ALERT_LW"; /*null,INDEX_STSMG_ABS_ALERT_LW*/ const uint8_t warn_ABSALERTLWM[] = "ABS Fail"; /*ABS故障 请维修！INDEX_STSMG_ABS_ALERT_LWM*/ const uint8_t warn_ABSCANLOST[] = "ABS_CANLOST"; /*null,INDEX_STSMG_ABS_CANLOST*/ const uint8_t warn_SCSTCFAULTLM[] = "Traction Ctrl Fail"; /*牵引力控制故障,请维修!INDEX_STSMG_SCS_TCFAULT_LM*/ const uint8_t warn_SCSTCFAULTLWM[] = "Traction Ctrl Fail"; /*牵引力控制故障,请维修!INDEX_STSMG_SCS_TCFAULT_LWM*/ const uint8_t warn_SCSDSCFAULTLM[] = "Stability Ctrl Fail"; /*动态稳定控制故障,请维修!INDEX_STSMG_SCS_DSCFAULT_LM*/ const uint8_t warn_SCSDSCFAULTLWM[] = "Stability Ctrl Fail"; /*动态稳定控制故障,请维修!INDEX_STSMG_SCS_DSCFAULT_LWM*/ const uint8_t warn_SCSACTIVE[] = "SCS_ACTIVE"; /*null,INDEX_STSMG_SCS_ACTIVE*/ const uint8_t warn_SCSDSCOFF1L[] = "SCS_DSCOFF1_L"; /*null,INDEX_STSMG_SCS_DSCOFF1_L*/ const uint8_t warn_SCSDSCOFF1LM[] = "Stability Ctrl Off"; /*动态稳定控制关闭INDEX_STSMG_SCS_DSCOFF1_LM*/ const uint8_t warn_SCSDSCOFF1M[] = "Stability Ctrl Off"; /*动态稳定控制关闭INDEX_STSMG_SCS_DSCOFF1_LM*/ const uint8_t warn_SCSTCOFF1L[] = "SCS_TCOFF1_L"; /*null,INDEX_STSMG_SCS_TCOFF1_L*/ const uint8_t warn_SCSTCOFF1LM[] = "Traction Ctrl Off"; /*牵引力控制关闭,INDEX_STSMG_SCS_TCOFF1_LM,*/ const uint8_t warn_SCSTCOFF1M[] = "Traction Ctrl Off"; /*牵引力控制关闭,INDEX_STSMG_SCS_TCOFF1_LM,*/ const uint8_t warn_BREAKHANDON1[] = "BREAK_HANDON1"; /*null,INDEX_STSMG_BREAK_HANDON1*/ const uint8_t warn_BREAKHANDON2[] = "BREAK_HANDON2"; /*null,INDEX_STSMG_BREAK_HANDON2*/ const uint8_t warn_BREAKFLUDLOW[] = "Brake Fluid Low"; /*制动液过低,INDEX_STSMG_BREAK_FLUDLOW,*/ const uint8_t warn_BREAKEBDLW[] = "BREAK_EBD_LW"; /*null,INDEX_STSMG_BREAK_EBD_LW*/ const uint8_t warn_BREAKEBDLWM[] = "Brake Fail"; /*制动系统故障，请维修INDEX_STSMG_BREAK_EBD_LWM,*/ const uint8_t warn_SEATBELT1LM[] = "UnSeat belt Driver "; /*驾驶员处安全带未系INDEX_STSMG_SEATBELT1_LM,*/ const uint8_t warn_SEATBELT1LWM[] = "UnSeat belt Driver"; /*驾驶员处安全带未系INDEX_STSMG_SEATBELT1_LWM,*/ const uint8_t warn_SEATBELT2LM[] = "UnSeat belt Pasng"; /*副驾驶处安全带未系INDEX_STSMG_SEATBELT2_LM, */ const uint8_t warn_SEATBELT2LWM[] = "UnSeat belt Pasng"; /*副驾驶处安全带未系INDEX_STSMG_SEATBELT2_LWM,*/ const uint8_t warn_SEATBELTALERT3[] = "SEATBELT_ALERT3"; /*null,INDEX_STSMG_SEATBELT_ALERT3,*/ const uint8_t warn_SRSLAMPONLWM[] = "Airbag Fault"; /*安全气囊故障，请维修INDEX_STSMG_SRS_LAMPON_LWM*/ const uint8_t warn_SRSLGTFAIL[] = "Airbag LED Fault";/*安全气囊灯故障，请维修*/ const uint8_t warn_SRSLAMPONLW[] = "LAMPON_LW"; /*null,INDEX_STSMG_SRS_LAMPON_LW*/ const uint8_t warn_SRSLAMPONL[] = "SRS_LAMPON_L"; /*null,INDEX_STSMG_SRS_LAMPON_L,*/ const uint8_t warn_SRSLAMPFLASH[] ="SRS_LAMPFLASH"; /*null,INDEX_STSMG_SRS_LAMPFLASH,*/ const uint8_t warn_SRSLAMPFAULT[] = "Airbag Lamp Fail"; /*安全气囊指示灯故障，请注意, 无图INDEX_STSMG_SRS_LAMPFAULT*/ const uint8_t warn_BEANLIGHTOPEN[] = "Main Beam On"; /*远光灯已开INDEX_STSMG_BEANLIGHT_OPEN,*/ const uint8_t warn_CARLIGHTOPEN[] = "SideLight On"; /*车灯开INDEX_STSMG_CARLIGHT_OPEN,*/ const uint8_t warn_LIGHTLM[] = " Pls Close Light!"; /*请关灯INDEX_STSMG_ACC_LIGHT_LM,*/ const uint8_t warn_LIGHTLWM[] = " Pls Close Light!"; /*请关灯INDEX_STSMG_ACC_LIGHT_LWM,*/  const uint8_t warn_FRONTFROGOPEN[] = "Front Fog Lamps On"; /*前雾灯开INDEX_STSMG_FRONTFROG_OPEN,*/ const uint8_t warn_REARFROGOPEN[] = "Rear Fog Lamps On"; /*后雾灯开INDEX_STSMG_REARFROG_OPEN,*/ const uint8_t warn_INDICATORRIGHTOPEN[] = "INDICATORRIGHT_OPEN"; /*null,INDEX_STSMG_INDICATORRIGHT_OPEN,*/ const uint8_t warn_INDICATORRIGHTRISINGEDAGE[] = "INDICATORRIGHT_RISINGEDAGE"; /*null,INDEX_STSMG_INDICATORRIGHT_RISINGEDAGE,*/ const uint8_t warn_INDICATORRIGHTFALLEDAGE[] = "INDICATORRIGHT_FALLEDAGE"; /*null,INDEX_STSMG_INDICATORRIGHT_FALLEDAGE,*/ const uint8_t warn_INDICATORLEFTOPEN[] = "INDICATORLEFT_OPEN"; /*null,INDEX_STSMG_INDICATORLEFT_OPEN, */ const uint8_t warn_INDICATORLEFTRISINGEDAGE[] = "INDICATORLEFT_RISINGEDAGE"; /*null,INDEX_STSMG_INDICATORLEFT_RISINGEDAGE,*/ const uint8_t warn_INDICATORLEFTFALLEDAGE[] = "INDICATORLEFT_FALLEDAGE"; /*null,INDEX_STSMG_INDICATORLEFT_FALLEDAGE,*/ const uint8_t warn_KEYLOWBAT[] = "Key Battery Low"; /*遥控钥匙电量低请更换电池INDEX_STSMG_KEY_LOWBAT,*/ const uint8_t warn_KEYINACTIVE[] = "Invalid Key"; /*无效钥匙 INDEX_STSMG_KEY_INACTIVE,*/ const uint8_t warn_KEYNOTFOND[] = "Smart Key Not Detected"; /*未发现智能钥匙INDEX_STSMG_KEY_NOTFOND*/ const uint8_t warn_FUELFAULT[] = "Fuel Low"; /*燃油量低IINDEX_STSMG_FUEL_FAULT*/ const uint8_t warn_FUELLOW[] = "Fuel Low"; /*燃油量低，无图INDEX_STSMG_FUEL_LOW,*/ const uint8_t warn_ACCECO[] = "ACC_ECO"; /*null,INDEX_STSMG_ACC_ECO,*/  const uint8_t warn_DRVRDOOROPEN_WM[] = "DOOR_OPEN_W"; /*驾驶侧门开，无图INDEX_STSMG_DRVR_DOOR_OPEN_WM,*/ const uint8_t warn_DRVRDOOROPEN_M[] = "Driver Door Open"; /*驾驶侧门开，无图INDEX_STSMG_DRVR_DOOR_OPEN_M,*/ const uint8_t warn_PSNGDOOROPEN_WM[] = "DOOR_OPEN_W"; /*副驾驶侧门开，无图INDEX_STSMG_PSNG_DOOR_OPEN_WM,*/ const uint8_t warn_PSNGDOOROPEN_M[] = "FPasng Door Open"; /*副驾驶侧门开，无图INDEX_STSMG_PSNG_DOOR_OPEN_M,*/ const uint8_t warn_LDSPCOPEN_WM[] = "LDSPC_OPEN_W"; /*前舱打开，无图INDEX_STSMG_LDSPC_OPEN_WM,*/ const uint8_t warn_LDSPCOPEN_M[] = "Boot Open"; /*前舱打开，无图INDEX_STSMG_LDSPC_OPEN_M,*/ const uint8_t warn_BONNETOPEN_WM[] = "INDEX_BONNET_OPEN_W"; /*后备箱打开,无图INDEX_STSMG_BONNET_OPEN_WM,*/ const uint8_t warn_BONNETOPEN_M[] = "Bonnet Open"; /*后备箱打开,无图INDEX_STSMG_BONNET_OPEN_M,*/  const uint8_t warn_OVERSPEED[] = "Slow Down"; /*请减速INDEX_STSMG_OVERSPEED*/ const uint8_t warn_PDCFAILED[] = "PDC_FAILED"; /*null,INDEX_STSMG_PDC_FAILED */ const uint8_t warn_PDCINITSUC[] = "PDC_INITSUC"; /*null,INDEX_STSMG_PDC_INITSUC*/ const uint8_t warn_PDCWARN1[] = "PDC_WARN1"; /*null,INDEX_STSMG_PDC_WARN1*/ const uint8_t warn_PDCWARN2[] = "PDC_WARN2"; /*null,INDEX_STSMG_PDC_WARN2*/ const uint8_t warn_PDCWARN3[] = "PDC_WARN3"; /*null,INDEX_STSMG_PDC_WARN3*/ const uint8_t warn_PDCWARN4[] = "PDC_WARN4"; /*null,INDEX_STSMG_PDC_WARN4*/ const uint8_t warn_PDCWARN5[] = "PDC_WARN5"; /*null,INDEX_STSMG_PDC_WARN5*/ const uint8_t warn_PDCWARN6[] = "PDC_WARN6"; /*null,INDEX_STSMG_PDC_WARN6*/ const uint8_t warn_PDCWARN7[] = "PDC_WARN7"; /*null,INDEX_STSMG_PDC_WARN7*/ const uint8_t warn_PDCWARN8[] = "PDC_WARN8"; /*null,INDEX_STSMG_PDC_WARN8*/ const uint8_t warn_PDCWARN9[] = "PDC_WARN9"; /*null,INDEX_STSMG_PDC_WARN9*/ const uint8_t warn_PDCWARN10[] = "PDC_WARN10"; /*null,INDEX_STSMG_PDC_WARN10*/ const uint8_t warn_PDCWARN11[] = "PDC_WARN11"; /*null,INDEX_STSMG_PDC_WARN11*/ const uint8_t warn_PDCWARN12[] = "PDC_WARN12"; /*null,INDEX_STSMG_PDC_WARN12*/ const uint8_t warn_PDCWARN13[] = "PDC_WARN13"; /*null,INDEX_STSMG_PDC_WARN13*/ const uint8_t warn_PDCWARN14[] = "PDC_WARN14"; /*null,INDEX_STSMG_PDC_WARN14*/ const uint8_t warn_PDCWARN15[] = "PDC_WARN15"; /*null,INDEX_STSMG_PDC_WARN15*/ const uint8_t warn_IGNKEY[] = "Pls Take Key"; /*点火钥匙未拔,INDEX_STSMG_IGN_KEY */ const uint8_t warn_DoorOpen[] = "Pls Close the Door!"; /*null,INDEX_STSMG_IGN_KEY */ const uint8_t warn_ESC1L[] = ""; /*电子转向锁故障 请维修,STATUS_ACC_DEFECT*/ const uint8_t warn_ESCL2[] = "Steer Fault,Pls repair"; /*电子转向锁故障 请维修,STATUS_ACC_DEFECT*/ const uint8_t warn_ESCL3[] = "Steer locked"; /*方向盘锁住 ,STATUS_ACC_LOCKLAMPFLASH*/ const uint8_t warn_ESCL4[] = "ESCL Function Limited"; /*电子转向制动功能受限 ,STATUS_ACC_BLOCK*/  const uint8_t warn_msg[] = "wwot"; static hmi_proc_ST const WarnMsgTab[INDEX_MSG_ALL]= { warn_NULL,/*INDEX_MSG_NULL,*/ warn_ABSALERTLWM,/*INDEX_MSG_ABS_ALERT,*/ warn_ABSCANLOST,/*INDEX_MSG_ABS_NODEMISSING,*/ warn_ALTERNATOR_LWM,/*INDEX_MSG_ALTERNAT,*/ warn_ASSACTIVEON,/*INDEX_MSG_ASS_ACTIVE,*/ warn_FORBIDEN2ENABLE, /*INDEX_MSG_ASS_FBD,*/ warn_ASSFAULT,/*INDEX_MSG_ASS_FAULT,*/ warn_ASSLAMPON,/*INDEX_MSG_ASS_LAMPON*/ warn_BREAKFLUDLOW,/*INDEX_MSG_BRAKE_FLUDLOW,*/ warn_BREAKEBDLWM, /*INDEX_MSG_BRAKE_EBD,*/ warn_COOLANTHIGH1,/*INDEX_MSG_COOLANT_HIGH */ warn_COOLANTHIGH2,/*INDEX_MSG_COOLANT_CRITICAL,*/ warn_CHARGE_LWM, /*INDEX_MSG_CHARGE,*/ warn_CCAFAULT,/*INDEX_MSG_CRUS_FAULT,*/ warn_DRVRDOOROPEN_M,/*INDEX_MSG_DOORANDLID_DOOR,*/ // warn_PSNGDOOROPEN_M,/*INDEX_MSG_DOORANDLID_PNSG,*/ warn_LDSPCOPEN_M,/*INDEX_MSG_DOORANDLID_LDSP,*/ warn_BONNETOPEN_M, /*INDEX_MSG_DOORANDLID_BONNET,*/ warn_LOADSHED_MIDPOWER,/*INDEX_MSG_LOADSHED_MIDPOWR,*/ warn_LOADSHED_HIGHPOWER, /*INDEX_MSG_LOADSHED_HIGHPOWR,*/ warn_LOADSHED_LM,/*INDEX_MSG_LOADSHED_PMDCBROKEN,*/ warn_EMISLM,/*INDEX_MSG_EMISSION,*/ warn_IGNFAULT,/*INDEX_MSG_ENGINE,*/ warn_EPSFlashM,/*INDEX_MSG_EPS_FAULT,*/ warn_EPSONLWM,/*INDEX_MSG_EPS_LOWFEATURE,*/ warn_ESCL2,/*INDEX_MSG_ESCL_DEFECT,*/ warn_ESCL3,/*INDEX_MSG_ESCL_LOCKLAMPFLASH,*/ warn_ESCL4,/*INDEX_MSG_ESCL_BLOCK,*/ warn_FRONTFROGOPEN, /*INDEX_MSG_FRONTFOGLAMP,*/ warn_FUELFAULT,/*INDEX_MSG_FUEL_LOW_L50,*/ warn_FUELFAULT,/*EVENT_FUEL_MSG_LOW_U50,*/ warn_FUELFAULT,/*INDEX_MSG_FUEL_CRITICAL_L50,*/ warn_FUELFAULT,/*INDEX_MSG_FUEL_CRITICAL_U50,*/ warn_BEANLIGHTOPEN, /*INDEX_MSG_HEADLAMP,*/ warn_IGNKEY, /*INDEX_MSG_IGNKEY,*/ warn_KEYLOWBAT, /*INDEX_MSG_KEY_LOWBAT,*/ warn_KEYINACTIVE, /*INDEX_MSG_KEY_INACTIVE,*/ warn_KEYNOTFOND,/*INDEX_MSG_KEY_NOTFOUND,*/ warn_LIGHTLM,/*INDEX_MSG_LIGHT,*/ warn_OILLOW1LM,/*INDEX_MSG_OILPRESURE,*/ warn_OVERSPEED, /*INDEX_MSG_OVERSPEED,*/ warn_REARFROGOPEN, /*INDEX_MSG_REARFOGLLAMP,*/ warn_INDICATORRIGHTOPEN, /*INDEX_MSG_RIGHTDIR,*/ warn_SASFAULTLWM, /*INDEX_MSG_SASFAULT,*/ warn_SASUNCALLWM,/*INDEX_MSG_SASUNCAL,*/ warn_SCSDSCOFF1M,/*INDEX_MSG_SCS_DSCOFF_FAULT,*/ warn_SCSACTIVE,/*INDEX_MSG_SCS_DSCACTIVE_FAULT,*/ warn_SCSDSCFAULTLM,/*INDEX_MSG_SCS_DSCFAULT_FAULT,*/ warn_SCSTCOFF1M,/*INDEX_MSG_SCS_TCOFF_FAULT,*/ warn_SCSTCFAULTLM,/*INDEX_MSG_SCS_TCFAULT_FAULT,*/ warn_SEATBELT1LM, /*INDEX_MSG_SEATBELT_DRV,*/ //warn_SEATBELT2LM,/*INDEX_MSG_SEATBELT_PNSG,*/ warn_SEATBELTALERT3, /*INDEX_MSG_SEATBELT_LAMPON,*/ warn_CARLIGHTOPEN, /*INDEX_MSG_SIDELAMP,*/ warn_SRSLAMPONLWM, /*INDEX_MSG_SRS,*/ warn_SRSLGTFAIL, /*INDEX_MSG_SRSLGT,*/ warn_TPMSFAULTLWM, /*INDEX_MSG_TPMS_FAULT,*/ warn_TPMSSENSORLEARN, /*INDEX_MSG_TPMS_IDFICNLRMCM,*/ warn_TPMSWINTERMOD, /*INDEX_MSG_TPMS_WNTRMDA,*/ warn_TPMSLOCATIONOK, /*INDEX_MSG_TPMS_AUTOLOCTNCM,*/ warn_TPMSPresureLow,/*INDEX_MSG_TPMS_PRESURELOW,*/ warn_TPMSLeakage,/*INDEX_MSG_TPMS_LEAKAGE,*/ warn_TPMSPresureHigh,/*INDEX_MSG_TPMS_PRESUREHIGH,*/ warn_TPMSTempHigh,/*INDEX_MSG_TPMS_TEMPHIGH,*/ warn_TPMSBalanceFail,/*INDEX_MSG_TPMS_BALANCEFAIL,*/ warn_TPMSBatLow,/*INDEX_MSG_TPMS_BATLOW,*/ warn_AutoHoldErr,/*INDEX_MSG_AHD_FAULT*/ warn_HDCFail,/*INDEX_MSG_HDC_ON*/ warn_msg,/*MSG_CLUTCHMT_ON*/ warn_msg,/*MSG_BRAKESTART_MT_ON*/ warn_msg,/*MSG_BRAKESTART_AT_ON*/ warn_msg,/*MSG_CLTHFLT_ON*/ warn_msg,/*MSG_NOKEYCLTHSTART_ON*/ warn_msg,/*MSG_NOKEYBRKSTART_ON*/ warn_msg,/*MSG_CLSDOORTOAUTOSTR_ON*/ warn_msg,/*MSG_FASNSBLTTOAUTOSTR_ON*/ warn_msg,/*MSG_SHFTNTRLTOAUTOSTR_ON*/ warn_msg,/*MSG_ASSINHBTNLAMPON_ON*/ warn_msg,/*MSG_ASSINHBTNLAMPON_OFF*/ warn_msg,/*MSG_AUTOHOLDMSG_SLTBLT_NOTFASTEN*/ warn_msg,/*MSG_AUTOHOLDMSG_PRESSBRAKEPEDAL*/ warn_msg,/*MSG_AUTOHOLDMSG_AUTOHOLD_STANDBY*/ warn_msg,/*MSG_AUTOHOLDMSG_AUTOHOLD_OFF*/ warn_msg,/*MSG_AUTOHOLDMSG_AUTOHOLD_RELEASE*/ warn_msg,/*MSG_SSBENOFFRMNDR_OMT*/ warn_msg,/*MSG_SSBENOFFRMNDR_LONGPRESS*/ warn_msg,/*MSG_SSBENOFFRMNDR_TWICE*/ warn_msg,/*MSG_SHIFTERLCKRLSEBRKREQA_MT_ON*/ warn_msg,/*MSG_SHIFTERLCKRLSEBRKREQA_AT_ON*/ warn_msg,/*MSG_BCMTAKESMTKEYOUTOFSR_ON*/ warn_msg,/*MSG_SHFTPARKRMNDR_ON*/ warn_msg,/*MSG_PUTSMTKEYTOBKUPPOSR_ON*/ warn_msg,/*MSG_BCMRUNCRKF_ON*/ warn_msg,/*MSG_BCMSSBFLTSTS_ON*/ warn_msg,/*MSG_LDIPDBEAMLGHTF_ON*/ warn_msg,/*MSG_RDIPDBEAMLGHTF_ON*/ warn_msg,/*MSG_LDIRCNINDLGHTF_ON*/ warn_msg,/*MSG_RDIRCNINDLGHTF_ON*/ warn_msg,/*MSG_LBRKLGHTF_ON*/ warn_msg,/*MSG_RBRKLGHTF_ON*/ warn_msg,/*MSG_LSIDELGHTF_ON*/ warn_msg,/*MSG_RSIDELGHTF_ON*/ warn_msg,/*MSG_DAYTIMERUNNINGLGHTF_ON*/ warn_msg,/*MSG_RRFOGLGHTF_ON*/ warn_msg,/*MSG_REVSLGHTTF_ON*/ warn_msg,/*MSG_DRVRWNDOPENRMNDR_ON*/ warn_msg,/*MSG_SRFOPENRMNDR_ON*/ warn_msg,/*MSG_EPBSYSDSPMSGREQ_GRADIENT_HIGH*/ warn_msg,/*MSG_EPBSYSDSPMSGREQ_FORCE_NOTENOUGH*/ warn_msg,/*MSG_EPBSYSDSPMSGREQ_FSTNBELT*/ warn_msg,/*MSG_EPBSYSDSPMSGREQ_RELEASEPARK_MANUAL*/ warn_msg,/*MSG_EPBSYSDSPMSGREQ_RELEASEPARK_BRAKE*/ warn_msg,/*MSG_BATAGNGSTA_ON*/ warn_msg,/*MSG_BCMGEARSHFTPARKNTRLESR_ON*/ warn_msg,/*MSG_DRVRPWLINITNRMNDR_ON*/ warn_msg,/*MSG_SRFINITNRMNDR_ON*/ warn_msg,/*MSG_PEPSANTFLT_ON*/  };  unsigned char SWversion[] = "SW Version: V1.0"; unsigned char HWversion[] = "SW Version: V2.0"; unsigned char CMlversion[] = "Compiler GHS:6.1.4"; unsigned char dateInfo[] = "YY-MM-DD 2016-12-26";  unsigned char timeDisplay[] = "13:10"; unsigned char GearDisplay[] = " P "; unsigned char odoDisplay[] = "999999Km";  unsigned char RangDisplay[] = "Rang:----Km"; unsigned char trip1Display[] = "TRIP1:----Km"; unsigned char trip2Display[] = "TRIP2:----Km";  unsigned char AvgDrvTimeDisplay1[] = "DrvT1:-----s"; unsigned char AvgDrvTimeDisplay2[] = "DrvT2:-----s"; unsigned char AvgSpeedDisplay1[] = "ASpd1:----Km/s"; unsigned char AvgSpeedDisplay2[] = "ASpd2:----Km/s";  unsigned char FuelConsumDisplay[] = "FuelCsptn:----L/m"; unsigned char FuelConsum1Display[] = "AvgCsptn1:----L/m"; unsigned char FuelConsum2Display[] = "AvgCsptn2:----L/m";   unsigned char Tpms_FLDisplay[] = "FL TPMS:----L/m"; unsigned char Tpms_FRDisplay[] = "FR TPMS:----L/m"; unsigned char Tpms_RLDisplay[] = "RL TPMS:----L/m"; unsigned char Tpms_RRDisplay[] = "RR TPMS:----L/m";   unsigned char Calendar_Display[] = "YY-MM-DD"; uint8_t warnIndex = INDEX_WARN_NULL; uint32_t odo = 666; static r_drw2d_Texture_t yd_text; extern const uint8_t yeed_font[16*16*2*26]; extern r_drw2d_Device_t loc_Drw2dDev;    /*********************************************************** Function: hmi_CharRemapping  Parameters: - Character  Returns: - ******************************************************************/  static int hmi_CharRemapping(unsigned char Character) { int c;  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Character remapping */ if ((Character >= 32) && (Character < 128)) { /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr visible ASCII characters start with 32 (blank) not visible chars 0-31 and will be omitted */ c = (Character - 32); } else { switch (Character) { case 0xB0: /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr special remapping for non ASCII character 'degree' (掳 or 0xB0) non visible char DEL (127) will be used for 'degree' */ c = (127 - 32); break; default: /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr use blank as default */ c = 0; break; } } return c; }  void hmi_Error(int32_t Err) { while (Err) { } }  /*********************************************************** Function: hmi_FONT_GetCharWidth  Get Char Width.  Parameters: - Character  Returns: - Width ******************************************************************/ int hmi_FONT_GetCharWidth(char Character) { int c;  c =hmi_CharRemapping(Character); if ((c < 0) || (c > 95)) { return 0; } return FontArial19.Pos[c].Width; }     /*********************************************************** Function: hmi_WriteChar  Write a single character.  Use the currently selected buffer, font and color to draw a character at the given position.  Parameters: Dev - R_DRW2D device structure PosX - Display X position (not turned) PosY - Display Y position (not turned) Character - ASCII value of the character  Returns: -void ******************************************************************/ static void hmi_WriteChar(r_drw2d_Device_t Dev, int PosX, int PosY, unsigned char Character) { int xsrc; int wsrc; char c; static r_drw2d_Rect_t rect; static r_drw2d_Rect_t src_rect;  c = hmi_CharRemapping(Character); xsrc = FontArial19.Pos[c].Offset; wsrc = FontArial19.Pos[c].Width;  rect.Pos.X = R_DRW2D_2X(PosX); rect.Pos.Y = R_DRW2D_2X(PosY); rect.Size.Height = R_DRW2D_2X(19); rect.Size.Width = R_DRW2D_2X(wsrc);  src_rect.Pos.X = R_DRW2D_2X(xsrc); src_rect.Pos.Y = R_DRW2D_2X(0); src_rect.Size.Height = R_DRW2D_2X(19); src_rect.Size.Width = R_DRW2D_2X(wsrc);  R_DRW2D_TextureBlit(Dev, &src_rect, &rect); }   /*********************************************************** Function: hmi_TexturePrint  Write a bufferr.  Use the currently selected buffer, font and color to draw a character at the given position.  Parameters: Dev - R_DRW2D device structure pRect - r_drw2d_Rect_t structure Character - ASCII value of the character  Returns: -void ******************************************************************/ void hmi_TexturePrint(r_drw2d_Rect_t *pRect, const char *pBuf) { r_drw2d_Error_t ret = R_DRW2D_ERR_OK; r_drw2d_Rect_t rect,src_rect; r_drw2d_Texture_t tex_argb32; int startx; uint8_t index; int xsrc; int wsrc; r_drw2d_EffectStage_t effect[2];   /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Set texture */ tex_argb32.Handle = R_NULL; tex_argb32.Flags = (r_drw2d_TextureFlags_t)0; tex_argb32.Buffer.Pitch = 16; tex_argb32.Buffer.Size.Width = 16; tex_argb32.Buffer.Size.Height = 16; tex_argb32.Buffer.PixelFormat = R_DRW2D_PIXELFORMAT_ARGB1555; tex_argb32.Buffer.Data = (void*)yeed_font;  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Set texture */ ret |= R_DRW2D_CtxIdentity(loc_Drw2dDev); ret |= R_DRW2D_CtxTextureSet(loc_Drw2dDev, 0, &tex_argb32); ret |= R_DRW2D_CtxTransformMode(loc_Drw2dDev, R_DRW2D_TRANSFORM_NONE); // fastest ret |= R_DRW2D_CtxBlendMode(loc_Drw2dDev, R_DRW2D_BLENDMODE_SRC_OVER);  startx = pRect->Pos.X; while (*pBuf != 0) { index = hmi_CharRemapping(*pBuf);  rect.Pos.X = R_DRW2D_2X(startx); rect.Pos.Y = R_DRW2D_2X(pRect->Pos.Y); rect.Size.Height = R_DRW2D_2X(16); rect.Size.Width = R_DRW2D_2X(16); // rect.Size.Width = R_DRW2D_2X(wsrc);   src_rect.Pos.X = R_DRW2D_2X(0); // src_rect.Pos.X = R_DRW2D_2X(xsrc); src_rect.Pos.Y = R_DRW2D_2X(index*16); src_rect.Size.Height = R_DRW2D_2X(16); src_rect.Size.Width = R_DRW2D_2X(16);  ret |= R_DRW2D_TextureBlit(loc_Drw2dDev, &src_rect, &rect);  startx += 12;  pBuf++; }  if (R_DRW2D_ERR_OK != ret) { hmi_Error(ret); } }   /*********************************************************** Function: hmi_FONT_Print  Write a bufferr.  Use the currently selected buffer, font and color to draw a character at the given position.  Parameters: Dev - R_DRW2D device structure PosX - Display X position (not turned) PosY - Display Y position (not turned) Color - Display color Text - Display text Character - ASCII value of the character  Returns: -void ******************************************************************/ void hmi_FONT_Print(r_drw2d_Device_t Dev, int PosX, int PosY, r_drw2d_Color_t Color, char *Text) { int startx; r_drw2d_EffectStage_t effect[2]; r_drw2d_Error_t ret = R_DRW2D_ERR_OK;   yd_text.Buffer.Data =*FontArial19.Texture->Data;//*locCurrentFont->Texture->Data; yd_text.Buffer.Pitch = FontArial19.Texture->Width;//locCurrentFont->Texture->Width; yd_text.Buffer.PixelFormat = R_DRW2D_PIXELFORMAT_AL8; yd_text.Buffer.Size.Height = FontArial19.Texture->Height;//locCurrentFont->Texture->Height; yd_text.Buffer.Size.Width =FontArial19.Texture->Width;// locCurrentFont->Texture->Width; yd_text.Flags = R_DRW2D_TEX_BILINEAR; yd_text.Handle = 0;  ret |= R_DRW2D_CtxIdentity(Dev); ret |= R_DRW2D_CtxTextureSet(Dev, 0, &yd_text); ret |= R_DRW2D_CtxTransformMode(Dev, R_DRW2D_TRANSFORM_NONE); // fastest ret |= R_DRW2D_CtxBlendMode(Dev, R_DRW2D_BLENDMODE_SRC_OVER);   startx = PosX; while (*Text != 0) { if (*Text == '\n') { PosX = startx; PosY += 19; } else { hmi_WriteChar(Dev, PosX, PosY, *Text); PosX += hmi_FONT_GetCharWidth(*Text); } Text++; }   }   /*********************************************************** Function: HMI_showTimePage  Display Info -- Time Display  Returns: -void *************************************************************/ void hmi_showTimePage(void) { r_drw2d_Rect_t rect; PTime_ST curTime;  rect.Pos.X = 20; rect.Pos.Y = 295; rect.Size.Width= sizeof(timeDisplay)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT;  if(RET_OK == RTC_GetCurTime(&curTime)) { if(0 == curTime.dispFmt) { if(curTime.hour > 12) { timeDisplay[0] = (curTime.hour-12)/10 +0X30; timeDisplay[1] = (curTime.hour-12)%10 +0X30; } else if(curTime.hour == 0) { curTime.hour = 12; timeDisplay[0] = curTime.hour/10 +0X30; timeDisplay[1] = curTime.hour%10 +0X30; } else { timeDisplay[0] = curTime.hour/10 +0X30; timeDisplay[1] = curTime.hour%10 +0X30; } } else { timeDisplay[0] = curTime.hour/10 +0X30; timeDisplay[1] = curTime.hour%10 +0X30; }  timeDisplay[3] = curTime.minute/10 +0X30; timeDisplay[4] = curTime.minute%10 +0X30; } hmi_TexturePrint(&rect,timeDisplay); }   /*********************************************************** Function: HMI_showCalendarPage  Display Info -- Calendar Display  Returns: -void *************************************************************/ void hmi_showCalendarPage(void) { r_drw2d_Rect_t rect; PTime_ST curTime; if(RET_OK == RTC_GetCurTime(&curTime)) { sprintf(Calendar_Display,"date:%2d-%2d-%2d",curTime.year+2000,curTime.month,curTime.day); } rect.Pos.X = MSG_X_BEGIN_ROW1; rect.Pos.Y = MSG_Y_BEGIN_POS app_drw2dcpu app_menu app_tripcomp app_tutorial application.c application.h error.c error.h font.h font_data.h fonts fs_data.h hmi_manager.c hmi_manager.h img.c img.h img_data.h img_drw2d.c img_drw2d.h img_format.h main.c main.h mem_init.c mem_init.h sfma.c wm.c wm.h write.c write.h 11; rect.Size.Width= sizeof(Calendar_Display)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,Calendar_Display); }   /*********************************************************** Function: HMI_showTPMSPage  Display Info -- Tpms Display  Returns: -void *************************************************************/ void hmi_showTPMSPage(void) { r_drw2d_Rect_t rect; U16 FL_Tiry = 0; U16 FL_TiryV= 0; U16 FL_Temp= 0; U16 FL_TempV= 0; U16 FL_sts= 0;  U16 FR_Tiry= 0; U16 FR_TiryV= 0; U16 FR_Temp= 0; U16 FR_TempV= 0; U16 FR_sts= 0;  U16 RL_Tiry= 0; U16 RL_TiryV= 0; U16 RL_Temp= 0; U16 RL_TempV= 0; U16 RL_sts= 0;  U16 RR_Tiry= 0; U16 RR_TiryV= 0; U16 RR_Temp= 0; U16 RR_TempV= 0; U16 RR_sts= 0;  /*TYIRE DISPLAY*/  COM_GetSignalValue_16(INDEX_COM_RS_FLTIREPRS,&FL_Tiry); COM_GetSignalValue_16(INDEX_COM_RS_FLTIREPRSV,&FL_TiryV); COM_GetSignalValue_16(INDEX_COM_RS_FLTIRESTS,&FL_sts);  COM_GetSignalValue_16(INDEX_COM_RS_FRTIREPRS,&FR_Tiry); COM_GetSignalValue_16(INDEX_COM_RS_FRTIREPRSV,&FR_TiryV); COM_GetSignalValue_16(INDEX_COM_RS_FRTIRESTS,&FR_sts);   COM_GetSignalValue_16(INDEX_COM_RS_RLTIREPRS,&RL_Tiry); COM_GetSignalValue_16(INDEX_COM_RS_RLTIREPRSV,&RL_TiryV); COM_GetSignalValue_16(INDEX_COM_RS_RLTIRESTS,&RL_sts);   COM_GetSignalValue_16(INDEX_COM_RS_RRTIREPRS,&RR_Tiry); COM_GetSignalValue_16(INDEX_COM_RS_RRTIREPRSV,&RR_TiryV); COM_GetSignalValue_16(INDEX_COM_RS_RRTIRESTS,&RR_sts);  if(VALID == FL_TiryV) { sprintf(Tpms_FLDisplay,"FL:%d PA",FL_Tiry); } else { sprintf(Tpms_FLDisplay,"FL:-.- PA",FL_Tiry); }  if(VALID == FR_TiryV) { sprintf(Tpms_FRDisplay,"FR:%d PA",FR_Tiry); } else { sprintf(Tpms_FRDisplay,"FR:-.- PA",FR_Tiry); }  if(VALID == RL_TiryV) { sprintf(Tpms_RLDisplay,"RL:%d PA",RL_Tiry); } else { sprintf(Tpms_RLDisplay,"RL:-.- PA",RL_Tiry); }  if(VALID == RR_TiryV) { sprintf(Tpms_RRDisplay,"RR:%d PA",RR_Tiry); } else { sprintf(Tpms_RRDisplay,"RR:-.- PA",RR_Tiry); }  rect.Pos.X = MSG_X_BEGIN_ROW1; rect.Pos.Y = MSG_Y_BEGIN_POS app_drw2dcpu app_menu app_tripcomp app_tutorial application.c application.h error.c error.h font.h font_data.h fonts fs_data.h hmi_manager.c hmi_manager.h img.c img.h img_data.h img_drw2d.c img_drw2d.h img_format.h main.c main.h mem_init.c mem_init.h sfma.c wm.c wm.h write.c write.h 8; rect.Size.Width= sizeof(Tpms_FLDisplay)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,Tpms_FLDisplay);  rect.Pos.X = MSG_X_BEGIN_ROW2; rect.Pos.Y = MSG_Y_BEGIN_POS app_drw2dcpu app_menu app_tripcomp app_tutorial application.c application.h error.c error.h font.h font_data.h fonts fs_data.h hmi_manager.c hmi_manager.h img.c img.h img_data.h img_drw2d.c img_drw2d.h img_format.h main.c main.h mem_init.c mem_init.h sfma.c wm.c wm.h write.c write.h 8; rect.Size.Width= sizeof(Tpms_FRDisplay)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,Tpms_FRDisplay);  rect.Pos.X = MSG_X_BEGIN_ROW1; rect.Pos.Y = MSG_Y_BEGIN_POS app_drw2dcpu app_menu app_tripcomp app_tutorial application.c application.h error.c error.h font.h font_data.h fonts fs_data.h hmi_manager.c hmi_manager.h img.c img.h img_data.h img_drw2d.c img_drw2d.h img_format.h main.c main.h mem_init.c mem_init.h sfma.c wm.c wm.h write.c write.h 9; rect.Size.Width= sizeof(Tpms_RLDisplay)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,Tpms_RLDisplay);  rect.Pos.X = MSG_X_BEGIN_ROW2; rect.Pos.Y = MSG_Y_BEGIN_POS app_drw2dcpu app_menu app_tripcomp app_tutorial application.c application.h error.c error.h font.h font_data.h fonts fs_data.h hmi_manager.c hmi_manager.h img.c img.h img_data.h img_drw2d.c img_drw2d.h img_format.h main.c main.h mem_init.c mem_init.h sfma.c wm.c wm.h write.c write.h 9; rect.Size.Width= sizeof(Tpms_RRDisplay)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,Tpms_RRDisplay);  }    /*********************************************************** Function: HMI_showFuelConsumptionPage  Display Info  -- Fuel Consum1 Display -- Fuel Consum2 Display -- Fuel Display  Returns: -void *************************************************************/ void hmi_showFuelConsumptionPage(void) { r_drw2d_Rect_t rect; U8 FuelDisplay = 0; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 平均油耗*/ float32_t myFuelDisplay = 0; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 瞬时油耗*/ U8 UnitType = 0; /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr 单位类型*/  /*AVGFC1 FuelDisplay*/ if(VALID == FC_GetFuelConsumptionV1()) { FuelDisplay = FC_GetFuelConsumption1(); sprintf(FuelConsum1Display,"AG1:%.1fL/100Km", (float32_t)FuelDisplay/10); } else { sprintf(FuelConsum1Display,"AG1:--.-L/m"); } rect.Pos.X = MSG_X_BEGIN_ROW1; rect.Pos.Y = MSG_Y_BEGIN_POS app_drw2dcpu app_menu app_tripcomp app_tutorial application.c application.h error.c error.h font.h font_data.h fonts fs_data.h hmi_manager.c hmi_manager.h img.c img.h img_data.h img_drw2d.c img_drw2d.h img_format.h main.c main.h mem_init.c mem_init.h sfma.c wm.c wm.h write.c write.h 4; rect.Size.Width= sizeof(FuelConsum1Display)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,FuelConsum1Display);  /*AVGFC2 FuelDisplay*/ if(VALID == FC_GetFuelConsumptionV2()) { FuelDisplay = FC_GetFuelConsumption2(); sprintf(FuelConsum2Display,"AG2:%.1fL/100Km", (float32_t)FuelDisplay/10); } else { sprintf(FuelConsum2Display,"AG2:--.-L/m"); } rect.Pos.X = MSG_X_BEGIN_ROW1; rect.Pos.Y = MSG_Y_BEGIN_POS app_drw2dcpu app_menu app_tripcomp app_tutorial application.c application.h error.c error.h font.h font_data.h fonts fs_data.h hmi_manager.c hmi_manager.h img.c img.h img_data.h img_drw2d.c img_drw2d.h img_format.h main.c main.h mem_init.c mem_init.h sfma.c wm.c wm.h write.c write.h 5; rect.Size.Width= sizeof(FuelConsum2Display)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,FuelConsum2Display);  if(RET_OK == ACC_GetInstantFuelConsumption(&myFuelDisplay, &UnitType)) { if(0 == myFuelDisplay) { sprintf(FuelConsumDisplay,"FC:--.-"); } else { if(0 == UnitType ) { sprintf(FuelConsumDisplay,"FC:%.1f L/Hour",myFuelDisplay); } else { sprintf(FuelConsumDisplay,"FC:%.1f L/100Km",myFuelDisplay); } } } else { sprintf(FuelConsumDisplay,"FC:--.-"); } rect.Pos.X = MSG_X_BEGIN_ROW1; rect.Pos.Y = MSG_Y_BEGIN_POS app_drw2dcpu app_menu app_tripcomp app_tutorial application.c application.h error.c error.h font.h font_data.h fonts fs_data.h hmi_manager.c hmi_manager.h img.c img.h img_data.h img_drw2d.c img_drw2d.h img_format.h main.c main.h mem_init.c mem_init.h sfma.c wm.c wm.h write.c write.h 10; rect.Size.Width= sizeof(FuelConsumDisplay)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,FuelConsumDisplay);  }   /*********************************************************** Function: HMI_showGearPage  Display Info  -- Gear Display  Returns: -void *************************************************************/ void hmi_showGearPage(void) { r_drw2d_Rect_t rect; U8 GearType = 0; rect.Pos.X = 100; rect.Pos.Y = 295;  ACC_GetGearSts(&GearType); switch(GearType) { case TYPE_ACC_GEARLVLEP : /*EP档位*/ strcpy(GearDisplay,"EP"); break; case TYPE_ACC_GEARLVLP: /*P档位*/ strcpy(GearDisplay,"P"); break; case TYPE_ACC_GEARLVLR: /*R档位*/ strcpy(GearDisplay,"R"); break; case TYPE_ACC_GEARLVLN: /*N档位*/ strcpy(GearDisplay,"N"); break; case TYPE_ACC_GEARLVLS: /*S档位*/ strcpy(GearDisplay,"S"); break; case TYPE_ACC_GEARLVLW: /*W档位*/  strcpy(GearDisplay,"W"); break; case TYPE_ACC_GEARLVL7: /*档位7*/ strcpy(GearDisplay,"7"); break; case TYPE_ACC_GEARLVL6: /*档位6*/ strcpy(GearDisplay,"6"); break; case TYPE_ACC_GEARLVL5: /*档位5*/ strcpy(GearDisplay,"5"); break; case TYPE_ACC_GEARLVL4: /*档位4*/ strcpy(GearDisplay,"4"); break; case TYPE_ACC_GEARLVL3: /*档位3*/ strcpy(GearDisplay,"3"); break; break; case TYPE_ACC_GEARLVL2: /*档位2*/ strcpy(GearDisplay,"2"); break; case TYPE_ACC_GEARLVL1: /*档位1*/ strcpy(GearDisplay,"1"); break; case TYPE_ACC_GEARLVLD: /*D档位*/ strcpy(GearDisplay,"D"); break; case TYPE_ACC_GEARNONE: /*显示空*/ default: strcpy(GearDisplay,""); break; }  rect.Size.Width= sizeof(GearDisplay)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,GearDisplay); }   /*********************************************************** Function: HMI_showODOPage  Display Info -- ODO Display  Returns: -void *************************************************************/ void hmi_showODOPage(void) { r_drw2d_Rect_t rect;   BOOL crus_NetCCEnbd = FALSE ; BOOL crus_NetCCA = FALSE; BOOL crus_NetCCFltPrst = FALSE;  U16 crus_TargetCrusSpd=0; U32 odoValue = 0;  rect.Pos.X = 140; rect.Pos.Y = 295;  COM_GetSignalValue_BOOL(INDEX_COM_RS_CCENBD, &crus_NetCCEnbd); COM_GetSignalValue_BOOL(INDEX_COM_RS_CCA, &crus_NetCCA); COM_GetSignalValue_BOOL(INDEX_COM_RS_CCFLTPRST, &crus_NetCCFltPrst); COM_GetSignalValue_16(INDEX_COM_RS_CRUSANDSPDLMTRDRVRSS, &crus_TargetCrusSpd);  if (crus_NetCCEnbd) { crus_NetCCEnbd =TRUE; } else { } if (crus_NetCCA) { crus_NetCCA =TRUE; } else { } if (crus_NetCCFltPrst) { crus_NetCCFltPrst =TRUE; } else { }  if(crus_NetCCA && crus_NetCCEnbd) { odoValue = crus_TargetCrusSpd; if(odoValue >= 999999) { odoValue = 999999; } sprintf(odoDisplay,"%dKm/h",odoValue); } else { ODO_GetODOValue(INDEX_ODO_ODOVALUE, &odoValue); if(odoValue >= 999999) { odoValue = 999999; } sprintf(odoDisplay,"%dKm",odoValue); }   rect.Size.Width= sizeof(odoDisplay)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,odoDisplay); }   /*********************************************************** Function: HMI_showBottom  Display Info -- Time Display -- Gear Display -- Odo Display  Returns: -void *************************************************************/ void HMI_showBottom(void) { hmi_showODOPage(); hmi_showTimePage(); hmi_showGearPage(); }   /*********************************************************** Function: HMI_showVersionPage  Display Info -- SWversion Display -- HWversion Display -- CMlversion Display -- DateInfo Display  Returns: -void *************************************************************/ void HMI_showVersionPage(void) { r_drw2d_Rect_t rect; rect.Pos.X = MSG_X_BEGIN_ROW1; rect.Pos.Y = 50; rect.Size.Width= sizeof(SWversion)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,SWversion);  rect.Pos.X = MSG_X_BEGIN_ROW1; rect.Pos.Y = 80; rect.Size.Width= sizeof(HWversion)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,HWversion);  rect.Pos.X = MSG_X_BEGIN_ROW1; rect.Pos.Y = 110; rect.Size.Width= sizeof(CMlversion)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,CMlversion);  rect.Pos.X = MSG_X_BEGIN_ROW1; rect.Pos.Y = 140; rect.Size.Width= sizeof(dateInfo)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,dateInfo);  }   /*********************************************************** Function: HMI_showMainWindowPage  Display Info -- trip1 Display -- trip2 Display -- AvgDrv Time1 Display -- AvgDrv Time2 Displa -- AvgSpd Display -- Calendar Display -- TPMS Display -- FuelConsumption Display  Returns: -void *************************************************************/ void HMI_showMainWindowPage(void) { r_drw2d_Rect_t rect; U32 trip1 = 0; U32 trip2= 0; U32 time1 = 0; U32 time2= 0; U32 AvgSpd; U32 Temp;  rect.Pos.X = MSG_X_BEGIN_ROW1; rect.Pos.Y = MSG_Y_BEGIN_POS *2; rect.Size.Width= sizeof(trip1Display)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT;  /*TRIP DISPLAY*/ if((RET_OK == ODO_GetODOValue(INDEX_ODO_TRIP1,&trip1)) && (RET_OK == ODO_GetODOValue(INDEX_ODO_TRIP2,&trip2))) { sprintf(trip1Display,"TP1:%d.%dKm",trip1/1000,trip1%1000/100); if(trip1 >MAX_TRIP1) { if(trip1-MAX_TRIP1 >= 100) { sprintf(trip1Display,"TP1:%d.%dKm",(trip1-MAX_TRIP1)/1000,(trip1-MAX_TRIP1)%1000/100); } else { } } else { }  if(trip2 > MAX_TRIP2) { sprintf(trip2Display,"TP2:%d.%dKm",trip2/1000, trip2%1000/100); if(trip2-MAX_TRIP2 >= 100) { sprintf(trip2Display,"TP2:%d.%dKm",(trip2-MAX_TRIP2)/1000,(trip2-MAX_TRIP2)%1000/100); } else { } } else if(trip2 > MAX_TRIP2/10) { sprintf(trip2Display,"TP2:%dKm",trip2/1000); } else { sprintf(trip2Display,"TP2:%d.%dKm",trip2/1000,trip2%1000/100); } }  hmi_TexturePrint(&rect,trip1Display); rect.Pos.X = MSG_X_BEGIN_ROW2; rect.Pos.Y = MSG_Y_BEGIN_POS *2; rect.Size.Width= sizeof(trip2Display)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,trip2Display);   /*DRV TIME DISPLAY*/ if((RET_OK == RTC_GetDrivenTime(E_DRIVEN_TIME1,&time1)) && (RET_OK == RTC_GetDrivenTime(E_DRIVEN_TIME2,&time2))) {  if(time1 > MAX_DRIVEN_TIME) { time1 -=MAX_DRIVEN_TIME; } else { } if(time2 > MAX_DRIVEN_TIME) { time2 -=MAX_DRIVEN_TIME; } else { }  sprintf(AvgDrvTimeDisplay1,"DT1:%02d:%02d",time1/3600,(time1%3600)/60); sprintf(AvgDrvTimeDisplay2,"DT2:%02d:%02d",time2/3600,(time2%3600)/60); }  rect.Pos.X = MSG_X_BEGIN_ROW1; rect.Pos.Y = MSG_Y_BEGIN_POS app_drw2dcpu app_menu app_tripcomp app_tutorial application.c application.h error.c error.h font.h font_data.h fonts fs_data.h hmi_manager.c hmi_manager.h img.c img.h img_data.h img_drw2d.c img_drw2d.h img_format.h main.c main.h mem_init.c mem_init.h sfma.c wm.c wm.h write.c write.h 3; rect.Size.Width= sizeof(AvgDrvTimeDisplay1)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,AvgDrvTimeDisplay1);  rect.Pos.X = MSG_X_BEGIN_ROW2; rect.Pos.Y = MSG_Y_BEGIN_POS app_drw2dcpu app_menu app_tripcomp app_tutorial application.c application.h error.c error.h font.h font_data.h fonts fs_data.h hmi_manager.c hmi_manager.h img.c img.h img_data.h img_drw2d.c img_drw2d.h img_format.h main.c main.h mem_init.c mem_init.h sfma.c wm.c wm.h write.c write.h 3; rect.Size.Width= sizeof(AvgDrvTimeDisplay2)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,AvgDrvTimeDisplay2);   /*FUEL AND AVGSPEED DISPLAY*/ rect.Pos.X = MSG_X_BEGIN_ROW1; rect.Pos.Y = MSG_Y_BEGIN_POS app_drw2dcpu app_menu app_tripcomp app_tutorial application.c application.h error.c error.h font.h font_data.h fonts fs_data.h hmi_manager.c hmi_manager.h img.c img.h img_data.h img_drw2d.c img_drw2d.h img_format.h main.c main.h mem_init.c mem_init.h sfma.c wm.c wm.h write.c write.h 6; rect.Size.Width= sizeof(AvgSpeedDisplay1)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT;  if(RET_OK == ST_GetAverageSpeed(E_ST_AVERAGE_SPEED1,&AvgSpd)) { Temp = AvgSpd; if((0 == time1) ||(0== AvgSpd)) { AvgSpd = 0; sprintf(AvgSpeedDisplay1,"AVGSPD1:---.-Km/h"); } else { sprintf(AvgSpeedDisplay1,"AVGSPD1:%.1fKm/h", trip1* 3.6 /time1); }  hmi_TexturePrint(&rect,AvgSpeedDisplay1); } else { }  /*Time2 DISPLAY*/ rect.Pos.X = MSG_X_BEGIN_ROW1; rect.Pos.Y = MSG_Y_BEGIN_POS app_drw2dcpu app_menu app_tripcomp app_tutorial application.c application.h error.c error.h font.h font_data.h fonts fs_data.h hmi_manager.c hmi_manager.h img.c img.h img_data.h img_drw2d.c img_drw2d.h img_format.h main.c main.h mem_init.c mem_init.h sfma.c wm.c wm.h write.c write.h 7; rect.Size.Width= sizeof(AvgSpeedDisplay2)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; if(RET_OK == ST_GetAverageSpeed(E_ST_AVERAGE_SPEED2,&AvgSpd)) { Temp = AvgSpd; if((0 == time2) ||(0== AvgSpd)) { AvgSpd = 0; sprintf(AvgSpeedDisplay2,"AVGSPD2:---.-Km/h"); } else { sprintf(AvgSpeedDisplay2,"AVGSPD2:%.1fKm/h", trip2 app_drw2dcpu app_menu app_tripcomp app_tutorial application.c application.h error.c error.h font.h font_data.h fonts fs_data.h hmi_manager.c hmi_manager.h img.c img.h img_data.h img_drw2d.c img_drw2d.h img_format.h main.c main.h mem_init.c mem_init.h sfma.c wm.c wm.h write.c write.h 3.6/time2); } hmi_TexturePrint(&rect,AvgSpeedDisplay2); } else { }   hmi_showCalendarPage(); hmi_showTPMSPage(); hmi_showFuelConsumptionPage();  }    /*********************************************************** Function: HMI_showWarnPage  Display Warning Info  Parameters: WarnType - Warning Type  Returns: -void *************************************************************/ void HMI_showWarnPage(U8 WarnType) { r_drw2d_Rect_t rect;  U8 hmi_NetESCLFlrIndCmd; U8 hmi_NetEnRunA;  U32 odoValue = 0;  PTime_ST curTime;  rect.Pos.X = 10; rect.Pos.Y = 100;  COM_GetSignalValue_8(INDEX_COM_RS_ESCLFLRINDCMD, &hmi_NetESCLFlrIndCmd); COM_GetSignalValue_BOOL(INDEX_COM_RS_ENRUNA, &hmi_NetEnRunA); ODO_GetODOValue(INDEX_ODO_ODOVALUE, &odoValue);  if (HMI_WARN_TYPE_DOOROPEN == WarnType ) { rect.Size.Width= sizeof(warn_DoorOpen)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,warn_DoorOpen);  rect.Pos.X = 20; rect.Pos.Y = 295; rect.Size.Width= sizeof(timeDisplay)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT;  if(RET_OK == RTC_GetCurTime(&curTime)) { if(0 == curTime.dispFmt) { if(curTime.hour > 12) { timeDisplay[0] = (curTime.hour-12)/10 +0X30; timeDisplay[1] = (curTime.hour-12)%10 +0X30; } else if(curTime.hour == 0) { curTime.hour = 12; timeDisplay[0] = curTime.hour/10 +0X30; timeDisplay[1] = curTime.hour%10 +0X30; } else { timeDisplay[0] = curTime.hour/10 +0X30; timeDisplay[1] = curTime.hour%10 +0X30; } } else { timeDisplay[0] = curTime.hour/10 +0X30; timeDisplay[1] = curTime.hour%10 +0X30; }  timeDisplay[3] = curTime.minute/10 +0X30; timeDisplay[4] = curTime.minute%10 +0X30; } hmi_TexturePrint(&rect,timeDisplay);   sprintf(odoDisplay,"%dKm",odoValue);  rect.Pos.X = 140; rect.Pos.Y = 295; rect.Size.Width= sizeof(odoDisplay)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,odoDisplay); } else { if(warnIndex < INDEX_MSG_ALL) { rect.Size.Width= sizeof(WarnMsgTab[warnIndex].pSrc)*FONT_WIDHT; rect.Size.Height= FONT_HEIGHT; hmi_TexturePrint(&rect,WarnMsgTab[warnIndex].pSrc);  } else { } }  }
