/************************************************************************************************ PROJECT : simple_draw_d1l2 app FILE : $Id: vo_init.c 1175 2013-08-02 13:15:50Z florian.zimmermann $ ============================================================================  DESCRIPTION Init functions for memory ============================================================================ C O P Y R I G H T ============================================================================ Copyright (c) 2015 by  Renesas Electronics (Europe) GmbH. Arcadiastrasse 10 D-40472 Duesseldorf Germany All rights reserved. ============================================================================ Purpose: only for testing, not for mass production  DISCLAIMER  LICENSEE has read, understood and accepted the terms and conditions defined in the license agreement, especially the usage rights. In any case, it is LICENSEE's responsibility to make sure that any user of the software complies with the terms and conditions of the signed license agreement.  SAMPLE CODE is not part of the licensed software, as such it must not be used in mass-production applications. It can only be used for evaluation and demonstration purposes at customer's premises listed in the signed license agreement. **************************************************************************** */  /******************************************************************************* Section: Includes */ #include "r_typedefs.h" /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr Renesas basic types, e.g. uint32_t */ #include "r_config_d1x.h" #include "r_dev_api.h" #include "r_cdi_api.h" #include "mem_init.h" #include "config.h" #include "main.h"  #include "r_ddb_api.h" #include "r_wm_api.h" #include "wm.h" /******************************************************************************* Section: Local defines */ #if 0 #define LOC_VID_HP_BLOCK_SIZE (128u) #define LOC_VID_HP_BLOCK_NB (loc_VRAM0_SIZE / LOC_VID_HP_BLOCK_SIZE) #define ALIGN(ADDR,BLOCK) ( (ADDR+(BLOCK-1)) & ~(BLOCK-1) ) #define VRAM_HEAP_BASE ALIGN((loc_VRAM0+DHD_MEMORY_SIZE), LOC_VID_HP_BLOCK_SIZE) #endif  /******************************************************************************* Section: Local variables  */   r_cdi_Heap_t loc_lRAM_heap; r_cdi_Heap_t loc_VRAM_heap; r_cdi_HpBlkIndex_t loc_lRAM_heapIdxList[LOC_CPU_HP_BLOCK_NB back_rle_256.c back_rle_2561.c black_king.c config.h font.h font_data.h fonts hmi_manager.c hmi_manager.h img.c img.h img_data.h img_drw2d.c img_drw2d.h img_format.h main.c main.h mem_init.c mem_init.h QD_HMI sfma.c wm.c wm.h LOC_CPU_HP_BLOCK_SIZE]; //r_cdi_HpBlkIndex_t loc_VRAM_heapIdxList[LOC_VID_HP_BLOCK_NB];  static uint8_t locFrameBufferLRAM[(LOC_DISPLAY_STRIDE back_rle_256.c back_rle_2561.c black_king.c config.h font.h font_data.h fonts hmi_manager.c hmi_manager.h img.c img.h img_data.h img_drw2d.c img_drw2d.h img_format.h main.c main.h mem_init.c mem_init.h QD_HMI sfma.c wm.c wm.h LOC_DISPLAY_HEIGHT back_rle_256.c back_rle_2561.c black_king.c config.h font.h font_data.h fonts hmi_manager.c hmi_manager.h img.c img.h img_data.h img_drw2d.c img_drw2d.h img_format.h main.c main.h mem_init.c mem_init.h QD_HMI sfma.c wm.c wm.h LOC_DISPLAY_BPP back_rle_256.c back_rle_2561.c black_king.c config.h font.h font_data.h fonts hmi_manager.c hmi_manager.h img.c img.h img_data.h img_drw2d.c img_drw2d.h img_format.h main.c main.h mem_init.c mem_init.h QD_HMI sfma.c wm.c wm.h 2 + 0x1000)] __attribute__((aligned(128)));   uint32_t loc_VRAM0 = 0; uint32_t loc_VRAM0_SIZE = 0; /******************************************************************************* Section: Local functions  */  /******************************************************************************* Section: Global functions */  /******************************************************************************* Function: SetupMemManager  See: main.h for details */ void loc_SetupMemManager(void) { uint32_t x; r_dev_Device_t dev;  dev = R_DEV_GetDev();  /bin /cmd /dev /etc /git-bash.exe /git-cmd.exe /LICENSE.txt /mingw64 /proc /ReleaseNotes.html /tmp /unins000.dat /unins000.exe /unins000.msg /usr D1L2 */ if(dev == R_DEV_R7F701402 || dev == R_DEV_R7F701403) { loc_VRAM0 = D1L_VRAM0; loc_VRAM0_SIZE = D1L_VRAM0_SIZE; } else { loc_Error(ERR_NG); }  x = R_CDI_InitHeapManager((uint32_t)&loc_lRAM_heapIdxList, &loc_lRAM_heap, 0, LOC_CPU_HP_BLOCK_NB, LOC_CPU_HP_BLOCK_SIZE); if (x == 1) { loc_Error(ERR_NG); }  x = R_CDI_InitHeapManager((uint32_t)locFrameBufferLRAM, &loc_VRAM_heap, 0, sizeof(locFrameBufferLRAM) / 256, 256); if (x == 1) { loc_Error(ERR_NG); }  }
