 /*****************************************************************************  File Name : hmi_user_interface.c Organization : Zhuli Electronics Co.Ltd in Shanghai (www.shzldz.com) ******************************************************************************/ #include <math.h> #include "hmi_all_struct_include.h" #include "dm_public.h" #include "trip_public.h" #include "acc_public.h" #include "tpms_public.h" #include "public.h" #include "diag_public.h" #include "hmi_manager.h" #include "illu_public.h"  //static DM_Send_PageValue_ST hmi_cmd; static DM_Send_PageValue_ST g_Info; static U8 insTripRollOverPrm = 0; #define NUM_TRIP_DISTANCE 4 #define NUM_RIGHT_X 4 #define NUMBER_SPACE 4 #define POINT_WIDTH 8 #define SPDLMT_SPACE 4 #define FLTLST_SPACE 4 #define XIEXIAN_WIDTH 8 #define NUMBER_NULL_INDEX 11 #define XIEXIAN_INDEX 20     typedef struct FltList_Tag { U8 Index[5];  U8 Pos_X[5]; }FltList_ST;  typedef struct AM_Freq_Tag { U8 Index[5];  U8 Pos_X[5]; }AM_Freq_ST;   typedef struct FM_Freq_Tag { U8 Index[6];  U8 Pos_X[6]; }FM_Freq_ST;     typedef struct NaviDistList_Tag { U8 Index[6];  U8 Pos_X[6]; }NaviDistList_ST;     const static U8 NumWidthTab[12] ={44, 20, 44, 44, 44, 44, 44, 44, 48,44,24, 0};   const static U8 SpdLmtWidthTab[12] ={20, 12, 20, 20, 20, 20, 20, 20, 20,20,0, 0};  const static U8 AmFreqtWidthTab[12] ={20, 12, 20, 20, 20, 20, 20, 20, 20,20,4, 0};    const static U8 FltLstWidthTab[12] ={12, 8, 12, 12, 12, 12, 12, 12, 12,12,0, 0};   const static U8 NaviDistTab[12] ={12, 8, 12, 12, 12, 12, 12, 12, 12,12,4, 0};  static const char HMI_SpeedLimitTbl[INDEX_SPEEDLIMIT_ALL][4] =  { "OFF", "5", "10", "15", "20", "25", "30", "35", "40", "45", "50", "55", "60", "65", "70", "75", "80", "85", "90", "95", "100", "105", "110", "115", "120", "125", "130", "135", "140", "145", "150", "155", "160", "165", "170", "175", "180", "185", "190", "195", "200", "205", "210", "215", "220", }; static void hmi_Internal_change_int_numlist_x(U16 WidMax, U16 NUM, NumList_X_ST* list) { U8 NUM_H,NUM_T,NUM_O; U8 width_totol; U8 spaceCnt = 2;  NUM_H = NUM/100; NUM_T = ( NUM - NUM_H*100 )/10; NUM_O = NUM - NUM_H*100 - NUM_T*10;   list->Index_O = NUM_O;  list->Index_T = NUM_T;  list->Index_H = NUM_H;  if(0 == NUM_H) { list->Index_H = 11; spaceCnt --; if(0 == NUM_T) { list->Index_T = 11; spaceCnt --; } } width_totol = NumWidthTab[list->Index_O]\ + NumWidthTab[list->Index_T]\ + NumWidthTab[list->Index_H]\ +spaceCnt*NUMBER_SPACE; list->X_H = (WidMax - width_totol)/2;  if((list->X_H + width_totol) >= 180) { list->X_H -= ((list->X_H + width_totol)-176); } if(list->X_H%4)  list->X_H -=(list->X_H%4); list->X_T = list->X_H + NumWidthTab[list->Index_H]+NUMBER_SPACE; list->X_O = list->X_T + NumWidthTab[list->Index_T]+NUMBER_SPACE; }  static void hmi_Internal_change_float_numlist_x(U16 WidMax, U16 NUM, NumList_X_ST* list) { U8 NUM_H,NUM_T,NUM_O; U8 width_totol; U8 spaceCnt = 3; // U16 DispFuel;  NUM_H = NUM/100; NUM_T = ( NUM - NUM_H*100 )/10; NUM_O = NUM - NUM_H*100 - NUM_T*10;   if(0 == NUM) { list->Index_O = 10;  list->Index_T = 10;  list->Index_H = 10; } else {  list->Index_O = NUM_O;  list->Index_T = NUM_T;  list->Index_H = NUM_H;  if(0 == NUM_H) { list->Index_H = 11; spaceCnt --; } } width_totol = NumWidthTab[list->Index_O]\ + NumWidthTab[list->Index_T]\ + NumWidthTab[list->Index_H]\ + POINT_WIDTH \ +(spaceCnt*NUMBER_SPACE); list->X_H = (WidMax - width_totol)/2; if(list->X_H%4)  list->X_H -=(list->X_H%4); list->X_T = (list->X_H + NumWidthTab[list->Index_H]+NUMBER_SPACE); list->X_P = (list->X_T + NumWidthTab[list->Index_T]+NUMBER_SPACE); list->X_O = list->X_P + POINT_WIDTH+ NUMBER_SPACE; }   static void hmi_Internal_change_InsFuelCsump_numlist_x(U16 WidMax, AccInstantFuelcsump_ST value, NumList_X_ST* list) { U8 NUM_H,NUM_T,NUM_O; U8 width_totol; U8 spaceCnt = 3; U16 NUM = value.InstantFuel *10;  NUM_H = NUM/100; NUM_T = ( NUM - NUM_H*100 )/10; NUM_O = NUM - NUM_H*100 - NUM_T*10;  if(VALID == value.valid) { if(0 == NUM) { list->Index_O = 0;  list->Index_T = 0;  list->Index_H = 11; } else {  list->Index_O = NUM_O;  list->Index_T = NUM_T;  list->Index_H = NUM_H;  if(0 == NUM_H) { list->Index_H = 11; spaceCnt --; } } } else { list->Index_O = 10;  list->Index_T = 10;  list->Index_H = 10; } width_totol = NumWidthTab[list->Index_O]\ + NumWidthTab[list->Index_T]\ + NumWidthTab[list->Index_H]\ + POINT_WIDTH \ +(spaceCnt*NUMBER_SPACE); list->X_H = (WidMax - width_totol)/2; if(list->X_H%4)  list->X_H -=(list->X_H%4); list->X_T = (list->X_H + NumWidthTab[list->Index_H]+NUMBER_SPACE); list->X_P = (list->X_T + NumWidthTab[list->Index_T]+NUMBER_SPACE); list->X_O = list->X_P + POINT_WIDTH+ NUMBER_SPACE; }   static void hmi_Internal_SpdLmt_int_numlist_x(U16 WidMax, U16 NUM, NumList_X_ST* list) { U8 NUM_H,NUM_T,NUM_O; U8 width_totol; U8 spaceCnt = 2;  NUM_H = NUM/100; NUM_T = ( NUM - NUM_H*100 )/10; NUM_O = NUM - NUM_H*100 - NUM_T*10;   list->Index_O = NUM_O;  list->Index_T = NUM_T;  list->Index_H = NUM_H;  if(0 == NUM_H) { list->Index_H = 11; spaceCnt --; if(0 == NUM_T) { list->Index_T = 11; spaceCnt --; } } width_totol = SpdLmtWidthTab[list->Index_O]\ + SpdLmtWidthTab[list->Index_T]\ + SpdLmtWidthTab[list->Index_H]\ +spaceCnt*SPDLMT_SPACE; list->X_H = (WidMax - width_totol)/2; if(list->X_H%4)  list->X_H -=(list->X_H%4); list->X_T = list->X_H + SpdLmtWidthTab[list->Index_H]+NUMBER_SPACE; list->X_O = list->X_T + SpdLmtWidthTab[list->Index_T]+NUMBER_SPACE; }   void hmi_gfx_cold_user(void) { }  void hmi_gfx_warm_user(void) { } void hmi_user_process_init(void) { memset(&g_Info,0,sizeof(DM_Send_PageValue_ST));  insTripRollOverPrm = DIAG_GetTripRollOver(); }     static void hmi_Internal_showLogo1(U8 index) { switch(index) { case INDEX_LOGO1: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON1); break; case INDEX_LOGO2: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON2); break; case INDEX_LOGO3: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON3); break; case INDEX_LOGO4: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON4); break; case INDEX_LOGO5: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON5); break; case INDEX_LOGO6: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON6); break; case INDEX_LOGO7: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON7); break; case INDEX_LOGO8: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON8); break; case INDEX_LOGO9: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON9); break; case INDEX_LOGO10: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON10); break; case INDEX_LOGO11: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON11); break; case INDEX_LOGO12: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON12); break; case INDEX_LOGO13: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON13); break; case INDEX_LOGO14: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON14); break; case INDEX_LOGO15: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON15); break; case INDEX_LOGO16: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON16); break; case INDEX_LOGO17: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON17); break; case INDEX_LOGO18: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON18); break; case INDEX_LOGO19: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON19); break; case INDEX_LOGO20: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON20); break; case INDEX_LOGO21: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON21); break; case INDEX_LOGO22: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON22); break; case INDEX_LOGO23: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON23); break; case INDEX_LOGO24: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON24); break; case INDEX_LOGO25: hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON25); break; }  hmi_engine_set_object_info(HMI_LOGO_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_LOGO_PAGE, HMI_REFRESH_PAGE_BIT); }     static void hmi_Internal_showLogo2(U8 index) { switch(index) { case INDEX_LOGO26: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON26); break; case INDEX_LOGO27: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON27); break; case INDEX_LOGO28: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON28); break; case INDEX_LOGO29: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON29); break; case INDEX_LOGO30: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON30); break; case INDEX_LOGO31: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON31); break; case INDEX_LOGO32: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON32); break; case INDEX_LOGO33: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON33); break; case INDEX_LOGO34: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON34); break; case INDEX_LOGO35: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON35); break; case INDEX_LOGO36: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON36); break; case INDEX_LOGO37: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON37); break; case INDEX_LOGO38: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON38); break; case INDEX_LOGO39: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON39); break; case INDEX_LOGO40: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON40); break; case INDEX_LOGO41: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON41); break; case INDEX_LOGO42: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON42); break; case INDEX_LOGO43: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON43); break; case INDEX_LOGO44: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON44); break; case INDEX_LOGO45: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON45); break; case INDEX_LOGO46: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON46); break; case INDEX_LOGO47: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON47); break; case INDEX_LOGO48: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON48); break; case INDEX_LOGO49: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON49); break; case INDEX_LOGO50: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON50); break; case INDEX_LOGO51: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON51); break; case INDEX_LOGO52: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON52); break; case INDEX_LOGO53: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON53); break; case INDEX_LOGO54: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON54); break; case INDEX_LOGO55: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON55); break; case INDEX_LOGO56: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON56); break; case INDEX_LOGO57: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON57); break; case INDEX_LOGO58: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON58); break; case INDEX_LOGO59: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON59); break; case INDEX_LOGO60: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON60); break; case INDEX_LOGO61: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON61); break; case INDEX_LOGO62: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON62); break; case INDEX_LOGO63: hmi_engine_set_object_info(HMI_LOGO_CON_SECOND, HMI_WELCOME_CON63); break; }  hmi_engine_set_object_info(HMI_LOGO2_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_LOGO2_PAGE, HMI_REFRESH_PAGE_BIT); }    static void hmi_Internal_show_Msg_Door_Status(DM_Send_PageValue_ST Info) {  if(FALSE != Info.DATA.Buffer.msg.MsgData.door.DrvDoorSts) {  hmi_engine_set_object_info(HMI_S_DYN_CON_LEFT_DOOR, HMI_DOOR1); } else { hmi_engine_set_object_info(HMI_S_DYN_CON_LEFT_DOOR, HMI_DOOR1_NULL); } if(FALSE != Info.DATA.Buffer.msg.MsgData.door.PnsgDoorSts) {  hmi_engine_set_object_info(HMI_S_DYN_CON_RIGHT_DOOR, HMI_DOOR2); } else {  hmi_engine_set_object_info(HMI_S_DYN_CON_RIGHT_DOOR, HMI_DOOR2_NULL); }  } static void hmi_Internal_popup_rle_display( MSG_EVENT_ENUM Index) { switch(Index) { case INDEX_MSG_DOORANDLID_DOOR_L5: case INDEX_MSG_DOORANDLID_DOOR_U5: case INDEX_MSG_DOORANDLID_BONNET_U5: case INDEX_MSG_DOORANDLID_BONNET_L5: case INDEX_MSG_DOORANDLID_LDSP_L5: case INDEX_MSG_DOORANDLID_LDSP_U5: case INDEX_MSG_CLSDOORTOAUTOSTR_ON: case INDEX_MSG_SRFOPENRMNDR_ON: case INDEX_MSG_SRFINITNRMNDR_ON: case INDEX_MSG_WELCOME:  hmi_engine_set_object_info(HMI_MSG_SPRITE_CON_BG, HMI_MSG_SPRITE_NULL);  hmi_engine_set_object_info(HMI_MSG_RLE_BG_DYN_CON, HMI_MSG_RLE_BG_DOOR_CON); hmi_engine_set_object_info(HMI_CON_DYN_MSG_ICON_YINYING,HMI_S_CON_MSG_YINYING_HIDE); break; case INDEX_MSG_TPMS_PRESURELOW: case INDEX_MSG_TPMS_LEAKAGE: case INDEX_MSG_TPMS_PRESUREHIGH: case INDEX_MSG_TPMS_TEMPHIGH: case INDEX_MSG_TPMS_BALANCEFAIL:  case INDEX_MSG_TPMS_BATLOW:  //hmi_engine_set_object_info(HMI_MSG_RLE_BG_DYN_CON, HMI_MSG_RLE_TPMS);  hmi_engine_set_object_info(HMI_MSG_SPRITE_CON_BG, HMI_TPMS_SPRITE_BG);  hmi_engine_set_object_info(HMI_MSG_RLE_BG_DYN_CON, HMI_MSG_RLE_BG_COMN_CON); hmi_engine_set_object_info(HMI_CON_DYN_MSG_ICON_YINYING,HMI_S_CON_MSG_YINYING_HIDE); break; case INDEX_MSG_DRVRWNDOPENRMNDR_ON: case INDEX_MSG_DRVRPWLINITNRMNDR_ON:  hmi_engine_set_object_info(HMI_MSG_RLE_BG_DYN_CON, HMI_MSG_RLE_BG_RANG_CON); hmi_engine_set_object_info(HMI_MSG_SPRITE_CON_BG, HMI_MSG_SPRITE_NULL); hmi_engine_set_object_info(HMI_CON_DYN_MSG_ICON_YINYING,HMI_S_CON_MSG_YINYING_HIDE); break; case INDEX_MSG_FUEL_LOW_L50: case INDEX_MSG_FUEL_LOW_U50: case INDEX_MSG_FUEL_CRITICAL_U50: case INDEX_MSG_FUEL_CRITICAL_L50:  hmi_engine_set_object_info(HMI_MSG_RLE_BG_DYN_CON, HMI_MSG_RLE_BG_RANG_CON); hmi_engine_set_object_info(HMI_MSG_SPRITE_CON_BG, HMI_MSG_SPRITE_NULL); hmi_engine_set_object_info(HMI_CON_DYN_MSG_ICON_YINYING,HMI_S_CON_MSG_YINYING_HIDE); break; case INDEX_MSG_EPBSYSDSPMSGREQ_GRADIENT_HIGH:  //hmi_engine_set_object_info(HMI_MSG_RLE_BG_DYN_CON, HMI_MSG_RLE_PODU_CON);  hmi_engine_set_object_info(HMI_MSG_SPRITE_CON_BG, HMI_PODU_SPRITE_BG);  hmi_engine_set_object_info(HMI_MSG_RLE_BG_DYN_CON, HMI_MSG_RLE_BG_COMN_CON); hmi_engine_set_object_info(HMI_CON_DYN_MSG_ICON_YINYING,HMI_S_CON_MSG_YINYING_HIDE); break; case INDEX_MSG_CRUS_FAULT:  hmi_engine_set_object_info(HMI_MSG_SPRITE_CON_BG, HMI_MSG_SPRITE_NULL);  hmi_engine_set_object_info(HMI_MSG_RLE_BG_DYN_CON, HMI_MSG_RLE_BG_COMN_CON); hmi_engine_set_object_info(HMI_CON_DYN_MSG_ICON_YINYING,HMI_S_CON_MSG_YINYING_HIDE); break; case INDEX_MSG_PDC_FAULT: //hmi_engine_set_object_info(HMI_MSG_RLE_BG_DYN_CON, HMI_MSG_RLE_PDC);  hmi_engine_set_object_info(HMI_MSG_SPRITE_CON_BG, HMI_MSG_PDC_SPRITE_BG);  hmi_engine_set_object_info(HMI_MSG_RLE_BG_DYN_CON, HMI_MSG_RLE_BG_COMN_CON); hmi_engine_set_object_info(HMI_CON_DYN_MSG_ICON_YINYING,HMI_S_CON_MSG_YINYING_HIDE); break; default:  hmi_engine_set_object_info(HMI_MSG_SPRITE_CON_BG, HMI_MSG_SPRITE_NULL);  hmi_engine_set_object_info(HMI_MSG_RLE_BG_DYN_CON, HMI_MSG_RLE_BG_COMN_CON); hmi_engine_set_object_info(HMI_CON_DYN_MSG_ICON_YINYING,HMI_S_CON_MSG_YINYING_SHOW); break; } } static void hmi_Internal_popup_tire_wheelcolor(U8 sts,DM_Send_PageValue_ST Info) { if(sts == Info.DATA.Buffer.msg.MsgData.TirePress.FLTireSts) {  hmi_engine_set_object_info(HMI_S_TPMS_1, HMI_S_TPMS_RED_1); } else {  hmi_engine_set_object_info(HMI_S_TPMS_1, HMI_S_TPMS_BLACK_1); }  if(sts == Info.DATA.Buffer.msg.MsgData.TirePress.FRTireSts) {  hmi_engine_set_object_info(HMI_S_TPMS_2, HMI_S_TPMS_RED_2); } else {  hmi_engine_set_object_info(HMI_S_TPMS_2, HMI_S_TPMS_BLACK_2); }  if(sts == Info.DATA.Buffer.msg.MsgData.TirePress.RLTireSts) {  hmi_engine_set_object_info(HMI_S_TPMS_3, HMI_S_TPMS_RED_3); } else {  hmi_engine_set_object_info(HMI_S_TPMS_3, HMI_S_TPMS_BLACK_3); }  if(sts == Info.DATA.Buffer.msg.MsgData.TirePress.RRTireSts) {  hmi_engine_set_object_info(HMI_S_TPMS_4, HMI_S_TPMS_RED_4); } else {  hmi_engine_set_object_info(HMI_S_TPMS_4, HMI_S_TPMS_BLACK_4); } } static void hmi_Internal_popup_msg_showTire(DM_Send_PageValue_ST Info) {  MSG_EVENT_ENUM Index; U8 status; Index = Info.DATA.Buffer.msg.MsgType; switch(Index) { case INDEX_MSG_TPMS_PRESURELOW:  case INDEX_MSG_TPMS_LEAKAGE:  case INDEX_MSG_TPMS_PRESUREHIGH:  hmi_engine_set_object_info(HMI_FL_DYN_STATUS, HMI_FL_S_TIRE_PRES_LOW);  hmi_engine_set_object_info(HMI_FR_DYN_STATUS, HMI_FR_S_TIRE_PRES_LOW);  hmi_engine_set_object_info(HMI_RL_DYN_STATUS, HMI_RL_S_TIRE_PRES_LOW);  hmi_engine_set_object_info(HMI_RR_DYN_STATUS, HMI_RR_S_TIRE_PRES_LOW);  hmi_Internal_showMsgTire(Index,Info.DATA.Buffer.msg.MsgData.TirePress); break; case INDEX_MSG_TPMS_TEMPHIGH: if(STATUS_TPMS_TEMP_HIGH== Info.DATA.Buffer.msg.MsgData.TirePress.FLTireSts) {  hmi_engine_set_object_info(HMI_FL_DYN_STATUS, HMI_FL_S_TIRE_TEMP_HIGH);  } else { hmi_engine_set_object_info(HMI_FL_DYN_STATUS, HMI_FL_S_TIRE_NULL);  } if(STATUS_TPMS_TEMP_HIGH == Info.DATA.Buffer.msg.MsgData.TirePress.FRTireSts) {  hmi_engine_set_object_info(HMI_FR_DYN_STATUS, HMI_FR_S_TIRE_TEMP_HIGH);  }  else { hmi_engine_set_object_info(HMI_FR_DYN_STATUS, HMI_FR_S_TIRE_NULL);  } if(STATUS_TPMS_TEMP_HIGH == Info.DATA.Buffer.msg.MsgData.TirePress.RLTireSts) {  hmi_engine_set_object_info(HMI_RL_DYN_STATUS, HMI_RL_S_TIRE_TEMP_HIGH);  }  else { hmi_engine_set_object_info(HMI_RL_DYN_STATUS, HMI_RL_S_TIRE_NULL);  } if(STATUS_TPMS_TEMP_HIGH == Info.DATA.Buffer.msg.MsgData.TirePress.RRTireSts) {  hmi_engine_set_object_info(HMI_RR_DYN_STATUS, HMI_RR_S_TIRE_TEMP_HIGH);  }  else { hmi_engine_set_object_info(HMI_RR_DYN_STATUS, HMI_RR_S_TIRE_NULL);  } break; case INDEX_MSG_TPMS_BALANCEFAIL: if(STATUS_TPMS_BALANCE_FAIL== Info.DATA.Buffer.msg.MsgData.TirePress.FLTireSts) {  hmi_engine_set_object_info(HMI_FL_DYN_STATUS, HMI_FL_S_TIRE_UNBALANCE);  }  else { hmi_engine_set_object_info(HMI_FL_DYN_STATUS, HMI_FL_S_TIRE_NULL);  } if(STATUS_TPMS_BALANCE_FAIL == Info.DATA.Buffer.msg.MsgData.TirePress.FRTireSts) {  hmi_engine_set_object_info(HMI_FR_DYN_STATUS, HMI_FR_S_TIRE_UNBALANCE);  }  else { hmi_engine_set_object_info(HMI_FR_DYN_STATUS, HMI_FR_S_TIRE_NULL);  } if(STATUS_TPMS_BALANCE_FAIL == Info.DATA.Buffer.msg.MsgData.TirePress.RLTireSts) {  hmi_engine_set_object_info(HMI_RL_DYN_STATUS, HMI_RL_S_TIRE_UNBALANCE);  }  else { hmi_engine_set_object_info(HMI_RL_DYN_STATUS, HMI_FR_S_TIRE_NULL);  } if(STATUS_TPMS_BALANCE_FAIL == Info.DATA.Buffer.msg.MsgData.TirePress.RRTireSts) {  hmi_engine_set_object_info(HMI_RR_DYN_STATUS, HMI_RR_S_TIRE_UNBALANCE);  } else { hmi_engine_set_object_info(HMI_RR_DYN_STATUS, HMI_RR_S_TIRE_NULL);  }  break; case INDEX_MSG_TPMS_BATLOW: if(STATUS_TPMS_BAT_LOW== Info.DATA.Buffer.msg.MsgData.TirePress.FLTireSts) {  hmi_engine_set_object_info(HMI_FL_DYN_STATUS, HMI_FL_S_TIRE_LOW_BAT);  } else { hmi_engine_set_object_info(HMI_FL_DYN_STATUS, HMI_FL_S_TIRE_NULL);  }  if(STATUS_TPMS_BAT_LOW == Info.DATA.Buffer.msg.MsgData.TirePress.FRTireSts) {  hmi_engine_set_object_info(HMI_FR_DYN_STATUS, HMI_FR_S_TIRE_LOW_BAT);  } else { hmi_engine_set_object_info(HMI_FR_DYN_STATUS, HMI_FR_S_TIRE_NULL);  }  if(STATUS_TPMS_BAT_LOW == Info.DATA.Buffer.msg.MsgData.TirePress.RLTireSts) {  hmi_engine_set_object_info(HMI_RL_DYN_STATUS, HMI_RL_S_TIRE_LOW_BAT);  } else { hmi_engine_set_object_info(HMI_RL_DYN_STATUS, HMI_RL_S_TIRE_NULL);  }  if(STATUS_TPMS_BAT_LOW == Info.DATA.Buffer.msg.MsgData.TirePress.RRTireSts) {  hmi_engine_set_object_info(HMI_RR_DYN_STATUS, HMI_RR_S_TIRE_LOW_BAT);  } else { hmi_engine_set_object_info(HMI_RR_DYN_STATUS, HMI_RR_S_TIRE_NULL);  }  break;  default:  hmi_engine_set_object_info(HMI_FL_DYN_STATUS, HMI_FL_S_TIRE_NULL);  hmi_engine_set_object_info(HMI_FR_DYN_STATUS, HMI_FR_S_TIRE_NULL);  hmi_engine_set_object_info(HMI_RL_DYN_STATUS, HMI_RL_S_TIRE_NULL);  hmi_engine_set_object_info(HMI_RR_DYN_STATUS, HMI_RR_S_TIRE_NULL);  break; }  switch(Index) { case INDEX_MSG_TPMS_PRESURELOW: status = STATUS_TPMS_BAT_LOW; hmi_Internal_popup_tire_wheelcolor(status,Info); break; case INDEX_MSG_TPMS_LEAKAGE:  status = STATUS_TPMS_TIRE_LEAKAGE;  hmi_Internal_popup_tire_wheelcolor(status,Info); break;  case INDEX_MSG_TPMS_PRESUREHIGH:  status = STATUS_TPMS_TIRE_HIGH;  hmi_Internal_popup_tire_wheelcolor(status,Info); break;  case INDEX_MSG_TPMS_TEMPHIGH: status = STATUS_TPMS_TEMP_HIGH;  hmi_Internal_popup_tire_wheelcolor(status,Info); break;  case INDEX_MSG_TPMS_BALANCEFAIL: status = STATUS_TPMS_BALANCE_FAIL; hmi_Internal_popup_tire_wheelcolor(status,Info);  break;  case INDEX_MSG_TPMS_BATLOW:  status = STATUS_TPMS_BAT_LOW;  hmi_Internal_popup_tire_wheelcolor(status,Info); break;  default:  status = STATUS_TPMS_TIRE_NORMAL; hmi_engine_set_object_info(HMI_S_TPMS_1, HMI_S_TPMS_NULL1); hmi_engine_set_object_info(HMI_S_TPMS_2, HMI_S_TPMS_NULL2); hmi_engine_set_object_info(HMI_S_TPMS_3, HMI_S_TPMS_NULL3); hmi_engine_set_object_info(HMI_S_TPMS_4, HMI_S_TPMS_NULL4); break; } } static void hmi_Internal_popup_display(DM_Send_PageValue_ST Info) { MSG_EVENT_ENUM Index; U8 buf[10] = "----"; hmi_Internal_bottom_display(Info); Index = Info.DATA.Buffer.msg.MsgType;  /*rle bg start*/ hmi_Internal_popup_rle_display(Index); /*rle bg end*/ switch(Index) { case INDEX_MSG_DOORANDLID_DOOR_L5: case INDEX_MSG_DOORANDLID_DOOR_U5: case INDEX_MSG_WELCOME: hmi_Internal_show_Msg_Door_Status(Info); break; default: hmi_engine_set_object_info(HMI_S_DYN_CON_LEFT_DOOR, HMI_DOOR1_NULL); hmi_engine_set_object_info(HMI_S_DYN_CON_RIGHT_DOOR, HMI_DOOR2_NULL); break; } /*rang text manager start*/ switch(Index) { case INDEX_MSG_FUEL_LOW_U50: case INDEX_MSG_FUEL_CRITICAL_U50: sprintf(buf,"%d km",(Info.DATA.Buffer.msg.MsgData.Range.RangeToEmpty%1000)); hmi_engine_edit_text(HMI_T_MSG_RANG_VALUE,buf); hmi_engine_set_object_info(HMI_MSG_DYN,HMI_S_CON_RANG_TEXT); break; default:  hmi_engine_set_object_info(HMI_MSG_DYN,HMI_NULL_CON); break; } /*rang text manager end*/  /*text manager tire*/ hmi_Internal_popup_msg_showTire(Info); hmi_engine_set_object_info(HMI_SPRITE_CON_MSG, HMI_PopUpMsgTbl[Index].HMI_MSG_SPRITE_ID); hmi_engine_set_object_info(HMI_FUNC_CON_MSG, HMI_PopUpMsgTbl[Index].HMI_MSG_FUNCTION_ID);  }   static void hmi_Internal_title_display(U8 MainPage) { #if 0 switch (MainPage) { case MAINFUCTION_TC: hmi_engine_set_object_info(HMI_FUNC_SPRITE_CONTAINER, HMI_TITLE_CON_TRIP); hmi_engine_set_object_info(HMI_TITLE_CON_TRIP, HMI_TRIP_CON_ICON_ON); hmi_engine_set_object_info(HMI_TITLE_CON_SETTING, HMI_SETTING_CON_ICON_OFF); hmi_engine_set_object_info(HMI_TITLE_CON_MEDIA, HMI_MEDIA_CON_ICON_OFF); hmi_engine_set_object_info(HMI_TITLE_CON_FAULT, HMI_FAULT_CON_ICON_OFF); break; case MAINFUCTION_SET: hmi_engine_set_object_info(HMI_FUNC_SPRITE_CONTAINER, HMI_TITLE_CON_SETTING); hmi_engine_set_object_info(HMI_TITLE_CON_TRIP, HMI_TRIP_CON_ICON_OFF); hmi_engine_set_object_info(HMI_TITLE_CON_SETTING, HMI_SETTING_CON_ICON_ON); hmi_engine_set_object_info(HMI_TITLE_CON_MEDIA, HMI_MEDIA_CON_ICON_OFF); hmi_engine_set_object_info(HMI_TITLE_CON_FAULT, HMI_FAULT_CON_ICON_OFF); break; case MAINFUCTION_ENTERTAINMENT: hmi_engine_set_object_info(HMI_FUNC_SPRITE_CONTAINER, HMI_TITLE_CON_MEDIA); hmi_engine_set_object_info(HMI_TITLE_CON_TRIP, HMI_TRIP_CON_ICON_OFF); hmi_engine_set_object_info(HMI_TITLE_CON_SETTING, HMI_SETTING_CON_ICON_OFF); hmi_engine_set_object_info(HMI_TITLE_CON_MEDIA, HMI_MEDIA_CON_ICON_ON); hmi_engine_set_object_info(HMI_TITLE_CON_FAULT, HMI_FAULT_CON_ICON_OFF); break; case MAINFUCTION_FAULT: hmi_engine_set_object_info(HMI_FUNC_SPRITE_CONTAINER, HMI_TITLE_CON_FAULT); hmi_engine_set_object_info(HMI_TITLE_CON_TRIP, HMI_TRIP_CON_ICON_OFF); hmi_engine_set_object_info(HMI_TITLE_CON_SETTING, HMI_SETTING_CON_ICON_OFF); hmi_engine_set_object_info(HMI_TITLE_CON_MEDIA, HMI_MEDIA_CON_ICON_OFF); hmi_engine_set_object_info(HMI_TITLE_CON_FAULT, HMI_FAULT_CON_ICON_ON); break; } #else switch (MainPage) { case MAINFUCTION_TC: hmi_engine_set_object_info(HMI_S_DYN_TITLE_ICON,HMI_S_CON_TITLE_TC_ICON); break; case MAINFUCTION_SET: hmi_engine_set_object_info(HMI_S_DYN_TITLE_ICON,HMI_S_CON_TITLE_SET_ICON); break; case MAINFUCTION_ENTERTAINMENT: hmi_engine_set_object_info(HMI_S_DYN_TITLE_ICON,HMI_S_CON_TITLE_MUSIC_ICON); break; case MAINFUCTION_FAULT: hmi_engine_set_object_info(HMI_S_DYN_TITLE_ICON,HMI_S_CON_TITLE_FAULT_ICON); break; } #endif }  static void hmi_Internal_showODO(Dm_OdoCrusTgtSpd_ST value) { U8 OdoBuf[20] = " ";  if(FALSE == value.isCrusTgt) {  hmi_engine_set_object_info(HMI_MILEAGE_UNITS_X,70); hmi_engine_set_object_info(HMI_MILEAGE_UNITS_W,28); hmi_engine_set_object_info(HMI_MILEAGE_W,74); if(TRUE == value.show) { sprintf(OdoBuf, "%d", value.value);  }  hmi_engine_edit_text(HMI_MILEAGE, OdoBuf);   if(TRUE == value.show) {  hmi_engine_edit_text(HMI_MILEAGE_UNITS, "km"); }  else { hmi_engine_edit_text(HMI_MILEAGE_UNITS, " "); } } else { sprintf(OdoBuf, "%d ", value.value);   hmi_engine_set_object_info(HMI_MILEAGE_UNITS_X,62); hmi_engine_set_object_info(HMI_MILEAGE_UNITS_W,36); hmi_engine_set_object_info(HMI_MILEAGE_W,66); hmi_engine_edit_text(HMI_MILEAGE, OdoBuf);  hmi_engine_edit_text(HMI_MILEAGE_UNITS, "km/h"); } }  static void hmi_Internal_showTime(PTime_ST time) { U8 TimeBuf[6]= "00:00"; U8 FORMAT[3]= "";  if(0 == time.dispFmt) { if(time.hour > 12) { sprintf(TimeBuf,"%d%d:%d%d",(time.hour-12)/10,(time.hour-12)%10,time.minute/10,time.minute%10); FORMAT[0]= 'P'; FORMAT[1]= 'M'; }  else { if(12 == time.hour) { sprintf(TimeBuf,"%d%d:%d%d",(time.hour)/10,(time.hour)%10,time.minute/10,time.minute%10); FORMAT[0]= 'P'; FORMAT[1]= 'M'; } else if(0 == time.hour) {  sprintf(TimeBuf,"12:%d%d",time.minute/10,time.minute%10); FORMAT[0]= 'A'; FORMAT[1]= 'M'; } else { sprintf(TimeBuf,"%d%d:%d%d",(time.hour)/10,(time.hour)%10,time.minute/10,time.minute%10); FORMAT[0]= 'A'; FORMAT[1]= 'M';  } } } else { sprintf(TimeBuf,"%d%d:%d%d",(time.hour)/10,(time.hour)%10,time.minute/10,time.minute%10); } hmi_engine_edit_text(HMI_TEXT_TIME, TimeBuf); hmi_engine_edit_text(HMI_TIMEFORMAT, FORMAT); }  static void hmi_Internal_showGear(AccGearInfo_ST GearType) {   switch(GearType.level) { case TYPE_ACC_GEARLVLEP: hmi_engine_set_object_info(HMI_GEAR_CON, HMI_GEAR_EP); break; case TYPE_ACC_GEARLVLP: hmi_engine_set_object_info(HMI_GEAR_CON, HMI_GEAR_P); break; case TYPE_ACC_GEARLVLR: hmi_engine_set_object_info(HMI_GEAR_CON, HMI_GEAR_R); break; case TYPE_ACC_GEARLVLN: hmi_engine_set_object_info(HMI_GEAR_CON, HMI_GEAR_N); break; case TYPE_ACC_GEARLVLS: hmi_engine_set_object_info(HMI_GEAR_CON, HMI_GEAR_S); break; case TYPE_ACC_GEARLVLW: hmi_engine_set_object_info(HMI_GEAR_CON, HMI_GEAR_W); break; case TYPE_ACC_GEARLVL7: hmi_engine_set_object_info(HMI_GEAR_CON, HMI_GEAR_7); break; case TYPE_ACC_GEARLVL6: hmi_engine_set_object_info(HMI_GEAR_CON, HMI_GEAR_6); break; case TYPE_ACC_GEARLVL5: hmi_engine_set_object_info(HMI_GEAR_CON, HMI_GEAR_5); break; case TYPE_ACC_GEARLVL4: hmi_engine_set_object_info(HMI_GEAR_CON, HMI_GEAR_4); break; case TYPE_ACC_GEARLVL3: hmi_engine_set_object_info(HMI_GEAR_CON, HMI_GEAR_3); break; case TYPE_ACC_GEARLVL2: hmi_engine_set_object_info(HMI_GEAR_CON, HMI_GEAR_2); break; case TYPE_ACC_GEARLVL1: hmi_engine_set_object_info(HMI_GEAR_CON, HMI_GEAR_1); break; case TYPE_ACC_GEARLVLD: hmi_engine_set_object_info(HMI_GEAR_CON, HMI_GEAR_D); break; case TYPE_ACC_GEARNONE: hmi_engine_set_object_info(HMI_GEAR_CON, HMI_GEAR_NULL); break; default:  hmi_engine_set_object_info(HMI_GEAR_CON, HMI_GEAR_NULL); break; }  switch(GearType.Dir) { case TYPE_GEAR_DIR_UP:  hmi_engine_set_object_info(HMI_GEAR_CON_IMG, HMI_GEAR_ICON_UP); break;  case TYPE_GEAR_DIR_DOWN: hmi_engine_set_object_info(HMI_GEAR_CON_IMG, HMI_GEAR_ICON_DOWN); break; default: hmi_engine_set_object_info(HMI_GEAR_CON_IMG, HMI_NULL_CON); break; }   }   static void hmi_Internal_bottom_display(DM_Send_PageValue_ST Info) { //if(g_Info.DATA.time != Info.DATA.time) if(0 != memcmp(&(g_Info.DATA.time),&(Info.DATA.time),sizeof(PTime_ST))) { hmi_Internal_showTime(Info.DATA.time); } //if(g_Info.DATA.odoTgt.value != Info.DATA.odoTgt.value) if(0 != memcmp(&(g_Info.DATA.odoTgt),&(Info.DATA.odoTgt),sizeof(Dm_OdoCrusTgtSpd_ST))) { hmi_Internal_showODO(Info.DATA.odoTgt); } //if(g_Info.DATA.GearType != Info.DATA.GearType) if(0 != memcmp(&(g_Info.DATA.GearType),&(Info.DATA.GearType),sizeof(AccGearInfo_ST)))  { hmi_Internal_showGear(Info.DATA.GearType); } if(FALSE == DIAG_GetGearShiftUpDwnWarn()) { hmi_engine_set_object_info(HMI_GEAR_CON_IMG, HMI_NULL_CON); }  if(0 == DIAG_GetPrndEn()) { hmi_engine_set_object_info(HMI_GEAR_CON, HMI_GEAR_NULL); } }  static void hmi_Internal_showSpeed(U32 speed) { U8 one; U8 ten; U8 hundred; static BOOL bFisrt = TRUE; NumList_X_ST spdLst;  one = speed % 10; ten = (speed / 10) % 10; hundred = (speed / 100) % 10;  hmi_Internal_change_int_numlist_x(240,speed,&spdLst); if(220 == speed) { spdLst.X_H -=8; spdLst.X_T -=8; spdLst.X_O -=8; } hmi_engine_set_object_info(HMI_SPEED_H, HMI_BIG0 + spdLst.Index_H); hmi_engine_set_object_info(HMI_SPEED_D, HMI_DEC_0+ spdLst.Index_T); hmi_engine_set_object_info(HMI_SPEED_U, HMI_U_0 + spdLst.Index_O);  hmi_engine_set_object_info(HMI_SPEED_NUM_HUNDRED_CON_X,spdLst.X_H); hmi_engine_set_object_info(HMI_SPEED_NUM_HUNDRED_CON_W,NumWidthTab[spdLst.Index_H]); hmi_engine_set_object_info(HMI_SPEED_NUM_DECLARD_CON_X,spdLst.X_T); hmi_engine_set_object_info(HMI_SPEED_NUM_DECLARD_CON_W,NumWidthTab[spdLst.Index_T]); hmi_engine_set_object_info(HMI_SPEED_NUM_UNITS_CON_X,spdLst.X_O); hmi_engine_set_object_info(HMI_SPEED_NUM_UNITS_CON_W,NumWidthTab[spdLst.Index_O]);  }  static void hmi_Internal_showInsFuelComption(AccInstantFuelcsump_ST InsFuelCompn) { U8 one; U8 ten; U32 integer; float decimal; U8 decimal2; float FuelValue; AccInstantFuelcsump_ST fuelcsp;   NumList_X_ST rgLst;  fuelcsp = InsFuelCompn; FuelValue = fuelcsp.InstantFuel; integer = (U32)fuelcsp.InstantFuel; decimal = (U8)((fuelcsp.InstantFuel - integer)*10); one = integer % 10; ten = (integer / 10) % 10;  hmi_Internal_change_InsFuelCsump_numlist_x(240,fuelcsp,&rgLst);  if( (0 == decimal)&& (0 == one)&&(0 == ten)) { hmi_engine_set_object_info(HMI_BIG_POINT_Y,IFC_POINT_LINE_Y);  hmi_engine_set_object_info(HMI_IFC_BLUE_IMG_W,0); } else {  hmi_engine_set_object_info(HMI_BIG_POINT_Y,IFC_POINT_NORMAL_Y);  if(VALID == InsFuelCompn.valid) hmi_engine_set_object_info(HMI_IFC_BLUE_IMG_W,(208*(FuelValue >20 ?20:FuelValue))/20); else  hmi_engine_set_object_info(HMI_IFC_BLUE_IMG_W,0); }  if(fuelcsp.type == 0)/*L/Hour*/ { //hmi_engine_edit_text(HMI_IFC_UNIT, "L/hour"); hmi_engine_set_object_info(HMI_CON_DYN_IFC_UNIT,HMI_CON_S_IFC_UNIT_LHOUR); } else { //hmi_engine_edit_text(HMI_IFC_UNIT, "L/100km"); hmi_engine_set_object_info(HMI_CON_DYN_IFC_UNIT,HMI_CON_S_IFC_UNIT_L100KM); } hmi_engine_set_object_info(HMI_IFC_H, HMI_BIG0 + rgLst.Index_H); hmi_engine_set_object_info(HMI_IFC_D, HMI_DEC_0+ rgLst.Index_T); hmi_engine_set_object_info(HMI_IFC_U, HMI_U_0+ rgLst.Index_O);  hmi_engine_set_object_info(HMI_IFC_NUM_HUNDRED_X,rgLst.X_H); hmi_engine_set_object_info(HMI_IFC_NUM_HUNDRED_W,NumWidthTab[rgLst.Index_H]); hmi_engine_set_object_info(HMI_IFC_NUM_DECLARD_X,rgLst.X_T); hmi_engine_set_object_info(HMI_IFC_NUM_DECLARD_W,NumWidthTab[rgLst.Index_T]); hmi_engine_set_object_info(HMI_IFC_POINT_X,rgLst.X_P);  hmi_engine_set_object_info(HMI_IFC_POINT_W,POINT_WIDTH);  hmi_engine_set_object_info(HMI_IFC_NUM_UNIT_X,rgLst.X_O); hmi_engine_set_object_info(HMI_IFC_NUM_UNIT_W,NumWidthTab[rgLst.Index_O]);  }   static void hmi_Internal_showRange(U16 RangeToEmpty) { U8 one; U8 ten; U8 hundred; NumList_X_ST RgLst; RangeToEmpty = RangeToEmpty%1000; one = RangeToEmpty % 10; ten = (RangeToEmpty / 10) % 10; hundred = (RangeToEmpty / 100) % 10;  hmi_Internal_change_int_numlist_x(240,RangeToEmpty,&RgLst);  hmi_engine_set_object_info(HMI_RANGE_H, HMI_BIG0 + RgLst.Index_H); hmi_engine_set_object_info(HMI_RANGE_D, HMI_DEC_0+ RgLst.Index_T); hmi_engine_set_object_info(HMI_RANGE_U, HMI_U_0 + RgLst.Index_O);  hmi_engine_set_object_info(HMI_RANGE_NUM_HUND_X,RgLst.X_H); hmi_engine_set_object_info(HMI_RANGE_NUM_HUND_W,NumWidthTab[RgLst.Index_H]); hmi_engine_set_object_info(HMI_RANGE_NUM_DEC_X,RgLst.X_T); hmi_engine_set_object_info(HMI_RANGE_NUM_DEC_W,NumWidthTab[RgLst.Index_T]); hmi_engine_set_object_info(HMI_RANGE_NUM_UNIT_X,RgLst.X_O); hmi_engine_set_object_info(HMI_RANGE_NUM_UNIT_W,NumWidthTab[RgLst.Index_O]);  }  static void hmi_Internal_showBat(U16 BatAdcValue) { U8 one; U8 ten; U32 integer; float decimal; U8 decimal2; NumList_X_ST Lst; if((BatAdcValue > 180) || (0 == BatAdcValue)) {  BatAdcValue = 0; hmi_engine_set_object_info(HMI_BIG_POINT_Y,IFC_POINT_LINE_Y);  } else {  hmi_engine_set_object_info(HMI_BIG_POINT_Y,IFC_POINT_NORMAL_Y); }  hmi_Internal_change_float_numlist_x(240,BatAdcValue,&Lst); hmi_engine_set_object_info(HMI_IFC_H, HMI_BIG0 +Lst.Index_H ); hmi_engine_set_object_info(HMI_IFC_D, HMI_DEC_0 + Lst.Index_T); hmi_engine_set_object_info(HMI_IFC_U, HMI_U_0 + Lst.Index_O);  hmi_engine_set_object_info(HMI_IFC_NUM_HUNDRED_X,Lst.X_H); hmi_engine_set_object_info(HMI_IFC_NUM_HUNDRED_W,NumWidthTab[Lst.Index_H]); hmi_engine_set_object_info(HMI_IFC_NUM_DECLARD_X,Lst.X_T); hmi_engine_set_object_info(HMI_IFC_NUM_DECLARD_W,NumWidthTab[Lst.Index_T]);   hmi_engine_set_object_info(HMI_IFC_POINT_X,Lst.X_P);  hmi_engine_set_object_info(HMI_IFC_POINT_W,POINT_WIDTH);  hmi_engine_set_object_info(HMI_IFC_NUM_UNIT_X,Lst.X_O); hmi_engine_set_object_info(HMI_IFC_NUM_UNIT_W,NumWidthTab[Lst.Index_O]);   }    /*********************************************************** Function: HMI_showMainWindowPage  Display Info -- trip1 Display -- trip2 Display -- AvgDrv Time1 Display -- AvgDrv Time2 Displa -- AvgSpd Display -- Calendar Display -- TPMS Display -- FuelConsumption Display  Returns: -void *************************************************************/ static void hmi_Internal_showAutoStart(Dm_TC_AutoStart_ST AutoStart) {   U32 time1; U32 trip1; U32 AvgSpd; float fuelcsmp; U32 Temp; unsigned char as_trip[20] = "---.-"; unsigned char as_driventime[20] = "-----"; unsigned char as_avgspeed[20] = "----"; unsigned char as_fuelcsmp[20] = "----"; /*TRIP DISPLAY*/  if(1 == insTripRollOverPrm) { strcpy(as_trip,"----.-"); } else { strcpy(as_trip,"---.-"); }  trip1 = (AutoStart.ODOValue1/M_TO_100M_FACTOR);/*0.1KM*/ if(0 != trip1) {  if(trip1 >tripMaxTab[insTripRollOverPrm]) { trip1= trip1%tripMaxTab[insTripRollOverPrm];  } else {  } if(M_100_DIST <= trip1) { #if 0  if(M_1000km_DIST <= trip1) { sprintf(as_trip,"%d",trip1/M100_TO_1KM_FACTOR); } else { sprintf(as_trip,"%d.%d",trip1/M100_TO_1KM_FACTOR,trip1%M100_TO_1KM_FACTOR); } #else  sprintf(as_trip,"%d.%d",trip1/M100_TO_1KM_FACTOR,trip1%M100_TO_1KM_FACTOR);  #endif } else { strcpy(as_trip,"----.-"); } }  hmi_engine_edit_text(HMI_T_START_NUM1, as_trip);    /*DRV TIME DISPLAY*/  time1 = AutoStart.DrivenTime1; if(AutoStart.DrivenTime1 > MAX_DRIVEN_TIME)  { time1 -=MAX_DRIVEN_TIME; } else { }  sprintf(as_driventime,"%02d:%02d",time1/3600,(time1%3600)/60);  hmi_engine_edit_text(HMI_T_START_NUM3, as_driventime);  //AvgSpd = AutoStart.AvrgSpeed1; if((0 == time1) ||(0== AutoStart.AvrgSpeed1)) {  sprintf(as_avgspeed,"---.-"); } else { AvgSpd = AutoStart.AvrgSpeed1; if(AvgSpd > 2200)AvgSpd = 2200; if(AvgSpd < 1000) { sprintf(as_avgspeed,"%d.%d", AvgSpd/10,AvgSpd%10);  } else { sprintf(as_avgspeed,"%d", (U32)AvgSpd/10); } }   hmi_engine_edit_text(HMI_T_START_NUM2, as_avgspeed);  fuelcsmp = AutoStart.AvrgFuelConpn1*0.1; //if((VALID == AutoStart.AvrgFuelConpnV1) && (trip1 >= M_300_DIST)) if(VALID == AutoStart.AvrgFuelConpnV1) { sprintf(as_fuelcsmp,"%.1f", fuelcsmp); } else { sprintf(as_fuelcsmp,"--.-"); } hmi_engine_edit_text(HMI_T_START_NUM4, as_fuelcsmp);  }    /*********************************************************** Function: HMI_showMainWindowPage  Display Info -- trip1 Display -- trip2 Display -- AvgDrv Time1 Display -- AvgDrv Time2 Displa -- AvgSpd Display -- Calendar Display -- TPMS Display -- FuelConsumption Display  Returns: -void *************************************************************/ static void hmi_Internal_showAutoRst(Dm_TC_AutoRst_ST AutoRst) {   U32 time1; U32 trip1; U32 AvgSpd; float fuelcsmp; U32 Temp;  unsigned char as_trip[20] = "----.-"; unsigned char as_driventime[20] = "-----"; unsigned char as_avgspeed[20] = "----"; unsigned char as_fuelcsmp[20] = "----";  if(1 == insTripRollOverPrm) { strcpy(as_trip,"----.-"); } else { strcpy(as_trip,"---.-"); }  trip1 = (AutoRst.ODOValue2/M_TO_100M_FACTOR);  if(0 != trip1) {  if(trip1 >tripMaxTab[insTripRollOverPrm]) { trip1 = trip1%tripMaxTab[insTripRollOverPrm]; } else {  } if(M_100_DIST <= trip1) { #if 0  if(M_1000km_DIST <= trip1) { sprintf(as_trip,"%d",trip1/M100_TO_1KM_FACTOR); } else { sprintf(as_trip,"%d.%d",trip1/M100_TO_1KM_FACTOR,trip1%M100_TO_1KM_FACTOR); } #else sprintf(as_trip,"%d.%d",trip1/M100_TO_1KM_FACTOR,trip1%M100_TO_1KM_FACTOR); #endif } else { strcpy(as_trip,"----.-"); } }  hmi_engine_edit_text(HMI_T_RESET_NUM1, as_trip);  /*DRV TIME DISPLAY*/  time1 = AutoRst.DrivenTime2; if(AutoRst.DrivenTime2 > MAX_DRIVEN_TIME)  { time1 -=MAX_DRIVEN_TIME; } else { } sprintf(as_driventime,"%02d:%02d",time1/3600,(time1%3600)/60);   hmi_engine_edit_text(HMI_T_RESET_NUM3, as_driventime);  //AvgSpd = AutoRst.AvrgSpeed2; if((0 == time1) ||(0== AutoRst.AvrgSpeed2)) { sprintf(as_avgspeed,"---.-"); } else { AvgSpd = AutoRst.AvrgSpeed2;  if(AvgSpd > 2200)AvgSpd = 2200;  if(AvgSpd < 1000) sprintf(as_avgspeed,"%d.%d", AvgSpd/10,AvgSpd%10); else  sprintf(as_avgspeed,"%d", (U32)AvgSpd/10); }  hmi_engine_edit_text(HMI_T_RESET_NUM2, as_avgspeed);  fuelcsmp = AutoRst.AvrgFuelConpn2*0.1; // if((VALID == AutoRst.AvrgFuelConpnV2) && (trip1 >= M_300_DIST)) if(VALID == AutoRst.AvrgFuelConpnV2) { sprintf(as_fuelcsmp,"%.1f", (float32_t)fuelcsmp); } else { sprintf(as_fuelcsmp,"--.-"); }  hmi_engine_edit_text(HMI_T_RESET_NUM4, as_fuelcsmp);  }   static void hmi_Internal_ShowTireTitle(U16 index) { switch(index)  { case INDEX_MSG_TPMS_PRESURELOW: hmi_engine_set_object_info(HMI_S_DYN_TPMS_TITLE,HMI_S_CON_WARN_TYRELOW);  break; case INDEX_MSG_TPMS_LEAKAGE: hmi_engine_set_object_info(HMI_S_DYN_TPMS_TITLE,HMI_S_CON_WARN_TYRELEAK);  break; case INDEX_MSG_TPMS_PRESUREHIGH: hmi_engine_set_object_info(HMI_S_DYN_TPMS_TITLE,HMI_S_CON_WARN_TYREHIGH);  break; case INDEX_MSG_TPMS_TEMPHIGH: hmi_engine_set_object_info(HMI_S_DYN_TPMS_TITLE,HMI_S_CON_WARN_TEMPHIGH);  break; case INDEX_MSG_TPMS_BALANCEFAIL: hmi_engine_set_object_info(HMI_S_DYN_TPMS_TITLE,HMI_S_CON_WARN_UNBALANCCE);  break; case INDEX_MSG_TPMS_BATLOW: hmi_engine_set_object_info(HMI_S_DYN_TPMS_TITLE,HMI_S_CON_WARN_BATLOW);  break; default: hmi_engine_set_object_info(HMI_S_DYN_TPMS_TITLE,HMI_S_CON_FUN_TITLE);  break; } } static void hmi_Internal_TyreUnitReMap(U8 Unit,U16 Value,PU8 buf) { float outValue; if(NULL_PTR != buf) { switch(Unit) { case 0://BAR outValue = (float)((float)Value/102); sprintf(buf,"%.1f",outValue); break; case 1://kpa  sprintf(buf,"%d",(U16)Value); break; case 2://psi  outValue = (float)((float)(Value*14.5)/102); sprintf(buf,"%d",(float)outValue); break; } } }   static void hmi_Internal_TyreUnitDisp(U8 Unit,PU8 buf) { float outValue; if(NULL_PTR != buf) { switch(Unit) { case 0://BAR sprintf(buf,"bar"); break; case 1://kpa  sprintf(buf,"kpa"); break; case 2://psi  sprintf(buf,"psi"); break; } } }  static void hmi_Internal_showTirePress(Dm_MsgTirePress_ST Tire) {  static Dm_MsgTirePress_ST hmi_Tire = {0};  U8 buf[10] = "----"; //float value; U8 TireUnt = DIAG_GetTyrePresUnits();  hmi_Internal_ShowTireTitle(Tire.TitleIndex);  hmi_Tire = Tire; if(VALID != Tire.TirePress.FLTirePressV) { sprintf(buf, "-.-"); } else { hmi_Internal_TyreUnitReMap(TireUnt,Tire.TirePress.FLTirePress,buf); }  hmi_engine_edit_text(HMI_T_MSG_KPA1,buf); if((Tire.TirePress.FLTireSts == STATUS_TPMS_TIRE_UNKOWN)  ||(Tire.TirePress.FLTireSts == STATUS_TPMS_TIRE_LOW) || (Tire.TirePress.FLTireSts == STATUS_TPMS_TIRE_LEAKAGE)  || (Tire.TirePress.FLTireSts == STATUS_TPMS_TIRE_HIGH)) { //hmi_engine_set_object_info(HMI_S_TPMS_1, HMI_S_TPMS_RED_1); hmi_engine_set_object_info(HMI_T_MSG_KPA1_COLOUR, 0xff0000);  hmi_engine_set_object_info(HMI_T_UNITS_PA1_COLOUR, 0xff0000); } else { //hmi_engine_set_object_info(HMI_S_TPMS_1, HMI_S_TPMS_BLACK_1); hmi_engine_set_object_info(HMI_T_MSG_KPA1_COLOUR, 0xffffff);  hmi_engine_set_object_info(HMI_T_UNITS_PA1_COLOUR, 0xffffff); }   if(VALID != Tire.TirePress.FLTireTempV) { sprintf(buf, "---"); } else { sprintf(buf, "%d", Tire.TirePress.FLTireTemp); }  hmi_engine_edit_text(HMI_T_MSG_TEM1,buf); if(Tire.TirePress.FLTireSts == STATUS_TPMS_TEMP_HIGH) { //hmi_engine_set_object_info(HMI_S_TPMS_1, HMI_S_TPMS_RED_1); hmi_engine_set_object_info(HMI_T_MSG_TEM1_COLOUR, 0xff0000); hmi_engine_set_object_info(HMI_TPMS_TEM1, HMI_TEM1_RED); } else { //hmi_engine_set_object_info(HMI_S_TPMS_1, HMI_S_TPMS_BLACK_1); hmi_engine_set_object_info(HMI_T_MSG_TEM1_COLOUR, 0xffffff); hmi_engine_set_object_info(HMI_TPMS_TEM1, HMI_TEM1_WHITE); }  if(VALID != Tire.TirePress.FRTirePressV) { //sprintf(FRTireBuf, "-.- kpa"); sprintf(buf, "-.-"); } else { //sprintf(buf, "%d", Tire.TirePress.FRTirePress); hmi_Internal_TyreUnitReMap(TireUnt,Tire.TirePress.FRTirePress,buf); }  hmi_engine_edit_text(HMI_T_MSG_KPA2,buf); if((Tire.TirePress.FRTireSts == STATUS_TPMS_TIRE_UNKOWN)  ||(Tire.TirePress.FRTireSts == STATUS_TPMS_TIRE_LOW) || (Tire.TirePress.FRTireSts == STATUS_TPMS_TIRE_LEAKAGE)  || (Tire.TirePress.FRTireSts == STATUS_TPMS_TIRE_HIGH)) { //hmi_engine_set_object_info(HMI_S_TPMS_2, HMI_S_TPMS_RED_2); hmi_engine_set_object_info(HMI_T_MSG_KPA2_COLOUR, 0xff0000);  hmi_engine_set_object_info(HMI_T_UNITS_PA2_COLOUR, 0xff0000); } else { //hmi_engine_set_object_info(HMI_S_TPMS_2, HMI_S_TPMS_BLACK_2); hmi_engine_set_object_info(HMI_T_MSG_KPA2_COLOUR, 0xffffff);  hmi_engine_set_object_info(HMI_T_UNITS_PA2_COLOUR, 0xffffff); } hmi_Internal_TyreUnitDisp(TireUnt,buf);  hmi_engine_edit_text(HMI_T_UNITS_PA1,buf);  hmi_engine_edit_text(HMI_T_UNITS_PA2,buf);  hmi_engine_edit_text(HMI_T_UNITS_PA3,buf);  hmi_engine_edit_text(HMI_T_UNITS_PA4,buf);  if(VALID != Tire.TirePress.FRTireTempV) { sprintf(buf, "---"); } else { sprintf(buf, "%d", Tire.TirePress.FRTireTemp); }   hmi_engine_edit_text(HMI_T_MSG_TEM2,buf); if(Tire.TirePress.FRTireSts == STATUS_TPMS_TEMP_HIGH) { //hmi_engine_set_object_info(HMI_S_TPMS_2, HMI_S_TPMS_RED_2); hmi_engine_set_object_info(HMI_T_MSG_TEM2_COLOUR, 0xff0000); hmi_engine_set_object_info(HMI_TPMS_TEM2, HMI_TEM2_RED); } else { //hmi_engine_set_object_info(HMI_S_TPMS_2, HMI_S_TPMS_BLACK_2); hmi_engine_set_object_info(HMI_T_MSG_TEM2_COLOUR, 0xffffff); hmi_engine_set_object_info(HMI_TPMS_TEM2, HMI_TEM2_WHITE); }  if(VALID != Tire.TirePress.RLTirePressV) { sprintf(buf, "-.-"); } else { //sprintf(buf, "%d", Tire.TirePress.RLTirePress);  hmi_Internal_TyreUnitReMap(TireUnt,Tire.TirePress.RLTirePress,buf); }  hmi_engine_edit_text(HMI_T_MSG_KPA3,buf); if((Tire.TirePress.RLTireSts == STATUS_TPMS_TIRE_UNKOWN)  ||(Tire.TirePress.RLTireSts == STATUS_TPMS_TIRE_LOW)  || (Tire.TirePress.RLTireSts == STATUS_TPMS_TIRE_LEAKAGE)  || (Tire.TirePress.RLTireSts == STATUS_TPMS_TIRE_HIGH)) { //hmi_engine_set_object_info(HMI_S_TPMS_3, HMI_S_TPMS_RED_3); hmi_engine_set_object_info(HMI_T_MSG_KPA3_COLOUR, 0xff0000); hmi_engine_set_object_info(HMI_T_UNITS_PA3_COLOUR, 0xff0000);  } else { //hmi_engine_set_object_info(HMI_S_TPMS_3, HMI_S_TPMS_BLACK_3); hmi_engine_set_object_info(HMI_T_MSG_KPA3_COLOUR, 0xffffff); hmi_engine_set_object_info(HMI_T_UNITS_PA3_COLOUR, 0xffffff); }  if(VALID != Tire.TirePress.RLTireTempV) { sprintf(buf, "---"); } else { sprintf(buf, "%d", Tire.TirePress.RLTireTemp); }  hmi_engine_edit_text(HMI_T_MSG_TEM3,buf); if(Tire.TirePress.RLTireSts == STATUS_TPMS_TEMP_HIGH) { //hmi_engine_set_object_info(HMI_S_TPMS_3, HMI_S_TPMS_RED_3); hmi_engine_set_object_info(HMI_T_MSG_TEM3_COLOUR, 0xff0000); hmi_engine_set_object_info(HMI_TPMS_TEM3, HMI_TEM3_RED); } else { //hmi_engine_set_object_info(HMI_S_TPMS_3, HMI_S_TPMS_BLACK_3); hmi_engine_set_object_info(HMI_T_MSG_TEM3_COLOUR, 0xffffff); hmi_engine_set_object_info(HMI_TPMS_TEM3, HMI_TEM3_WHITE); }  if(VALID != Tire.TirePress.RRTirePressV) { sprintf(buf, "-.-"); } else { //sprintf(buf, "%d", Tire.TirePress.RRTirePress);  hmi_Internal_TyreUnitReMap(TireUnt,Tire.TirePress.RRTirePress,buf);  }  hmi_engine_edit_text(HMI_T_MSG_KPA4,buf);  if((Tire.TirePress.RRTireSts == STATUS_TPMS_TIRE_UNKOWN)  ||(Tire.TirePress.RRTireSts == STATUS_TPMS_TIRE_LOW)  || (Tire.TirePress.RRTireSts == STATUS_TPMS_TIRE_LEAKAGE)  || (Tire.TirePress.RRTireSts == STATUS_TPMS_TIRE_HIGH)) { //hmi_engine_set_object_info(HMI_S_TPMS_4, HMI_S_TPMS_RED_4); hmi_engine_set_object_info(HMI_T_MSG_KPA4_COLOUR, 0xff0000); hmi_engine_set_object_info(HMI_T_UNITS_PA4_COLOUR, 0xff0000); } else { //hmi_engine_set_object_info(HMI_S_TPMS_4, HMI_S_TPMS_BLACK_4); hmi_engine_set_object_info(HMI_T_MSG_KPA4_COLOUR, 0xffffff); hmi_engine_set_object_info(HMI_T_UNITS_PA4_COLOUR, 0xffffff); }  if(VALID != Tire.TirePress.RRTireTempV) { sprintf(buf, "---"); } else { sprintf(buf, "%d", Tire.TirePress.RRTireTemp); }   hmi_engine_edit_text(HMI_T_MSG_TEM4,buf); if(Tire.TirePress.RRTireSts == STATUS_TPMS_TEMP_HIGH) { //hmi_engine_set_object_info(HMI_S_TPMS_4, HMI_S_TPMS_RED_4); hmi_engine_set_object_info(HMI_T_MSG_TEM4_COLOUR, 0xff0000); hmi_engine_set_object_info(HMI_TPMS_TEM4, HMI_TEM4_RED); } else { //hmi_engine_set_object_info(HMI_S_TPMS_4, HMI_S_TPMS_BLACK_4); hmi_engine_set_object_info(HMI_T_MSG_TEM4_COLOUR, 0xffffff); hmi_engine_set_object_info(HMI_TPMS_TEM4, HMI_TEM4_WHITE); } #if 1 if(STATUS_TPMS_TIRE_NORMAL == Tire.TirePress.FLTireSts) { hmi_engine_set_object_info(HMI_S_TPMS_1, HMI_S_TPMS_BLACK_1); } else { hmi_engine_set_object_info(HMI_S_TPMS_1, HMI_S_TPMS_RED_1); }  if(STATUS_TPMS_TIRE_NORMAL == Tire.TirePress.FRTireSts) { hmi_engine_set_object_info(HMI_S_TPMS_2, HMI_S_TPMS_BLACK_2); } else { hmi_engine_set_object_info(HMI_S_TPMS_2, HMI_S_TPMS_RED_2); }  if(STATUS_TPMS_TIRE_NORMAL == Tire.TirePress.RLTireSts) { hmi_engine_set_object_info(HMI_S_TPMS_3, HMI_S_TPMS_BLACK_3); } else { hmi_engine_set_object_info(HMI_S_TPMS_3, HMI_S_TPMS_RED_3); }  if(STATUS_TPMS_TIRE_NORMAL == Tire.TirePress.RRTireSts) { hmi_engine_set_object_info(HMI_S_TPMS_4, HMI_S_TPMS_BLACK_4); } else { hmi_engine_set_object_info(HMI_S_TPMS_4, HMI_S_TPMS_RED_4); } #endif }  static U8 hmi_Internal_isTire_WarnSts(MSG_EVENT_ENUM Index,U8 sts) { U8 flg = FALSE; switch(Index) { case INDEX_MSG_TPMS_PRESURELOW: if(sts == STATUS_TPMS_TIRE_LOW) flg = TRUE; break; case INDEX_MSG_TPMS_LEAKAGE: if(sts == STATUS_TPMS_TIRE_LEAKAGE) flg = TRUE; break; case INDEX_MSG_TPMS_PRESUREHIGH: if(sts == STATUS_TPMS_TIRE_HIGH) flg = TRUE; break; } return flg; }  static void hmi_Internal_showMsgTire(MSG_EVENT_ENUM Index,Dm_TC_TirePress_ST Tire) {  static Dm_TC_TirePress_ST hmi_Tire = {0};  U8 buf[10] = "----"; U8 flg = FALSE; float Value = 0;  //hmi_ShowTireTitle(Tire.TitleIndex); if(0 == memcmp(&hmi_Tire,&Tire,sizeof(Dm_MsgTirePress_ST))) { return; } hmi_Tire = Tire; Value = ((float)Tire.FLTirePress/102); if(VALID != Tire.FLTirePressV) { sprintf(buf, "-.-"); } else { sprintf(buf, "%.1f", Value); }  hmi_engine_edit_text(HMI_MSG_TEXT_TIRE_FL,buf);  flg = hmi_Internal_isTire_WarnSts(Index,Tire.FLTireSts); if(TRUE == flg) { hmi_engine_set_object_info(HMI_MSG_TEXT_TIRE_FL_COLOUR, 0xff0000); } else { hmi_engine_set_object_info(HMI_MSG_TEXT_TIRE_FL_COLOUR, 0xffffff); }  Value = ((float)Tire.FRTirePress/102); if(VALID != Tire.FRTirePressV) { //sprintf(FRTireBuf, "-.- kpa"); sprintf(buf, "-.-"); } else { sprintf(buf, "%.1f", Value);  }  hmi_engine_edit_text(HMI_MSG_TEXT_TIRE_FR,buf);    flg = hmi_Internal_isTire_WarnSts(Index,Tire.FRTireSts); if(TRUE == flg) { //hmi_engine_set_object_info(HMI_S_TPMS_2, HMI_S_TPMS_RED_2); hmi_engine_set_object_info(HMI_MSG_TEXT_TIRE_FR_COLOUR, 0xff0000); } else {  hmi_engine_set_object_info(HMI_MSG_TEXT_TIRE_FR_COLOUR, 0xffffff); }  Value = ((float)Tire.RLTirePress/102); if(VALID != Tire.RLTirePressV) { sprintf(buf, "-.-"); } else { sprintf(buf, "%.1f", Value); }  hmi_engine_edit_text(HMI_MSG_TEXT_TIRE_RL,buf);  flg = hmi_Internal_isTire_WarnSts(Index,Tire.RLTireSts); if(TRUE == flg) {  hmi_engine_set_object_info(HMI_MSG_TEXT_TIRE_RL_COLOUR, 0xff0000);  } else { hmi_engine_set_object_info(HMI_MSG_TEXT_TIRE_RL_COLOUR, 0xffffff); }   Value = ((float)Tire.RRTirePress/102); if(VALID != Tire.RRTirePressV) { sprintf(buf, "-.-"); } else { sprintf(buf, "%.1f", Value); }  hmi_engine_edit_text(HMI_MSG_TEXT_TIRE_RR,buf);  flg = hmi_Internal_isTire_WarnSts(Index,Tire.RRTireSts); if(TRUE == flg) { hmi_engine_set_object_info(HMI_MSG_TEXT_TIRE_RR_COLOUR, 0xff0000); } else { hmi_engine_set_object_info(HMI_MSG_TEXT_TIRE_RR_COLOUR, 0xffffff); } }   static void hmi_Internal_show_setmain_Title(Dm_Setting_ST SetSel) {  switch(SetSel.Item[0]) {  case ITEM_SETMAIN_NULL: hmi_engine_set_object_info(HMI_S_SET_ITEM0,HMI_SETMAIN_NULL);  break; case ITEM_SETMAIN_ILLU: hmi_engine_set_object_info(HMI_S_SET_ITEM0,HMI_SETMAIN_ILLU_ITEM); break; case ITEM_SETMAIN_LIMIT: hmi_engine_set_object_info(HMI_S_SET_ITEM0,HMI_SETMAIN_SPDLMT_ITEM); break; case ITEM_SETMAIN_SCSOFF: hmi_engine_set_object_info(HMI_S_SET_ITEM0,HMI_SETMAIN_SCSOFF_ITEM); break; default: break; } switch(SetSel.Item[1]) {  case ITEM_SETMAIN_NULL: hmi_engine_set_object_info(HMI_MAIN_MID_CON,HMI_S_SET_ITEM1_NULL1); break; case ITEM_SETMAIN_ILLU: hmi_engine_set_object_info(HMI_MAIN_MID_CON,HMI_S_SET_ITEM1_NULL2); break; case ITEM_SETMAIN_LIMIT: hmi_engine_set_object_info(HMI_MAIN_MID_CON,HMI_MID_LIMIT); break; case ITEM_SETMAIN_SCSOFF: hmi_engine_set_object_info(HMI_MAIN_MID_CON,HMI_MID_OFF); break; default: break; } switch(SetSel.Item[2]) {  case ITEM_SETMAIN_NULL: hmi_engine_set_object_info(HMI_MAIN_LOW_CON,HMI_NULL_CON); break; case ITEM_SETMAIN_ILLU: hmi_engine_set_object_info(HMI_MAIN_LOW_CON,HMI_S_SET_ITEM2_NULL1); break; case ITEM_SETMAIN_LIMIT: hmi_engine_set_object_info(HMI_MAIN_LOW_CON,HMI_S_SET_ITEM3_NULL1); break; case ITEM_SETMAIN_SCSOFF: hmi_engine_set_object_info(HMI_MAIN_LOW_CON,HMI_MAIN_LOW_SCS); break; default: break; } } static void hmi_Internal_ShowSettingFocus(Dm_Setting_ST SetSel) {  hmi_Internal_show_setmain_Title(SetSel); switch(SetSel.Sel) { case 0: hmi_engine_set_object_info(HMI_S_SET_MAIN, HMI_MAIN_ILLU_SELECT); break; case 1: hmi_engine_set_object_info(HMI_S_SET_MAIN, HMI_MAIN_LIMIT_SELECT); break; case 2: hmi_engine_set_object_info(HMI_S_SET_MAIN, HMI_MAIN_SCS_SELECT); break; } if((ITEM_SETMAIN_NULL == SetSel.Item[0])  && (ITEM_SETMAIN_NULL == SetSel.Item[1]) && (ITEM_SETMAIN_NULL == SetSel.Item[2])) {  hmi_engine_set_object_info(HMI_S_SET_MAIN, HMI_MAIN_NULL);  } }      static void hmi_Internal_ShowSpeedLmitSel(U8 SpeedLimit) {  NumList_X_ST SpdLmtList; if(SpeedLimit == INDEX_SPEEDLIMIT_OFF) { hmi_engine_edit_text(HMI_T_LIMIT_TOP, HMI_SpeedLimitTbl[INDEX_SPEEDLIMIT_220]); //hmi_engine_edit_text(HMI_T_LIMIT_MID, HMI_SpeedLimitTbl[SpeedLimit]); hmi_engine_edit_text(HMI_T_LIMIT_LOW, HMI_SpeedLimitTbl[INDEX_SPEEDLIMIT_30]); } else if(SpeedLimit == INDEX_SPEEDLIMIT_220) { hmi_engine_edit_text(HMI_T_LIMIT_TOP, HMI_SpeedLimitTbl[SpeedLimit - 1]); //hmi_engine_edit_text(HMI_T_LIMIT_MID, HMI_SpeedLimitTbl[SpeedLimit]); hmi_engine_edit_text(HMI_T_LIMIT_LOW, HMI_SpeedLimitTbl[INDEX_SPEEDLIMIT_OFF]); } else if(SpeedLimit == INDEX_SPEEDLIMIT_30) { hmi_engine_edit_text(HMI_T_LIMIT_TOP, HMI_SpeedLimitTbl[INDEX_SPEEDLIMIT_OFF]); //hmi_engine_edit_text(HMI_T_LIMIT_MID, HMI_SpeedLimitTbl[SpeedLimit]); hmi_engine_edit_text(HMI_T_LIMIT_LOW, HMI_SpeedLimitTbl[SpeedLimit+1]); } else { hmi_engine_edit_text(HMI_T_LIMIT_TOP, HMI_SpeedLimitTbl[SpeedLimit - 1]); //hmi_engine_edit_text(HMI_T_LIMIT_MID, HMI_SpeedLimitTbl[SpeedLimit]); hmi_engine_edit_text(HMI_T_LIMIT_LOW, HMI_SpeedLimitTbl[SpeedLimit + 1]); } hmi_Internal_SpdLmt_int_numlist_x(240,SpeedLimit*5,&SpdLmtList);  if(0 != SpeedLimit) { hmi_engine_set_object_info(HMI_CON_DYN_SPDLIMIT_MID_H,HMI_CON_S_SPDLMT_MID_H_NUM0+SpdLmtList.Index_H); hmi_engine_set_object_info(HMI_CON_DYN_SPDLIMIT_MID_T,HMI_CON_S_SPDLMT_MID_T_NUM0+SpdLmtList.Index_T); hmi_engine_set_object_info(HMI_CON_DYN_SPDLIMIT_MID_O,HMI_CON_S_SPDLMT_MID_O_NUM0+SpdLmtList.Index_O);   hmi_engine_set_object_info(HMI_S_CON_SPDLMT_MID_H_X,SpdLmtList.X_H); hmi_engine_set_object_info(HMI_S_CON_SPDLMT_MID_H_W,SpdLmtWidthTab[SpdLmtList.Index_H]); hmi_engine_set_object_info(HMI_S_CON_SPDLMT_MID_T_X ,SpdLmtList.X_T); hmi_engine_set_object_info(HMI_S_CON_SPDLMT_MID_T_W ,SpdLmtWidthTab[SpdLmtList.Index_T]); hmi_engine_set_object_info(HMI_S_CON_SPDLMT_MID_O_X,SpdLmtList.X_O); hmi_engine_set_object_info(HMI_S_CON_SPDLMT_MID_O_W,SpdLmtWidthTab[SpdLmtList.Index_O]); hmi_engine_set_object_info(HMI_CON_DYN_SPDLMT_OFF,HMI_CON_S_SPDLMT_OFF_HIDE); }  else {  hmi_engine_set_object_info(HMI_CON_DYN_SPDLIMIT_MID_H,HMI_CON_S_SPDLMT_MID_H_NUM0+11); hmi_engine_set_object_info(HMI_CON_DYN_SPDLIMIT_MID_T,HMI_CON_S_SPDLMT_MID_T_NUM0+11); hmi_engine_set_object_info(HMI_CON_DYN_SPDLIMIT_MID_O,HMI_CON_S_SPDLMT_MID_O_NUM0+11); hmi_engine_set_object_info(HMI_CON_DYN_SPDLMT_OFF,HMI_CON_S_SPDMT_OFF_SHOW); } }       static void hmi_Internal_ShowMediaMusic(U8 src) { if(src >9) src = 0; hmi_engine_set_object_info(HMI_CON_MEDIA,HMI_S_MEDIA_CON_0 + src);  }   static void hmi_Internal_show_NaviDistList_Page(U16 x,U16 WidMax,U16 NaivDist,U8 Unit) { U16 width = 0; U8 x_start = 0; U8 i = 0; U16 Dist = 0; /*Dist max:32766*/ NaviDistList_ST List;  Dist = NaivDist; if(Dist >= 0x7FFF) { for(i = 0;i < 6; i ++) { List.Index[i] = 11; List.Pos_X[i]= 0; } } else { for(i = 5;i >0 ; i --) { if(0 == Dist/((U16)pow(10,i-1))) { if( 5 == i) { List.Index[5 - i] = 11; } else if( (i < 5) && (11 == List.Index[5 - i-1])) List.Index[5 - i] = 11; else List.Index[5 - i] = 0;  } else { List.Index[5 - i] = Dist/((U16)pow(10,i-1)); }  Dist = Dist % ((U16)pow(10,i-1)); } } if(1 == Unit)/*unit:km*/ {  if(11 == List.Index[3]) List.Index[3] = 0; if(11 == List.Index[4]) List.Index[4] = 0; List.Index[5] = List.Index[4];/*MOVE 4 AFTER POINT*/ List.Index[4] = 10;/*POINT*/ //List.Index[6] = 11;  } else/*unit:m*/ {  if(11 == List.Index[4]) List.Index[4] = 0;  List.Index[5] = 11; //List.Index[6] = 11; }   for(i = 0; i< 6;i ++) { width += NaviDistTab[List.Index[i]]; if(11 != NaviDistTab[List.Index[i]]) width +=4; } if(1 == Unit)/*unit:km*/ { width += 28;//km length }  else { width += 16;//m length } x_start = x + ((WidMax - width)/2);  for( i = 0 ; i< 6; i++) { if(0 == i) List.Pos_X[i] = x_start; else  List.Pos_X[i] = List.Pos_X[i-1] + NaviDistTab[List.Index[i-1]];  if(11 != NaviDistTab[List.Index[i-1]]) List.Pos_X[i] +=4; }  hmi_engine_set_object_info(HMI_CON_NAVI_DYN_DIST1,HMI_CON_NAVI_DIST1_NUM0 + List.Index[0]); hmi_engine_set_object_info(HMI_CON_NAVI_DYN_DIST2,HMI_CON_NAVI_DIST2_NUM0 + List.Index[1]); hmi_engine_set_object_info(HMI_CON_NAVI_DYN_DIST3,HMI_CON_NAVI_DIST3_NUM0 + List.Index[2]); hmi_engine_set_object_info(HMI_CON_NAVI_DYN_DIST4,HMI_CON_NAVI_DIST4_NUM0 + List.Index[3]); hmi_engine_set_object_info(HMI_CON_NAVI_DYN_DIST5,HMI_CON_NAVI_DIST5_NUM0 + List.Index[4]); hmi_engine_set_object_info(HMI_CON_NAVI_DYN_DIST6,HMI_CON_NAVI_DIST6_NUM0 + List.Index[5]);  hmi_engine_set_object_info(HMI_S_CON_NAVI_DIST1_X, List.Pos_X[0]); hmi_engine_set_object_info(HMI_S_CON_NAVI_DIST1_W, NaviDistTab[List.Index[0]]); hmi_engine_set_object_info(HMI_S_CON_NAVI_DIST2_X, List.Pos_X[1]); hmi_engine_set_object_info(HMI_S_CON_NAVI_DIST2_W, NaviDistTab[List.Index[1]]); hmi_engine_set_object_info(HMI_S_CON_NAVI_DIST3_X, List.Pos_X[2]); hmi_engine_set_object_info(HMI_S_CON_NAVI_DIST3_W, NaviDistTab[List.Index[2]]); hmi_engine_set_object_info(HMI_S_CON_NAVI_DIST4_X, List.Pos_X[3]); hmi_engine_set_object_info(HMI_S_CON_NAVI_DIST4_W, NaviDistTab[List.Index[3]]); hmi_engine_set_object_info(HMI_S_CON_NAVI_DIST5_X, List.Pos_X[4]); hmi_engine_set_object_info(HMI_S_CON_NAVI_DIST5_W, NaviDistTab[List.Index[4]]); hmi_engine_set_object_info(HMI_S_CON_NAVI_DIST6_X, List.Pos_X[5]); hmi_engine_set_object_info(HMI_S_CON_NAVI_DIST6_W, NaviDistTab[List.Index[5]]);  if(1 == Unit)/*unit:km*/ { hmi_engine_set_object_info(HMI_CON_NAVI_DYN_UNIT,HMI_CON_NAVI_UNIT_KM); }  else { hmi_engine_set_object_info(HMI_CON_NAVI_DYN_UNIT,HMI_CON_NAVI_UNIT_M); } hmi_engine_set_object_info(HMI_S_CON_NAVI_UNIT_X,List.Pos_X[5]+NaviDistTab[List.Index[5]]); if(1 == Unit)/*unit:km*/ { hmi_engine_set_object_info(HMI_S_CON_NAVI_UNIT_W,28); }  else { hmi_engine_set_object_info(HMI_S_CON_NAVI_UNIT_W,16); } }  static void hmi_Internal_ShowNavi(Dm_NAVI_ST Navi) { char NaviBuf[10] = "";  if(Navi.NavDircn == 0) {  sprintf(NaviBuf, "");  hmi_engine_set_object_info(HMI_NAVI_NUM, HMI_NAVI_DIST_NULL); hmi_engine_set_object_info(HMI_CON_NAVI_DYN_DIST1,HMI_CON_NAVI_DIST1_NUM0 + 11); hmi_engine_set_object_info(HMI_CON_NAVI_DYN_DIST2,HMI_CON_NAVI_DIST2_NUM0 + 11); hmi_engine_set_object_info(HMI_CON_NAVI_DYN_DIST3,HMI_CON_NAVI_DIST3_NUM0 + 11); hmi_engine_set_object_info(HMI_CON_NAVI_DYN_DIST4,HMI_CON_NAVI_DIST4_NUM0 + 11); hmi_engine_set_object_info(HMI_CON_NAVI_DYN_DIST5,HMI_CON_NAVI_DIST5_NUM0 + 11); hmi_engine_set_object_info(HMI_CON_NAVI_DYN_DIST6,HMI_CON_NAVI_DIST6_NUM0 + 11); hmi_engine_set_object_info(HMI_CON_NAVI_DYN_UNIT,HMI_CON_NAVI_UNIT_NULL); } else {  hmi_engine_set_object_info(HMI_NAVI_NUM, HMI_NAVI_DIST_CON); hmi_Internal_show_NaviDistList_Page(0,240,Navi.NavDist,Navi.NaviUnit);  }  hmi_engine_edit_text(HMI_NAVI_DIST_TEXT, NaviBuf); //hmi_engine_set_object_info(HMI_NAVI_DIST_TEXT_COLOUR, 0x404040);  if(Navi.NavDircn <= 61) hmi_engine_set_object_info(HMI_NAVI_IMG, HMI_S_NAVI_CON_0 + Navi.NavDircn); else  hmi_engine_set_object_info(HMI_NAVI_IMG, HMI_S_NAVI_CON_0 + 16); }   static void hmi_Internal_show_FaultList_Page(U8 index,U8 Total) { U8 width = 0; U8 x_start = 0; U8 i = 0;  FltList_ST fltList; if(0 == index/10) { width += 0; fltList.Index[0] = NUMBER_NULL_INDEX; } else { width +=FltLstWidthTab[index/10];  fltList.Index[0] = index/10; } width += FltLstWidthTab[index%10]; fltList.Index[1] = index%10;  width += XIEXIAN_WIDTH;//8 fltList.Index[2] = XIEXIAN_INDEX;  if(0 == Total/10) { width += 0;  fltList.Index[3] = NUMBER_NULL_INDEX; } else { width +=FltLstWidthTab[Total/10];  fltList.Index[3] = Total/10; }   width += FltLstWidthTab[Total%10]; fltList.Index[4] = Total%10;  for( i = 0; i < 4; i ++) { if((fltList.Index[i] >= 0) &&(fltList.Index[i] <= 9)) width +=FLTLST_SPACE; }  x_start = ((240-width)/2); if(x_start%4) { x_start -=(x_start%4); }  fltList.Pos_X[0] = x_start; fltList.Pos_X[1] = (fltList.Pos_X[0]+FltLstWidthTab[fltList.Index[0]] + FLTLST_SPACE); fltList.Pos_X[2] = (fltList.Pos_X[1]+FltLstWidthTab[fltList.Index[1]]+ FLTLST_SPACE); fltList.Pos_X[3] = (fltList.Pos_X[2]+XIEXIAN_WIDTH ); fltList.Pos_X[4] = (fltList.Pos_X[3]+FltLstWidthTab[fltList.Index[3]]+ FLTLST_SPACE);  hmi_engine_set_object_info(HMI_CON_FAULT_DYN_PAGE1,HMI_CON_FAULT_PAGE1_NUM0+fltList.Index[0]); hmi_engine_set_object_info(HMI_CON_FAULT_DYN_PAGE2,HMI_CON_FAULT_PAGE2_NUM0+fltList.Index[1]); hmi_engine_set_object_info(HMI_CON_FAULT_DYN_PAGE3,HMI_CON_FAULT_PAGE3_NUM0+fltList.Index[3]); hmi_engine_set_object_info(HMI_CON_FAULT_DYN_PAGE4,HMI_CON_FAULT_PAGE4_NUM0+fltList.Index[4]); hmi_engine_set_object_info(HMI_CON_FAULT_DYN_DIST_LINE,HMI_S_CON_FLULT_PAGE_LINE_L);  hmi_engine_set_object_info(HMI_S_CON_FAULT_PAGE1_X,fltList.Pos_X[0]); hmi_engine_set_object_info(HMI_S_CON_FAULT_PAGE1_W,FltLstWidthTab[fltList.Index[0]]); hmi_engine_set_object_info(HMI_S_CON_FAULT_PAGE2_X,fltList.Pos_X[1]); hmi_engine_set_object_info(HMI_S_CON_FAULT_PAGE2_W,FltLstWidthTab[fltList.Index[1]]); hmi_engine_set_object_info(HMI_S_CON_FAULT_PAGE_LINE_X,fltList.Pos_X[2]); hmi_engine_set_object_info(HMI_S_CON_FAULT_PAGE_LINE_W,XIEXIAN_WIDTH); hmi_engine_set_object_info(HMI_S_CON_FAULT_PAGE3_X,fltList.Pos_X[3]); hmi_engine_set_object_info(HMI_S_CON_FAULT_PAGE3_W,FltLstWidthTab[fltList.Index[3]]); hmi_engine_set_object_info(HMI_S_CON_FAULT_PAGE4_X,fltList.Pos_X[4]); hmi_engine_set_object_info(HMI_S_CON_FAULT_PAGE4_W,FltLstWidthTab[fltList.Index[4]]);  }  static void hmi_Internal_ShowFaultList(Dm_Fault_List_ST fault) { U8 buf[10] = "----";   hmi_engine_set_object_info(HMI_S_DYN_LIST0, HMI_FltLstTbl[fault.Item[0]].list[0]);  hmi_engine_set_object_info(HMI_S_FLTLIST_DYN0_LINE,HMI_S_CON_FLTLIST_LINE1);   hmi_engine_set_object_info(HMI_S_DYN_LIST1, HMI_FltLstTbl[fault.Item[1]].list[1]);  if(INDEX_MSG_NULL == fault.Item[1]) { hmi_engine_set_object_info(HMI_S_FLTLIST_DYN1_LINE,HMI_S_CON_FLTLIST_LINE2_NULL); } else { hmi_engine_set_object_info(HMI_S_FLTLIST_DYN1_LINE,HMI_S_CON_FLTLIST_LINE2); }  hmi_engine_set_object_info(HMI_S_DYN_LIST2, HMI_FltLstTbl[fault.Item[2]].list[2]);  if(INDEX_MSG_NULL == fault.Item[2]) { hmi_engine_set_object_info(HMI_S_FLTLIST_DYN2_LINE,HMI_S_CON_FLTLIST_LINE3_NULL); } else { hmi_engine_set_object_info(HMI_S_FLTLIST_DYN2_LINE,HMI_S_CON_FLTLIST_LINE3); }  hmi_engine_set_object_info(HMI_S_DYN_LIST3, HMI_FltLstTbl[fault.Item[3]].list[3]);  if(INDEX_MSG_NULL == fault.Item[3]) { hmi_engine_set_object_info(HMI_S_FLTLIST_DYN3_LINE,HMI_S_CON_FLTLIST_LINE4_NULL); } else { hmi_engine_set_object_info(HMI_S_FLTLIST_DYN3_LINE,HMI_S_CON_FLTLIST_LINE4); }  if((INDEX_MSG_NULL == fault.Item[0]) && (INDEX_MSG_NULL == fault.Item[1]) && (INDEX_MSG_NULL == fault.Item[2]) && (INDEX_MSG_NULL == fault.Item[3])) { // hmi_engine_set_object_info(HMI_S_DYN_PAGE_NO,HMI_S_CON_PAGE_NO_NULL); hmi_engine_set_object_info(HMI_CON_FAULT_DYN_PAGE1,HMI_CON_FAULT_PAGE1_NUM0+11); hmi_engine_set_object_info(HMI_CON_FAULT_DYN_PAGE2,HMI_CON_FAULT_PAGE2_NUM0+11); hmi_engine_set_object_info(HMI_CON_FAULT_DYN_PAGE3,HMI_CON_FAULT_PAGE3_NUM0+11); hmi_engine_set_object_info(HMI_CON_FAULT_DYN_PAGE4,HMI_CON_FAULT_PAGE4_NUM0+11); hmi_engine_set_object_info(HMI_CON_FAULT_DYN_DIST_LINE,HMI_S_CON_FLULT_PAGE_LINE_N);  } else { // sprintf(buf, "%d/%d", (fault.index/4)+1,(fault.total/4)+(fault.total%4? 1:0));  // hmi_engine_edit_text(HMI_TEXT_FLTLIST_PAGE_NO,buf); // hmi_engine_set_object_info(HMI_S_DYN_PAGE_NO,HMI_S_CON_PAGE_NO_NULL); hmi_Internal_show_FaultList_Page((fault.index/4)+1,(fault.total/4)+(fault.total%4? 1:0)); //hmi_engine_set_object_info(HMI_S_DYN_PAGE_NO,HMI_S_CON_PAGE_NO_TEXT);  //hmi_engine_set_object_info(HMI_TEXT_FLTLIST_PAGE_NO_COLOUR, 0xff3c3c3c); }  } static void hmi_Internal_show_setPage(DM_Send_PageValue_ST Info) {  switch(Info.CMD.SubPage) { case SUBFUCTION_SETTING: hmi_Internal_ShowSettingFocus(Info.DATA.Buffer.SetMain); break; case SUBFUCTION_SET_ILLU: hmi_engine_set_object_info(HMI_S_SET_ILLU, HMI_S_ILLU_LEVEL_OFF + Info.DATA.Buffer.IlluLevel); break; case SUBFUCTION_SET_SPEEDLIMIT: hmi_Internal_ShowSpeedLmitSel(Info.DATA.Buffer.SpeadLimit); break; case SUBFUCTION_SET_SCS: if(0 == Info.DATA.Buffer.SCSEn)  hmi_engine_set_object_info(HMI_S_SET_SCS, HMI_SCS_SELECT_TOP); else hmi_engine_set_object_info(HMI_S_SET_SCS, HMI_SCS_SELECT_MID); break; } }  static void hmi_Internal_set_tripcomputer_display(DM_Send_PageValue_ST pInfo) { switch(pInfo.CMD.SubPage) { case SUBFUCTION_TC_SPEED : //hmi_showSpeed(pInfo.DATA.Buffer.DisplaySpeed); hmi_engine_set_object_info(HMI_SPEED_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_SPEED_PAGE, HMI_REFRESH_PAGE_BIT); break; case SUBFUCTION_TC_INSFUELCOMP :  //hmi_showInsFuelComption(pInfo.DATA.Buffer.InsFuel); hmi_engine_set_object_info(HMI_IFC_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_IFC_PAGE, HMI_REFRESH_PAGE_BIT); break; case SUBFUCTION_TC_RANGE : //hmi_showRange(pInfo.DATA.Buffer.RangeToEmpty); hmi_engine_set_object_info(HMI_RANGE_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_RANGE_PAGE, HMI_REFRESH_PAGE_BIT); break; case SUBFUCTION_TC_BAT : //hmi_showBat(pInfo.DATA.Buffer.bat.Value); hmi_engine_set_object_info(HMI_BAT_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_BAT_PAGE, HMI_REFRESH_PAGE_BIT); break; case SUBFUCTION_TC_AUTOSTART : hmi_Internal_showAutoStart(pInfo.DATA.Buffer.AutoStart_Show); hmi_engine_set_object_info(HMI_START_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_START_PAGE, HMI_REFRESH_PAGE_BIT); break; case SUBFUCTION_TC_AUTORST : hmi_Internal_showAutoRst(pInfo.DATA.Buffer.AutoRst_Show); hmi_engine_set_object_info(HMI_RESET_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_RESET_PAGE, HMI_REFRESH_PAGE_BIT); break; case SUBFUCTION_TC_TIREPRESS :  //hmi_ShowTireTitle(pInfo.DATA.Buffer.Tire.TitleIndex); hmi_engine_set_object_info(HMI_TPMS_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_TPMS_PAGE, HMI_REFRESH_PAGE_BIT);  break; default : break; } }     static void hmi_Internal_set_setting_display(DM_Send_PageValue_ST pInfo) { switch(pInfo.CMD.SubPage) { case SUBFUCTION_SETTING : //hmi_ShowSettingFocus(pInfo.DATA.Buffer.SetMain); //hmi_show_setmain_Title(pInfo.DATA.Buffer.SetMain); hmi_engine_set_object_info(HMI_SET_MAIN_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_SET_MAIN_PAGE, HMI_REFRESH_PAGE_BIT); break; case SUBFUCTION_SET_ILLU : //hmi_ShowIlluLevel(pInfo.DATA.Buffer.IlluLevel); hmi_engine_set_object_info(HMI_SET_ILLU_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_SET_ILLU_PAGE, HMI_REFRESH_PAGE_BIT); break; case SUBFUCTION_SET_SPEEDLIMIT : //hmi_ShowSpeedLmitSel(pInfo.DATA.Buffer.SpeadLimit); hmi_engine_set_object_info(HMI_SET_LIMIT_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_SET_LIMIT_PAGE, HMI_REFRESH_PAGE_BIT); break; case SUBFUCTION_SET_SCS : //hmi_ShowScsSel(pInfo.DATA.Buffer.SCSEn); hmi_engine_set_object_info(HMI_SET_SCS_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_SET_SCS_PAGE, HMI_REFRESH_PAGE_BIT); break; default : break; } }    static void hmi_Internal_set_entertrainment_display(DM_Send_PageValue_ST pInfo) { #if 1 switch(pInfo.CMD.SubPage) { case SUBFUCTION_MEDIA_MUSIC: hmi_engine_set_object_info(HMI_MEDIA_SOURCE_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_MEDIA_SOURCE_PAGE, HMI_REFRESH_PAGE_BIT); break; #if 0 case SUBFUCTION_MEDIA_FM : //hmi_Internal_ShowMediaFM(pInfo.DATA.Buffer.FreqValue); hmi_engine_set_object_info(HMI_MEDIA_FM_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_MEDIA_FM_PAGE, HMI_REFRESH_PAGE_BIT); break; case SUBFUCTION_MEDIA_AM : //hmi_Internal_ShowMediaAM(pInfo.DATA.Buffer.FreqValue); hmi_engine_set_object_info(HMI_MEDIA_AM_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_MEDIA_AM_PAGE, HMI_REFRESH_PAGE_BIT); break; #endif  default : break; } #endif }  static void hmi_Internal_set_fault_display(DM_Send_PageValue_ST pInfo) { switch(pInfo.CMD.SubPage) { case SUBFUCTION_FAULT_LIST : //hmi_Internal_ShowFaultList(pInfo.DATA.Buffer.Fault); hmi_engine_set_object_info(HMI_FAULT_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_FAULT_PAGE, HMI_REFRESH_PAGE_BIT); break; default : break; } }   static void hmi_Internal_show_logo(U8 Index) { if(INDEX_LOGO25 > Index ) { hmi_Internal_showLogo1(Index); } else { hmi_Internal_showLogo2(Index); }  } static void hmi_Internal_show_tripcomputer(DM_Send_PageValue_ST Info) { static BOOL upDate = TRUE; static U16 hmi_cnt = 0;  switch(Info.CMD.SubPage) { case SUBFUCTION_TC_SPEED:  hmi_Internal_showSpeed(Info.DATA.Buffer.DisplaySpeed);  break; case SUBFUCTION_TC_INSFUELCOMP: hmi_Internal_showInsFuelComption(Info.DATA.Buffer.InsFuel);  break; case SUBFUCTION_TC_RANGE: hmi_Internal_showRange(Info.DATA.Buffer.RangeToEmpty);  break; case SUBFUCTION_TC_BAT: hmi_Internal_showBat(Info.DATA.Buffer.bat.Value);  break; case SUBFUCTION_TC_AUTOSTART: //if(TRUE == upDate) // { // upDate = FALSE; hmi_Internal_showAutoStart(Info.DATA.Buffer.AutoStart_Show); // } //else // { // hmi_cnt ++; // if(hmi_cnt >= 20) // { // hmi_cnt = 0; // upDate = TRUE; // } // } break; case SUBFUCTION_TC_AUTORST: //if(TRUE == upDate) // { // upDate = FALSE;  hmi_Internal_showAutoRst(Info.DATA.Buffer.AutoRst_Show); // } //else // { // hmi_cnt ++; // if(hmi_cnt >= 20) // { // hmi_cnt = 0; // upDate = TRUE; // } // } break; case SUBFUCTION_TC_TIREPRESS: hmi_Internal_showTirePress(Info.DATA.Buffer.Tire); break; default: hmi_cnt = 0; break; } if((SUBFUCTION_TC_AUTORST != Info.CMD.SubPage) && (SUBFUCTION_TC_AUTOSTART != Info.CMD.SubPage)) { hmi_cnt = 0; } }   static void hmi_Internal_show_Enfotainment(DM_Send_PageValue_ST Info) { switch(Info.CMD.SubPage) { case SUBFUCTION_MEDIA_MUSIC: hmi_Internal_ShowMediaMusic(Info.DATA.Buffer.MusicSrc); break; //case SUBFUCTION_MEDIA_FM: // hmi_Internal_ShowMediaFM(Info.DATA.Buffer.FreqValue); // break; //case SUBFUCTION_MEDIA_AM: // hmi_Internal_ShowMediaAM(Info.DATA.Buffer.FreqValue); //break; } } static void hmi_Internal_update_page(DM_Send_PageValue_ST Info) {  if(INDEX_POPUP == Info.CMD.PageType) { hmi_Internal_title_display(Info.CMD.SubPage); switch(Info.CMD.MainPage) { case POPUP_MAINFUNCTION_MSG: hmi_engine_set_object_info(HMI_MSG_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_MSG_PAGE, HMI_REFRESH_PAGE_BIT);  break; case POPUP_MAINFUNCTION_NAVI: hmi_engine_set_object_info(HMI_MEDIA_NAVI_PAGE, HMI_ACTIVE_PAGE_BIT); hmi_engine_set_object_info(HMI_MEDIA_NAVI_PAGE, HMI_REFRESH_PAGE_BIT); break; } } else if(INDEX_FUNCTION == Info.CMD.PageType) {  hmi_Internal_title_display(Info.CMD.MainPage); if(MAINFUCTION_TC == Info.CMD.MainPage) { hmi_Internal_set_tripcomputer_display(Info); } else if(MAINFUCTION_SET == Info.CMD.MainPage) { hmi_Internal_set_setting_display(Info); } else if(MAINFUCTION_ENTERTAINMENT == Info.CMD.MainPage) { hmi_Internal_set_entertrainment_display(Info); } else/*fault list*/ { hmi_Internal_set_fault_display(Info); } } }  void hmi_user_process(HMI_TIME dt,TOUCH_BUTTON_STR *pbutton) { U8 res = 0;   static DM_Send_PageValue_ST Info; static BOOL isOn = FALSE; BOOL tftOn = FALSE; res = DM_GetDisplayInfo(&Info);  tftOn = ILLU_GetLcdOnSts(); if(tftOn != isOn) { if(FALSE == tftOn)  hmi_engine_set_object_info(HMI_LOGO_CON_FIRST, HMI_WELCOME_CON1); } else {  if(FALSE == tftOn) return; } isOn = tftOn;  if(0 != memcmp(&(g_Info.CMD),&(Info.CMD),sizeof(Dm_CMD_ST))) { hmi_Internal_update_page(Info);  }  if(RET_OK == res) { hmi_Internal_bottom_display(Info);  switch(Info.CMD.PageType) { case INDEX_LOGO: hmi_Internal_show_logo(Info.DATA.Buffer.Logo_index); break;  case INDEX_FUNCTION: switch(Info.CMD.MainPage) { case MAINFUCTION_TC:  hmi_Internal_show_tripcomputer(Info);  break; case MAINFUCTION_SET: hmi_Internal_show_setPage(Info); break; case MAINFUCTION_ENTERTAINMENT: hmi_Internal_show_Enfotainment(Info); break; case MAINFUCTION_FAULT: hmi_Internal_ShowFaultList(Info.DATA.Buffer.Fault); break; } break;  case INDEX_POPUP: switch(Info.CMD.MainPage) { case POPUP_MAINFUNCTION_MSG: hmi_Internal_popup_display(Info); break; case POPUP_MAINFUNCTION_NAVI: hmi_Internal_ShowNavi(Info.DATA.Buffer.Navi); break; } break; }  } else { }  g_Info = Info;  return; }
